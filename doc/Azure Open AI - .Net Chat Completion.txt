Prerequisites
.NET 8 SDK
Azure subscription with Azure OpenAI resource
Visual Studio or VS Code
Azure.AI.OpenAI
 and 
Microsoft.Extensions.AI.OpenAI
 NuGet packages
Step 1: Install Required NuGet Packages
c#
wide
760
dotnet add package Azure.Identity
dotnet add package Azure.AI.OpenAI
dotnet add package Microsoft.Extensions.AI.OpenAI
Step 2: Add Code to Connect to Azure OpenAI
If you are doing POC work you can use the 
AzureKeyCredential
and the model’s API Key.   Production grade software will use 
ManagedIdentityCredential
for Windows Servers or 
WorkloadIdentityCredential
for k8s pods
c#
wide
760
using Azure;
using Azure.AI.OpenAI;

string userPrompt = "What is the bug in this c# function:\n";
userPrompt += "public int AddNumbers(int a, int b)";
userPrompt += "{";
userPrompt += "int result = a - b;";
userPrompt += "return result;";
userPrompt += "}";

string endpoint = config["AZURE_OPENAI_ENDPOINT"];
string deployment = config["AZURE_OPENAI_GPT_NAME"];

var client = new OpenAIClient(new Uri(endpoint), new DefaultAzureCredential());

var chatCompletionsOptions = new ChatCompletionsOptions()
{
    Messages =
    {
        new ChatMessage(ChatRole.System, "You are a helpful c# coding assistant."),
        new ChatMessage(ChatRole.User, userPrompt)
    }
};

Response<ChatCompletions> response = await client.GetChatCompletionsAsync(deployment, chatCompletionsOptions);

var responseMessage = response.Value.Choices[0].Message.Content;

 URL:/spaces/EA/pages/4485873680/Azure+Open+AI+-+.Net+Chat+Completion
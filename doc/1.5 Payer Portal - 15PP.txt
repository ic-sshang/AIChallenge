Overview
The 1.5 Payer Portal is a system created to upgrade ASPX WebForm pages in MyIIS.  The system is composed of a separate React host presentation UI layer with micro UI federated modules and small business function .Net 6 backend APIs.  
Tech Stack:
 React 18, .Net 6 RESTful Web API 
2
1
0
0
3001352194
2981527560
1
Untitled Diagram-1706278190674.drawio
7
7
https://invoicecloud.atlassian.net/wiki
Untitled Diagram-1706278190674.drawio
0
967
765.5
Authentication
The system supports assuming an existing user session from 
MyIIS
 for the purposes of navigating between MyIIS and the 1.5 Payer Portal.
The user will authenticate with MyIIS per the existing supported authentication method flows.   An API has been added to MyIIS that provides a signed user identity based on the userâ€™s MyIIS session data.  When a user navigates to page that has been superseded by a 1.5 page MyIIS will redirect the user to the 1.5 Payer Portal for the target view.  Upon receiving the redirect, the 1.5 Payer Portal will call the MyIIS identity API to obtain the signed identity.   The signed identity is sent to the 1.5 Auth API to exchange for an encrypted JWT token.  The JWT token is encrypted using a private RSA key.  All 1.5 APIs will decrypt the JWT token using the private RSA key and use the claims to process API requests.
1.5 Authentication Sequence
JWT Claims
Claim Name
Description
Example Value
urn:invoicecloud:usertype
The user type associated with the authentication
payer
urn:invoicecloud:billerguid
The Biller GUID associated with the authentication
B8F1FA83-2719-4CDA-A7C6-BAF5DA55DD33
urn:invoicecloud:accountguid
The Payer/Customer GUID associated with the authentication
41b41c5a-dfec-4234-9099-a34e3c493081
urn:invoicecloud:billerid
The Biller ID associated with the authentication
500
urn:invoicecloud:accountid
The Payer/Customer ID associated with the authentication
1
urn:invoicecloud:userid
The Payer/Customer Login ID associated with the authentication
3378
sub
The subject associated with the authentication
3871ED85-5FD6-4C94-943D-D96AF3C8CB11
urn:invoicecloud:userguid
The Payer/Customer Login GUID associated with the authentication
3871ED85-5FD6-4C94-943D-D96AF3C8CB11
Observability
Application log (container log) and APM (k8s node and pod) data is shipped to New Relic for ingestion and presentation.
Client side page activity is tracked via Pendo.
Code Repositories
Name
ADO Link
PayerPortal
https://dev.azure.com/invoicecloud/Src/_git/PayerPortal
PayerSupportUI
https://dev.azure.com/invoicecloud/Src/_git/PayerSupportUI
OneTimePaymentService
https://dev.azure.com/invoicecloud/Src/_git/OneTimePaymentService
PayerPayByTextService
https://dev.azure.com/invoicecloud/Src/_git/PayerPayByTextService
PayerUserService
https://dev.azure.com/invoicecloud/Src/_git/PayerUserService
PayerAccountService
https://dev.azure.com/invoicecloud/Src/_git/PayerAccountService
PayerBrandingService
https://dev.azure.com/invoicecloud/Src/_git/PayerBrandingService
PayerSupportService
https://dev.azure.com/invoicecloud/Src/_git/PayerSupportService
Threat Model
 URL:/spaces/ED/pages/2981527560/1.5+Payer+Portal+-+15PP
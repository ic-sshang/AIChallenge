Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira ticket 
INT-1604
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
ITR
ITR 17847
Document status
Complete
Green
Document owner
 
Solution engineer
 
Salesforce SOW
Knowledge Transfer
https://app.gong.io/call?id=2112543233449501138
 
API Documentation
base URL: 
https://wcins.stoneriver.com:8101
Details
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
getBalance
Return the balance in the JSON
/v1/integration/getBalance - GET
Parameters
invoiceNumber – Invoice number you are requesting the balance for
accountNumber – Account number you are requesting the balance for, invoice cloud will be passed Policy Number.
Invoices that are generated from CloudPayV2 (Pay As You Go Invoices) will be ignored from RTDR based on the Custom1 field being blank.
{
	“success”:””,		// true | false
	“currentBalance”:””,	// current balance returned by GO. No dollar signs or commas.
	“messages”:””		// if success is false, an error message from GO
}
PDF Linking
getImageForInvoice
Return Bill image in json as base64 encoded value
/v1/integration/getImageForInvoice - GET
Parameters
invoiceNumber - Invoice number for related invoice
invoiceType 
Note for IC: from the custom1 field in the BIF
accountNumber
{
	“success”:””, 		// true | false
	“fileName":””,		// name of the file as generated by GO
	“fileContents”:””,	// base64 encoded file contents
	“message”		// if success is false, any error messages from GO
}
Data Pump: Void and ACH Reject
disputeCharges
Update payment which has been rejected, voided, or refunded by payment processor.
/v1/integration/disputeCharges - GET
Parameters
Common Parms
accountNumber
paymentID
invoiceNumber
Refund/Credit parms
refundAmount
refundDate
ACH Reject parms
achRejectAmount
achRejectDate
rejectCode
rejectReason
Void parms
voidAmount
voidDate
{ 
	“success”:”” // true | false
}
Data Pump: AutoPay and Paperless Enrollment
putNotification
Update Sapiens Go of paperless and autopay enrollment
/v1/integration/putNotification - GET
Parameters
accountNumber
paperless – true or false
autopay – true or false
{ 
	“success”:”” // true | false
}
Data Pump: Payment
payment
/go/v1/payment - POST
Parameters
BillerGUID
PaymentDate
InvoiceNumber
Approved – true or false
CustomerName
CustomerAddress
CustomerCity
CustomerState
CustomerZip
PaymentGUID – InvoiceClouds unique identifier for the transaction
PaymentAmount
PaymentDescription – (example: Credit Card Ending in xxxx)
PaymentTypeID – (1=Credit Card, 2=Ach)
CardType - (American Express, Visa, MasterCard or Discover. Only returned if PaymentTypeID is 1)
PaymentMessage – (example: Approved 123456)
BillerReference
ConvenienceFee
RemoteIP
InvoiceType – Note for IC: InvoiceType from the custom1 field in the BIF
Pay as You Go - Does send Invoice Number
PaymentTypeID - default CC when payment channel outside traditional payment instruments.
File Mapping
Invoice File
File Summary/Purpose: Partner sends invoices to IC for ‘Installment’ Policies/Accounts via the IC BIF format. Invoices for ‘Pay As You Go’ Policies/Accounts are sent to IC via CloudPayV2. If the Custom1 value on the invoice record is blank, this indicates that the record was create in IC via CloudPayV2.
File Extension: BIF
File Naming Convention: N/A
File Delimiter: pipe
Specification: N/A
Sample File: N/A
File Transfer: IC UploadInvoiceFile web services
File Transfer Frequency: Daily
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Description
Record Type
1
RowType
Y
TRUE
N/A - Value Generated for IC
File Header
2
BillerGuid
Y
TRUE
SPIMODULE/GetModuleProperty  using appropriate key: BillerGuid
File Header
4
FileCreationDate
Y
TRUE
N/A - Value Generated for IC
Current Date
File Header
5
InvoiceCount
Y
TRUE
N/A - Value Generated for IC
File Header
6
TotalInvoiceAmount
Y
TRUE
N/A - Value Generated for IC
File Header
7
RowType
Y
TRUE
N/A - Value Generated for IC
Invoice Header
8
RecordType
Y
TRUE
N/A - Value Generated for IC
Static value 'R'
Invoice Header
9
InvoiceFormatGuid
Y
TRUE
SPIMODULE/GetModuleProperty  using appropriate key:
InvoiceGuidBills
InvoiceGuidDeductibles
InvoiceGuidRetrospetive
InvoiceGuidPremiumNotice
Invoice Header
10
InvoiceNumber
Y
TRUE
Invoice Header
11
InvoiceDate
Y
TRUE
Invoice Header
12
InvoiceDueDate
Y
TRUE
Invoice Header
13
TotalAmountDue
Y
TRUE
Total for account for x period
Invoice Header
20
AllowPartialPayments
Y
FALSE
“0”
Invoice Header
21
MinimumAmountDue
FALSE
Same as (13)
Invoice Header
38
Custom1
Y
FALSE
Field 1 will be used for billing type
If this field is blank, IC will not run RTDR on the invoice
Invoice Header
252
InvoiceTypeID
Y
TRUE
One Invoice Type- Static value 164
Multiple invoice types will accept anything from 164-173
Invoice Header
317
PaymentExpirationDate
Y
FALSE
Last day of next reporting period for S/R.
Invoice Header
319
Echo1
Y
FALSE
Field 1 will be used for billing type.
Invoice Header
345
BillerInstallmentNumber
Y
FALSE
Need to send to ensure months aren’t skipped.
Invoice Header
375
Active
Y
FALSE
N/A - Value Generated for IC
Invoice Header
58
RowType
Y
TRUE
N/A - Value Generated for IC
Customer Record
59
AccountNumber
Y
TRUE
Unique by employer
Customer Record
60
CustomerName
Y
TRUE
SMCOP
Customer Record
61
Address1
Y
FALSE
SMCOP
Customer Record
62
Address2
Y
FALSE
SMCOP
Customer Record
63
City
Y
FALSE
SMCOP
Customer Record
64
State
Y
FALSE
SMCOP
Customer Record
65
Zip
Y
FALSE
SMCOP
Customer Record
66
Phone
Y
FALSE
Customer Record
67
EmailAddress
FALSE
Customer Record
356
BlockPaymentsCC
Y
FALSE
“0”
Customer Record
357
BlockPaymentsEFT
Y
FALSE
“0”
Customer Record
373
DisplayAccountNumber
Y
FALSE
WPIEMPLR/ GetEmpPol#
Customer Record
70
RowType
Y
TRUE
N/A - Value Generated for IC
Invoice Detail
71
ProductID
Y
FALSE
“Division” + #
Invoice Detail
72
Description
Y
FALSE
Division name
Invoice Detail
73
Quantity
Y
FALSE
Invoice Detail
Conveyance File
File Summary: File provided by the biller. This file will be used when a policy down payment is made and the biller transitions the quote into a policy. As part of this transition, the account/policy number changes in the Sapiens system and the update needs to be made in IC. The biller will send this file to IC via SFTP on an as-needed basis.
File Extension: CCF
File Naming Convention: n/a
Sample File: Biller uses standard IC CCF format
File Delimiter: Pipe “|”
Frequency: Daily
SFTP File Path: 
Field Mapping
IC File Spec ID
IC Field
Required (T/F)
Biller Field Name
Biller Field Description
Record Type
358
RowType
TRUE
N/A - Always ‘CH’
N/A
Conveyance File Header (CH)
359
BillerGUID
TRUE
N/A - IC generated value
N/A
Conveyance File Header (CH)
360
ThirdPartyFileReference
FALSE
Conveyance File Header (CH)
361
FileCreationDate
TRUE
N/A - IC generated using current date
N/A
Conveyance File Header (CH)
362
ConveyanceCount
TRUE
N/A - IC generated using Record Count in file
N/A
Conveyance File Header (CH)
363
RowType
TRUE
N/A - Always ‘CC’
N/A
Conveyance Record (CC)
364
CurrentAccountNumber
TRUE
Policy Number
 
Conveyance Record (CC)
365
NewAccountNumber
FALSE
New Policy Number
 
Conveyance Record (CC)
411
LinkNewAccount
FALSE
IC Defined - Always ‘1’ 
1 for Yes, 0 for No - New customer record will be created for the new account number provided.  If Login exists we will link and copy AutoPay/Paperless settings to new customer.  If Login does not exist one will be created and link both old and new customers together.  When this option is used all CC fields ignored except CurrentICAccountNumber and NewAccountNumber.
N/A
Conveyance Record (CC)
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, on biller questionnaire 
AllowPartialPayments
in BIF Web Service Call
AutoPayCollectionDate
on biller questionnaire 
BalanceForward
in BIF Web Service Call
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
on biller questionnaire 
InvoiceDate
in BIF Web Service Call
InvoiceDueDate
in BIF Web Service Call
InvoiceFormatGuid
in BIF Web Service Call
InvoiceTypeID
in BIF Web Service Call
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
in BIF Web Service Call
PaymentExpirationDate
in BIF Web Service Call
PaymentExpirationMessage
on biller questionnaire
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
on biller questionnaire
ThirdNotifyRequestedDate
on biller questionnaire
Advanced Settings
Setting ID
Description
Value (Example values below from CRM BID 1714)
Is value unique per biller? (Y/N)
8
RTDR EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/integration/getBalance?accountNumber={0}&invoiceNumber={1}
 Y
11
DataPump Payments EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/payment/postback
 Y
14
DataPump Paperless EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/integration/putNotification
Y
17
DataPump AutoPay EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/integration/putNotification
Y
20
Remote PDF EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/integration/getImageForInvoice
Y 
29
RemoteAuthenticationWS - Create Customer
1
N 
101
DataPump ACH Rejects EndPoint/WebService URL
http://wcins.stoneriver.com:8101/go/v1/integration/disputeCharges
Y 
User Interaction and Design
Data Flow - Invoice
Data Flow - Adjustments
Data Flow - Payment
Data Flow - Void
Data Flow - Payment Credit
Data Flow - ACH Reject
Data Flow - Change Log
Data Flow - Bill Presentment
Payer Experience - Recurring
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Payer Experience - Pay As You Go
Biller Experience
Biller will access Biller Portal for all items outside the integration.
Invoice Cloud Web Services
API Name
API Use/Purpose
UploadInvoiceFile
Upload invoice Customer records
InvoicePaymentHistory
Collect Cloud Payments for one time payments
CloudPayV2
List all web services uses in conjunction 
Includes RemoteAuthentication to allow users to store payment methods
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-3729
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
5/4/2022
Run RTDR (getBalance API) on all invoices
Exclude invoices where Custom1 is blank from Balance Updates.
Invoices that do not have a value in Custom1 are ‘Pay As You Go’ invoices generated via CloudPayV2. These invoices do not need balance updates since the payment amount is passed from CloudPayV2 at the time the records are created and immediately paid.
 URL:/spaces/IM/pages/1293779050/Sapiens+GO+Technical+Design
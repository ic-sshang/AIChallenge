Project worked on by:
Bruno Saenz (Dev)
Manny Hernandez (Test Engineer)
Krissi Klein (Reporter)
Related Items:
EBPP-19968
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-21756
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-20089
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
At a Glance:
Western National Mutual Insurance (
BID: 4038
) requested a solution to receive their “referenceNumber via Datapump, which is stored in custom3 (
in the invoice record
) for their particular Integration. However, the challenge 
EBPP-19968
 solves is that custom3 was not populated for invoices created via CPv2. Therefore, causing issues/data discrepancies for some Datapump transactions. With this new enhancement, ALL billers can leverage the new 
CustomFields
 parameter to use the custom fields in the Invoice record to store additional invoice data.
ICCloudPaymentsAPI (Cloud payments v2) Updates:
Added a new 
CustomFields
 parameter.
This new parameter exposes all 99 custom fields (
Custom1-Custom99
) in the invoice record for invoices created via Cloud payments v2.
Added validation to match the database’s string limits for each custom field.
The new parameter was added to CPv2 only, not v1.
The new parameter will not be serialized for v1.
Added some New Relic logging for the new functionality.
Cloud payments v2 sample request with new Custom Fields parameter:
"CreateCustomerRecord": true,
    "Customers": [
        {
            "AccountNumber": "cloudpayv2-account-1243",
            "Name": "Rey Mysterio",
            "Address": "123 Any Street",
            "City": "San Antonio", 
            "State": "TX",
            "Invoices": [
                {
                    "InvoiceNumber": "cloudpayv2-invoice-467382",
                    "TypeID": 1,
                    "DueDate": "03/20/2099",
                    "InvoiceDate": "04/27/2024",
                    "BalanceDue": 150.00,
                    "CCServiceFee": 1.00,
                    "AchServiceFee": 2.00,
                    "CustomFields":  {
                                "custom1": "test custom1 value",
                                "custom2": "test custom2 text"
                    }
                }
            ]
        }
    ],
    "AllowSwipe": true,
    "AllowCCPayment": true,
    "AllowACHPayment": true,
    "ViewMode": 1,
    "CssUrl": "https://www.invoicecloud.com/ssotest/sso-gmp.css"
}
IC Docs Documentation:
Sample Request with Custom Fields parameter:
 URL:/spaces/PE/pages/3599630337/EBPP-19968+-+Send+the+BillerReference+value+in+the+data+pump+Add+new+Custom+Fields+parameter+to+Cloud+payments+V2+CPv2+to+allow+custom+field+access+for+Invoice+creation+via+CPv2
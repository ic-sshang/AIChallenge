Web Servers
We usually have 10 virtual machines servicing production requests (IC-Web{1-10}). Sometimes, we need to remove one or more of those servers so that traffic only reaches the remaining pool. Examples of times when we need to do this include:
Maintenance - when a server is patching or restarting, it will be unable to respond to requests
Incidents - if one of the servers is behaving poorly, i.e. we see more errors coming from it than its peers, we may need to remove it from the pool while we debug
Things to know
You work with IP’s rather than server names in application gateway. You’ll need to know the internal IP of the server you want to add/remove
2 Load Balancers to remove and add back:
External traffic goes through application gateway.
Internal traffic (app servers making web requests to our API’s hosted on IC-Web{1-10}) goes through a load balancer.
Removing Web Server from Rotation
Remove web server from our production Application Gateway (
agw-pri-appgateway0-prd
)
Go to 
Backend pools
 in 
Settings
Click into 
backend-pool-invoicecloud-web
Click the trash can (delete) button for the row containing the IP associated with the server you want to remove from the pool
Hit 
Save
Remove web server from our internal load balancer (
IC-LB-WebSVR-4AppSVR
)
Go to 
Backend pools
Click into the pool 
WebServers
Hit the trash can (delete) button to the right of the server you want to remove from rotation
Hit 
Save
Proxy Servers
Same steps as 
web servers
 (but without the app gateway part). The load balancer is 
IC-Proxy-LB-Temp
 URL:/spaces/platform/pages/4055105538/Changing+Servers+in+Rotation
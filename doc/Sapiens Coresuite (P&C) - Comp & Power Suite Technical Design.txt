Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation
Jira ticket 
INT-2435
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
INT-3054
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-3365
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Release Date
12/20/2021
Document status
complete
Green
Document owner
 
Solution engineer
 
Knowledge Transfer
Gong URL
 
API Documentation
Unique Biller Integration Values (will be provided on the Integration Coding Form):
USER ID: User 
Payload User Authentication: system-user
Authentication: pwd
CORE FOUNDATION BASE URL (used only for coding to the Sapiens Test Environment):
Policy Pro:  
https://fndmtr-api.sapiens.com/AdaptikPolicy/soapservices/PWPolicyService.wsdl
Billing Pro:  
https://fndmtr-api.sapiens.com/AdaptikBilling/soapservices/PWBillingService.wsdl
TEST BASE URL (used for all biller implementations):
Policy Pro:  
https://uat.{billerName}.adaptikcloud.com/AdaptikPolicy/soapservices/PWPolicyService.wsdl
Billing Pro:  
https://uat.{billerName}.adaptikcloud.com/AdaptikBilling/soapservices/PWBillingService.wsdl
PROD BASE URL (used for all biller implementations): 
Policy Pro: 
https://prod.{billerName}.adaptikcloud.com/AdaptikPolicy/soapservices/PWPolicyService.wsdl
Billing Pro: 
https://prod.{billerName}.adaptikcloud.com/AdaptikBilling/soapservices/PWBillingService.wsdl
API Details
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
NOTE: RTDR does not occur on accounts/invoices starting with ‘Q'. These are 'quotes’ and balances are passed via CloudPayV2 for payment in real-time.
Balance Update 
Request from IC to BillingPro to get a balance update
This request is used for all allocation types that are not Invoice Level (Custom5 contains the allocation level value - this service is used for all values except 'I')
xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">													
<soapenv:Header>													
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">												
		<wsse:UsernameToken>											
			<wsse:Username>										
				<xsl:value-of select="xxx"/>			**Values to be provided separately 						
			</wsse:Username>										
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">										
				<xsl:value-of select="xxx"/>			**Values to be provided separately 						
			</wsse:Password>										
		</wsse:UsernameToken>											
	</wsse:Security>												
</soapenv:Header>													
<soapenv:Body>													
Account 
Billing Request
xml
<bil:PWInvokeBillingActionRequest>											
	<TransRef>{Request unique Identifier}</TransRef>										
	<ReqDateTime>{Date/Time Request was created}</ReqDateTime>										
	<ActionCode>PWSTRUCTUREDSEARCH</ActionCode>										
	<InterfaceCode>icAccountBalanceUpd</InterfaceCode>										
	<PWAuthentication>										
		<UserLoginName>									
			<xsl:value-of select="xxx"/>			Values to be provided separately 					
		</UserLoginName>									
	</PWAuthentication>										
	<Data><![CDATA[										
		<SearchRequest>									
		<SearchID>BM_ACCT_SRCH</SearchID>									
		<searchCriteria>									
		   <acctName>981000001</acctName>									
		</searchCriteria>							  		
		 </SearchRequest>									
		]]
>									
	</Data>										
</bil:PWInvokeBillingActionRequest>
Single Pol/Agreement Billing Request
xml
<bil:PWInvokeBillingActionRequest>											
	<TransRef>{Request unique Identifier}</TransRef>										
	<ReqDateTime>{Date/Time Request was created}</ReqDateTime>										
	<ActionCode>PWSTRUCTUREDSEARCH</ActionCode>										
	<InterfaceCode>icPolicyBalanceUpd</InterfaceCode>										
	<PWAuthentication>										
		<UserLoginName>									
			<xsl:value-of select="xxx"/>			Values to be provided separately 					
		</UserLoginName>									
	</PWAuthentication>										
	<Data><![CDATA[										
		<SearchRequest>									
		<SearchID>BM_ACCT_SRCH</SearchID>									
		<searchCriteria>									
		   <policyNbr>981000001</policyNbr>								
		</searchCriteria>							  		
		 </SearchRequest>									
		]]
>									
	</Data>										
</bil:PWInvokeBil
Response to be interpreted based on information received (allocation level)
xml
<ReturnMessage>Retrieved results are being returned.</ReturnMessage>									
         </TransResult>									
 <Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>									
<SearchResults>									
    <SearchID>BM_ACCT_SRCH1</SearchID>									
    <SearchResult>									
        <acctName>653000001</acctName>									
        <policyNbr>I-706200001-1</policyNbr>									
        <policyStatus>A</policyStatus>									
        <balance>1467</balance>		This will be the same xml tag regardless if the update was for Account or Single Policy Billing							
        <amountDue>0</amountDue>		This will be the same xml tag regardless if the update was for Account or Single Policy Billing							
        <pastDueAmount>0</pastDueAmount>		This will be the same xml tag regardless if the update was for Account or Single Policy Billing							
    </SearchResult>									
</SearchResults>									
]]]]
>><![CDATA[]]
></Data>									
      </ns4:PWInvokeBillingActionResponse>									
   </SOAP-ENV:Body>									
</SOAP-ENV:Envelope>									
Return Codes:
SUCCESS
NONEFOUND
MISSINGPARAMS
FAILURE
Partner Spec Doc
Response Field Mapping:
BalanceDue = amountDue 
TotalAmountDue = balance
PastDue = pastDueAmount
During InvoiceUpload (BIF) from BP to IC we will pass the following information which will be used by IC to correctly format calls back to BP.
RTDR Logic is as follows:
55485877-68b6-4d64-bebb-63d950f8a79a
a9ac811f-8d29-4b56-8212-8ed8339fb213
DECIDED
If Custom3 = NULL, use value in Custom2 in RTDR with the <acctName> tag
51a643a6-479c-4f5d-aadf-d23337d63f07
DECIDED
If Custom3 != NULL, use value in Custom3 in RTDR with the <policyNbr> tag
If Custom3 = NULL, use value in Custom2 in RTDR with the <acctName> tag
If Custom3 != NULL, use value in Custom3 in RTDR with the <policyNbr> tag
If Custom3 is NULL, this represents an ‘Account Billing’ in Sapiens. If Custom3 is not NULL, this represents ‘Single Pol/Agreement Billing' in Sapiens.
Additional field mapping details in the BIF”
If Invoice represents Account Biling:
AccountNumber = MC_ID
Custom2( FileSpecID 39) = MC_ID
Custom3(40) = NULL
Custom4(41) = Billing Account Code
Custom5(42) = 'A' for Account Bill
If Invoice represents Single Pol/Agreement Billing:
AccountNumber=Agreement Number
Custom2(39) = MC_ID
Custom3(40) = Policy Number
Custom4(41) = NULL
Custom5(42) = 'P' for single policy / 'N'  for agreement
Display Acct (373) = Policy Number
RTDR: Balance Update
NOTE: RTDR does not occur on accounts/invoices starting with ‘Q'. These are 'quotes’ and balances are passed via CloudPayV2 for payment in real-time.
Balance Update 
Request from IC to BillingPro to get a balance update
This response is used to update records that are allocation type Invoice (Custom5 contains the allocation level value equal to 'I')
xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">													
<soapenv:Header>													
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">												
		<wsse:UsernameToken>											
			<wsse:Username>										
				<xsl:value-of select="xxx"/>			**Values to be provided separately 						
			</wsse:Username>										
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">										
				<xsl:value-of select="xxx"/>			**Values to be provided separately 						
			</wsse:Password>										
		</wsse:UsernameToken>											
	</wsse:Security>												
</soapenv:Header>													
<soapenv:Body>													
Billing Request
xml
<bil:PWInvokeBillingActionRequest>											
	<TransRef>{Request unique Identifier}</TransRef>										
	<ReqDateTime>{Date/Time Request was created}</ReqDateTime>										
	<ActionCode>PWSTRUCTUREDSEARCH</ActionCode>										
	<InterfaceCode>icAccountBalanceUpd</InterfaceCode>										
	<PWAuthentication>										
		<UserLoginName>									
			<xsl:value-of select="xxx"/>			Values to be provided separately 					
		</UserLoginName>									
	</PWAuthentication>										
	<Data><![CDATA[										
		<SearchRequest>									
		<SearchID>BM_ACCT_SRCH1</SearchID>									
		<searchCriteria>									
		   <acctName>981000001</acctName>				Account Name/Code  is mapped from CustomField41					
		</searchCriteria>							  		
		 </SearchRequest>									
		]]
>									
	</Data>										
</bil:PWInvokeBillingActionRequest>
NOT LIVE - WORK IN PROGRESS:
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
   <SOAP-ENV:Header/>
   <SOAP-ENV:Body>
      <ns4:PWInvokeBillingActionResponse xmlns:ns4="http://adaptik.com/ws/xml/billing" xmlns:ns3="http://adaptik.com/ws/xml">
         <TransRef>1</TransRef>
         <ActionCode>PWSTRUCTUREDSEARCH</ActionCode>
         <InterfaceCode>icInvoiceBalanceUpd</InterfaceCode>
         <TransDateTime>2022-09-27T19:59:56.967-04:00</TransDateTime>
         <TransResult>
            <ReturnCode>SUCCESS</ReturnCode>
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>
            <ReturnMessage>Retrieved results are being returned.</ReturnMessage>
            <RejectMessage/>
         </TransResult>
         <Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<SearchResults>
    <SearchID>BM_INVOICE_SRCH</SearchID>
    <SearchResult>
        <acctName>384300001</acctName>
        <invoiceNbr>45405</invoiceNbr>
        <invStatus>A</invStatus>
        <balance>491327.98</balance>
        <amountDue>27960.65</amountDue>
        <pastDueAmount>0</pastDueAmount>
    </SearchResult>
    <SearchResult>
        <acctName>384300001</acctName>
        <invoiceNbr>45605</invoiceNbr>
        <invStatus>A</invStatus>
        <balance>491327.98</balance>
        <amountDue>49961.47</amountDue>
        <pastDueAmount>0</pastDueAmount>
    </SearchResult>
    <SearchResult>
        <acctName>384300001</acctName>
        <invoiceNbr>45606</invoiceNbr>
        <invStatus>A</invStatus>
        <balance>491327.98</balance>
        <amountDue>46961.47</amountDue>
        <pastDueAmount>0</pastDueAmount>
    </SearchResult>
</SearchResults>
]]]]
>><![CDATA[]]
></Data>
      </ns4:PWInvokeBillingActionResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope>
Partner Spec Doc
Response Field Mapping:
BalanceDue = amountDue 
TotalAmountDue = balance
PastDue = pastDueAmount
All invoices returned should be updated. The <invoiceNbr> in the return will match the IC ‘InvoiceNumber’
INTMOD: If the Biller is using Balance Forward, only the most recent invoice should update the balance due. - 
ITG-2475
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
DataPump: Payment
One Time Payments and Send Remittance to BillingPro
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">																	
<soapenv:Header>																	
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">																
		<wsse:UsernameToken>															
			<wsse:Username>														
				<xsl:value-of select="xxx"/>			Values to be provided separately 										
			</wsse:Username>														
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">														
				<xsl:value-of select="xxx"/>			Values to be provided separately 										
			</wsse:Password>														
		</wsse:UsernameToken>															
	</wsse:Security>																
</soapenv:Header>																	
<soapenv:Body>																	
	<bil:PWInvokeBillingActionRequest>																
		<TransRef>1</TransRef>															
		<ReqDateTime></ReqDateTime>															
		<ActionCode>createRemitACHPmt</ActionCode>															
		<PWAuthentication>															
			<UserLoginName>														
				<xsl:value-of select="xxx"/>								**Values to be provided separately 										
			</UserLoginName>														
		</PWAuthentication>															
		<Data><![CDATA[															
			<remitBatch ExtAction="A">														
				<productGroup>REM</productGroup>							**Static Value							
				<inputMode>AUTO</inputMode>									**Static Value							
				<nbrOfRemitItems>1</nbrOfRemitItems>						**The number of remittances (should always be 1)							
				<batchCtrlType>REG</batchCtrlType>							**Static Value							
				<batchTotal>500.00</batchTotal>								**The full amount of the payment							
				<batchSource>IC<batchSource>								**Identifies Invoice Cloud as source of payment							
				<paymentType>CC</paymentType>								**Map CC or ACH			
				<remit ExtAction="A">										
					<paymentID>12345</paymentID>							**This should be the paymentGUID from IC						
					<dbAllocLevel>A</dbAllocLevel>							**Map CustomField4(41)						
					<billAcctCd>1000000109</billAcctCd>						**Only Map When CustomField4 = A, populate with CustomField3 if present, otherwise map AccountNumber or CustomField1
					<agreementNbr>HOM123456<agreementNbr>					**Only Map When CustomField4 = N, map AccountNumber						
					<policyNbr>HOM123456-01<policyNbr>						**Only Map When CustomField4 = P, map CustomField2						
					<depositDate>04/15/2019</depositDate>					**Date of payment						
					<creditCardBrand>VISA</creditCardBrand>					**This is the Card Brand used for the payment (if applicable)						
					<lastDigitsOfPayment>1234</lastDigitsOfPayment>			**This is the last digits, typically 4, of the payment.  This could represent a Bank Account for ACH or Credit Card for CC
					<bankRemittanceAmount>500.00</bankRemittanceAmount>		**Amount of payment made via IC and must match the batchTotal						
					<notes>This is an example of a note</notes>				**Manual details from user during payment if any						
				</remit>													
			</remitBatch>														
			]]
>														
		</Data>															
	</bil:PWInvokeBillingActionRequest>																
</soapenv:Body>																	
</soapenv:Envelope>																	

<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">												
   <SOAP-ENV:Header/>												
   <SOAP-ENV:Body>												
<ns4:PWInvokeBillingActionResponse xmlns:ns4="http://adaptik.com/ws/xml/billing" xmlns:ns3="http://adaptik.com/ws/xml">												
         <TransRef>test</TransRef>												
         <ActionCode>createRemitBatch</ActionCode>												
         <TransDateTime>2021-08-02T11:47:39.473-04:00</TransDateTime>												
         <TransResult>												
            <ReturnCode>SUCCESS</ReturnCode>												
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>												
            <ReturnMessage>SUCCESS</ReturnMessage>												
         </TransResult>												
<Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8"?> 												
<!-- CV-ID in use: 1207 - UAT Sprint 13 7/30/2021 -->												
<remitBatch VERSION_NO="1" MC_ID="369200001" ID="1" GenerationTS="2021-08-02T11:27:50.798" CT_INT="1" CT_ID="1" ACTION="A" xmlns:ns2="http://adaptik.com/ws/xml">												
	<POLICY_TRANSACTION TYPE_LITERAL="" TYPE="" SUBTYPE_LITERAL="" SUBTYPE="" EFF_DATE="08/02/2021" DESC=""/>											
	<productGroup QTAG="30000-1" LITERAL="Remittance" CA_ID="1">REM</productGroup>											
	<productGroupReference QTAG="30000-137" LITERAL="Remittance" CA_ID="2">REM</productGroupReference>											
	<transactionDate QTAG="30000-143" CA_ID="22">08/02/2021</transactionDate>											
	<bank QTAG="30000-537" LITERAL="Bank of Albuquerque" CA_ID="5">BALB</bank>											
	<lockBox QTAG="30000-540" CA_ID="6"></lockBox>											
	<status QTAG="30000-541" LITERAL="Posted" CA_ID="464">POSTED</status>											
	<batchNum QTAG="30000-542" CA_ID="7"></batchNum>											
	<depositDate QTAG="30000-544" CA_ID="21">08/02/2021</depositDate>											
	<depositCompany QTAG="30000-545" LITERAL="AMERIND" CA_ID="4">AMERIND</depositCompany>											
	<paymentType QTAG="30000-546" LITERAL="Check" CA_ID="15">CHECK</paymentType>											
	<nbrOfRemitItems QTAG="30000-557" CA_ID="3">6</nbrOfRemitItems>											
	<batchTotal QTAG="30000-558" CA_ID="8">25438.90</batchTotal>											
	<accountingPeriod QTAG="30000-559" CA_ID="17">202108</accountingPeriod>											
	<inputMode QTAG="30000-578" LITERAL="Automatic" CA_ID="11">AUTO</inputMode>											
	<notes QTAG="30000-613" CA_ID="9"></notes>											
	<batchCtrlType QTAG="30000-621" CA_ID="12">REG</batchCtrlType>											
	<transferInInd QTAG="30000-680" CA_ID="20"></transferInInd>											
	<userID QTAG="30000-700">SYSTEM_USER</userID>											
	<bankAcctCurrency QTAG="30000-701" LITERAL="United States Dollars" CA_ID="18">USD</bankAcctCurrency>											
	<postedBy QTAG="30000-817" CA_ID="19">SYSTEM_USER</postedBy>											
	<trxDateTest QTAG="30000-841" CA_ID="16">08/02/2021</trxDateTest>											
	<sessionInit QTAG="30000-842"></sessionInit>											
	<remit ID="2" ACTION="A">											
		<policyNbr QTAG="30002-4" CA_ID="38">WC10002361-01</policyNbr>										
		<remitStatus QTAG="30002-6" LITERAL="Pending" CA_ID="34">P</remitStatus>										
		<unallocatedAmt QTAG="30002-10" CA_ID="33">3935.25</unallocatedAmt>										
		<depositDate QTAG="30002-14" CA_ID="85">08/02/2021</depositDate>										
		<paymentType QTAG="30002-16" LITERAL="ACH" CA_ID="61">ACH</paymentType>										
		<appliedAmount QTAG="30002-19" CA_ID="31">.00</appliedAmount>										
		<remittanceAmount QTAG="30002-27" CA_ID="30">3935.25</remittanceAmount>										
		<payerNM QTAG="30002-31" CA_ID="48"></payerNM>										
		<payerCD QTAG="30002-35" CA_ID="49"></payerCD>										
		<payerAddress1 QTAG="30002-36" CA_ID="51"></payerAddress1>										
		<payerAddress2 QTAG="30002-37" CA_ID="54"></payerAddress2>										
		<payerCity QTAG="30002-38" CA_ID="55"></payerCity>										
		<payerState QTAG="30002-39" CA_ID="56"></payerState>										
		<payerPostalCD QTAG="30002-40" CA_ID="57"></payerPostalCD>										
		<bankRteNbr QTAG="30002-42" CA_ID="53"></bankRteNbr>										
		<bankAcctNbr QTAG="30002-43" CA_ID="52"></bankAcctNbr>										
		<acctMonth QTAG="30002-46" CA_ID="59">08/2021</acctMonth>										
		<acctPeriod QTAG="30002-47" CA_ID="58">202108</acctPeriod>										
		<notes QTAG="30002-49" CA_ID="62"></notes>										
		<nsfInd QTAG="30002-50" CA_ID="60"></nsfInd>										
		<batchSeqNumber QTAG="30002-51" CA_ID="36"></batchSeqNumber>										
		<paymentID QTAG="30002-52" CA_ID="23">4624100001</paymentID>										
		<today QTAG="30002-57" CA_ID="35">08/02/2021</today>										
		<nsfAmt QTAG="30002-61" CA_ID="81"></nsfAmt>										
		<accountMCID QTAG="30002-67" CA_ID="63"></accountMCID>										
		<policyCurrency QTAG="30002-69" LITERAL="United States Dollars" CA_ID="28">USD</policyCurrency>										
		<bankAccountCurrency QTAG="30002-70" LITERAL="United States Dollars" CA_ID="29">USD</bankAccountCurrency>										
		<bankRemittanceAmount QTAG="30002-73" CA_ID="26">3935.25</bankRemittanceAmount>										
		<remittanceID QTAG="30002-74" CA_ID="67"></remittanceID>										
		<disburseC_ID QTAG="30002-76" CA_ID="64"></disburseC_ID>										
		<mc_id QTAG="30002-78">369200001</mc_id>										
		<transferAmount QTAG="30002-79" CA_ID="79"></transferAmount>										
		<disburseAmt QTAG="30002-81" CA_ID="80"></disburseAmt>										
		<transferID QTAG="30002-82" CA_ID="65"></transferID>										
		<transferInd QTAG="30002-83" CA_ID="66"></transferInd>										
		<remit_ID QTAG="30002-85" CA_ID="476">2</remit_ID>										
		<offsetFromAmount QTAG="30002-89" CA_ID="68"></offsetFromAmount>										
		<offsetToAmount QTAG="30002-90" CA_ID="69"></offsetToAmount>										
		<remitOffsetPendingInd QTAG="30002-99" CA_ID="71"></remitOffsetPendingInd>										
		<billAcctCd QTAG="30002-103" CA_ID="39"></billAcctCd>										
		<absOffsetAmtTo QTAG="30002-104" CA_ID="72">0.00</absOffsetAmtTo>										
		<offsetToAmountReversed QTAG="30002-105" CA_ID="73"></offsetToAmountReversed>										
		<negOffsetToAmtRev QTAG="30002-106" CA_ID="74">0.00</negOffsetToAmtRev>										
		<offsetToAmountTotal QTAG="30002-107" CA_ID="75">0.00</offsetToAmountTotal>										
		<createdByUser QTAG="30002-117" CA_ID="84">SYSTEM_USER</createdByUser>										
		<createdDate QTAG="30002-118" CA_ID="83">08/02/2021</createdDate>										
		<entityLiteral QTAG="30002-125" CA_ID="76">Remittance</entityLiteral>										
		<payerEmailAddress QTAG="30002-126" CA_ID="50"></payerEmailAddress>										
		<acctID QTAG="30002-127" CA_ID="42"></acctID>										
		<polID QTAG="30002-129" CA_ID="88"></polID>										
		<bankAppliedAmount QTAG="30002-130" CA_ID="32">0.00</bankAppliedAmount>										
		<policyUnallocatedAmount QTAG="30002-131" CA_ID="82">3935.25</policyUnallocatedAmount>										
		<disbursedRevAmt QTAG="30002-134" CA_ID="77"></disbursedRevAmt>										
		<reversedTransferAmt QTAG="30002-138" CA_ID="78"></reversedTransferAmt>										
		<conversionInd QTAG="30002-143" LITERAL="No" CA_ID="86">N</conversionInd>										
		<CP_remitPolicyLookup QTAG="30002-165" CA_ID="465">N</CP_remitPolicyLookup>										
		<remitPolicyLookup_RC QTAG="30002-166" CA_ID="44">NONEFOUND</remitPolicyLookup_RC>										
		<directBillRemitInd QTAG="30002-169" CA_ID="24">Y</directBillRemitInd>										
		<remitSplitInd QTAG="30002-170" LITERAL="No" CA_ID="27">N</remitSplitInd>										
		<dbAllocLevel QTAG="30002-171" LITERAL="Policy" CA_ID="25">P</dbAllocLevel>										
		<allocTargetFoundInd QTAG="30002-172" LITERAL="Yes" CA_ID="37">Y</allocTargetFoundInd>										
		<payerCountry QTAG="30002-173" CA_ID="87"></payerCountry>										
		<payerAddrOverride QTAG="30002-174" CA_ID="47"></payerAddrOverride>										
		<CP_remitInvoiceLookup QTAG="30002-175" CA_ID="45">Y</CP_remitInvoiceLookup>										
		<remitInvoiceLookup_RC QTAG="30002-176" CA_ID="46"></remitInvoiceLookup_RC>										
		<CP_remitAcctLookup QTAG="30002-177" CA_ID="40">Y</CP_remitAcctLookup>										
		<remitAccountLookup_RC QTAG="30002-178" CA_ID="41"></remitAccountLookup_RC>										
		<allocTarget QTAG="30002-179" CA_ID="89">WC10002361-01</allocTarget>										
		<paymentStatus QTAG="30002-190" CA_ID="90"></paymentStatus>										
		<plannedCancelDate QTAG="30002-192" CA_ID="96"></plannedCancelDate>										
		<programCode QTAG="30002-193" CA_ID="94"></programCode>										
		<policyExpDate QTAG="30002-194" CA_ID="93"></policyExpDate>										
		<policyEffDate QTAG="30002-195" CA_ID="91"></policyEffDate>										
		<policyEquityDate QTAG="30002-196" CA_ID="92"></policyEquityDate>										
	</remit>											
</remitBatch>]]]]
>><![CDATA[]]
></Data>												
   </ns4:PWInvokeBillingActionResponse>												
   </SOAP-ENV:Body>												
</SOAP-ENV:Envelope>
Return Codes:
SUCCESS
FAILURE
Payments Sent from IC to BP (Invoice Header data elements used from BIF)
Database Allocation Level is mapped from current 
Custom5 (FileSpecID 42)
If Custom5(42) = 'A'
populate billing account code tag with Custom4(41)
If Custom5(42) = 'C'
populate billing account code tag with Custom4(41). If Custom4(41) is blank, pass Custom2(39).
If Custom5(42) = 'N'
populate agreement number tag with AccountNumber since that will be the Agreement Number in this scenario
If Custom5(42) = 'P'
populate policy number tag with Custom3(40)
If Custom5(42) = 'I'
populate invoiceNbr tag tag with Custom4(41)
 and remove policy number tag
If Custom5(42) = 'S'
populate invoiceNbr tag tag with Custom4(41)
 and remove policy number tag
During Customer Creation from BillingPro
If Account Bill we'll use the MCID as the Account Number sent to IC
If Single Policy Bill we'll use the Agreement Number as the Account Number sent to IC
During Invoice Upload from BillingPro
If Account Bill the below data is sent to IC to create the invoice file
Account Number = MCID
Custom2(39) = MCID
Custom3(40) = NULL (no value passed)
Custom4(41) = Billing Account Code (this is needed in case the account code is not the MCID)
Custom5(42) = 'A' for Account Billing allocation type
If Single Policy Bill the below data is sent to IC to create the invoice file
Account Number = Agreement Number
Custom2(39) = MCID
Custom3(40) = Policy Number
Custom4(41) = NULL (no value passed)
Custom5(42) = Either 'P' for single policy allocation / 'N' for agreement level allocation
Display Account(373) = Policy Number (used for display in IC)
This Billing Pro endpoint would be used only if the IC AccountNumber (or IC InvoiceNumber as these would be the same) 
does not
 start with “Q”.
Data Pump: ACH Reject
InvokeBillingActionRequest
NSF/Reversal/Chargebacks from Invoice Cloud to BillingPro
xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">																						
<soapenv:Header>																						
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">																					
		<wsse:UsernameToken>																				
			<wsse:Username>																			
				<xsl:value-of select="xxx"/>	Values to be provided separately 																	
			</wsse:Username>																			
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">																			
				<xsl:value-of select="xxx"/>	Values to be provided separately 																	
			</wsse:Password>																			
		</wsse:UsernameToken>																				
	</wsse:Security>																					
</soapenv:Header>																						
<soapenv:Body>																						
	<bil:PWInvokeBillingActionRequest>																					
		<TransRef>1</TransRef>																				
		<ReqDateTime></ReqDateTime>																				
		<ActionCode>createRemitReversal</ActionCode>																				
		<PWAuthentication>																				
			<UserLoginName>																			
				<xsl:value-of select="xxx"/>	Values to be provided separately 																	
			</UserLoginName>																			
		</PWAuthentication>																				
		<Data><![CDATA[																				
			<remitBatch MC_ID="NNNNNNNN" CT_ID="1" VERSION_NO="1" ExtAction="U">	MC_ID comes from the response from BP after payments are sent in from IC or from the remitBatchSearch request											
			<nsfInd>Y</nsfInd>							If the reversal is an NSF set to Y, otherwise N and the update is assumed to be just an unapply of the payment												
				<remit ID="x" ExtAction="U" MarkOccurrence="Y">			ID comes from the response from BP after payments are sent in from IC or from the remitBatchSearch request															
					<paymentID>12345</paymentID>																	
				</remit>																		
			</remitBatch>																			
			]]
>																			
		</Data>																				
	</bil:PWInvokeBillingActionRequest>																					
</soapenv:Body>																						
</soapenv:Envelope>																						

Action Code - createRemitReversal
MC_ID - returned from the Payment search endpoint below.
Remit ID - returned from the payment search below.
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">															
   <SOAP-ENV:Header/>															
   <SOAP-ENV:Body>															
      <ns4:PWInvokeBillingActionResponse xmlns:ns4="http://adaptik.com/ws/xml/billing" xmlns:ns3="http://adaptik.com/ws/xml">															
         <TransRef>1</TransRef>															
         <ActionCode>createRemitReversal</ActionCode>															
         <TransDateTime>2021-09-14T14:16:29.329-04:00</TransDateTime>															
         <TransResult>															
            <ReturnCode>SUCCESS</ReturnCode>															
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>															
            <ReturnMessage/>															
         </TransResult>															
         <Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8"?><remitBatch CT_ID="1" ExtAction="U" GT_ID="1" MC_ID="613000001" VERSION_NO="1">															
	<nsfInd>N</nsfInd>														
	<remit>														
		<paymentID>21321</paymentID>													
	</remit>														
</remitBatch>]]]]
>><![CDATA[]]
></Data>															
      </ns4:PWInvokeBillingActionResponse>															
   </SOAP-ENV:Body>															
</SOAP-ENV:Envelope>															

ReturnCode:
SUCCESS
FAILURE
Sapiens to IC mapping
nsfInd
 = Y for ACH reject, else N
paymentID 
= IC PaymentGUID
Do not include ACH Reject C series codes
Payment Search
*Needed before posting an NSF reject
Remittance Search
IC will use this API to retrieve the Sapiens ‘Remit ID' & 'RemitBatch MC_ID' associated with a payment - there are required fields in the API to post an ACH Reject
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">														
<soapenv:Header>														
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">													
		<wsse:UsernameToken>												
			<wsse:Username>											
				<xsl:value-of select="xxx"/>		Values to be provided separately 								
			</wsse:Username>											
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">											
				<xsl:value-of select="xxx"/>		Values to be provided separately 								
			</wsse:Password>											
		</wsse:UsernameToken>												
	</wsse:Security>													
</soapenv:Header>														
<soapenv:Body>														
	<bil:PWInvokeBillingActionRequest>													
		<TransRef>1</TransRef>												
		<ReqDateTime></ReqDateTime>												
		<ActionCode>PWSTRUCTUREDSEARCH</ActionCode>												
		<InterfaceCode>remitBatchSearch</InterfaceCode>												
		<PWAuthentication>												
			<UserLoginName>											
				<xsl:value-of select="xxx"/>		Values to be provided separately 								
			</UserLoginName>											
		</PWAuthentication>												
		<Data><![CDATA[												
			<SearchRequest>											
				<SearchID>BM_REMIT_SRCH1</SearchID>										
				<searchCriteria>										
					<paymentID>12345</paymentID>			This is the IC payment GUID						
				</searchCriteria>										
			</SearchRequest>											
			]]
>											
		</Data>												
	</bil:PWInvokeBillingActionRequest>													
</soapenv:Body>														
</soapenv:Envelope>				
paymentID 
= IC PaymentGUID
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">														
   <SOAP-ENV:Header/>														
   <SOAP-ENV:Body>														
      <ns4:PWInvokeBillingActionResponse xmlns:ns4="http://adaptik.com/ws/xml/billing" xmlns:ns3="http://adaptik.com/ws/xml">														
         <TransRef>7b9923a0-c102-11da-a94d-0800200c9a66</TransRef>														
         <ActionCode>PWSTRUCTUREDSEARCH</ActionCode>														
         <InterfaceCode>remitBatchSearch</InterfaceCode>														
         <TransDateTime>2021-11-17T17:36:40.373-05:00</TransDateTime>														
         <TransResult>														
            <ReturnCode>SUCCESS</ReturnCode>														
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>														
            <ReturnMessage>Retrieved results are being returned.</ReturnMessage>														
            <RejectMessage/>														
         </TransResult>														
         <Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8" standalone="yes"?>														
<SearchResults>														
    <SearchID>BM_REMIT_SRCH1</SearchID>														
    <SearchResult>														
        <payerNM>Alex Bear</payerNM>														
        <remitAmt>1,905</remitAmt>														
        <remainingAmt>0</remainingAmt>														
        <status>Closed</status>														
        <depositDate>11/16/2021</depositDate>														
        <receiptDate>11/16/2021</receiptDate>														
        <acctPeriod>202111</acctPeriod>														
        <payType></payType>														
        <transferInd>N</transferInd>														
        <nsfInd>N</nsfInd>														
        <remittanceCID>2</remittanceCID>				This is the remit ID to be used for payment reversal										
        <MCID>833100001</MCID>				This is the remitBatch MC_ID to be used for payment reversal										
        <paymentID>800700001-2021-</paymentID>														
    </SearchResult>														
</SearchResults>														
]]]]
>><![CDATA[]]
></Data>														
      </ns4:PWInvokeBillingActionResponse>														
   </SOAP-ENV:Body>														
</SOAP-ENV:Envelope>														

Partner Spec Doc
 
IC gathers the 
Remit ID
 & 
RemitBatch MC_ID
 from the Sapiens response to use in the Data Pump Request for NSF updates.
Data Pump: Paperless/AutoPay Enrollment
Note: This is for enrollments completed once the policy is created (posted to BillingPro). For enrollments that occur during a down payment, Sapiens uses the IC web services to pull the data. See web services below.
Update Settings
Set Paperless or AutoPay
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">											
<soapenv:Header>											
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">										
		<wsse:UsernameToken>									
			<wsse:Username>								
				<xsl:value-of select="xxx"/>			**Values to be provided separately 				
			</wsse:Username>								
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">								
				<xsl:value-of select="xxx"/>			**Values to be provided separately 				
			</wsse:Password>								
		</wsse:UsernameToken>									
	</wsse:Security>										
</soapenv:Header>											
<soapenv:Body>											
Account Billing Request:
<bil:PWInvokeBillingActionRequest>												
	<TransRef>1</TransRef>											
	<ReqDateTime></ReqDateTime>											
	<ActionCode>updateICSettings</ActionCode>											
	<PWAuthentication>											
		<UserLoginName>										
			<xsl:value-of select="xxx"/>			**Values to be provided separately 						
		</UserLoginName>										
	</PWAuthentication>											
	<Data><![CDATA[											
		<account MC_ID="522000001" CT_ID="1" VERSION_NO="1">				**MC_ID is mapped from Custom6 and CT and Version are always 1 in billing						
			<productGroup>ACCT</productGroup>									
			<autoPayInd>Y</autoPayInd>									
			<paperlessBillingInd>Y</paperlessBillingInd>									
		</account>										
		]]
>										
	</Data>											
</bil:PWInvokeBillingActionRequest>												

Single Policy Billing Request:
xml
<bil:PWInvokeBillingActionRequest>												
	<TransRef>1</TransRef>											
	<ReqDateTime></ReqDateTime>											
	<ActionCode>updateICSettings</ActionCode>											
	<PWAuthentication>											
		<UserLoginName>										
			<xsl:value-of select="xxx"/>			Values to be provided separately 						
		</UserLoginName>										
	</PWAuthentication>											
	<Data><![CDATA[											
		<account MC_ID="522000001" CT_ID="1" VERSION_NO="1">				MC_ID is mapped from Custom6 and CT and Version are always 1 in billing						
			<productGroup>ACCT</productGroup>									
			<policy  ExtAction="U" MarkOccurrence="Y">									
				<policyNbr>HOM123445_01</policyNbr>				policyNbr is mapped from CustomField2				
				<autoPayInd>Y</autoPayInd>								
				<paperlessBillingInd>Y</paperlessBillingInd>								
			</policy>									
		</account>										
		]]
>										
	</Data>											
</bil:PWInvokeBillingActionRequest>												
</soapenv:Body>												
</soapenv:Envelope>
xml
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">								
   <SOAP-ENV:Header/>								
   <SOAP-ENV:Body>								
<ns4:PWInvokeBillingActionResponse xmlns:ns4="http://adaptik.com/ws/xml/billing" xmlns:ns3="http://adaptik.com/ws/xml">								
         <TransRef>test</TransRef>								
         <ActionCode>updateICSettings</ActionCode>								
         <TransDateTime>2021-08-02T11:47:39.473-04:00</TransDateTime>								
         <TransResult>								
            <ReturnCode>SUCCESS</ReturnCode>								
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>								
            <ReturnMessage>SUCCESS</ReturnMessage>								
         </TransResult>								
<Data><![CDATA[<?xml version="1.0" encoding="UTF-8"?> 								
	<account MC_ID="522000001" CT_ID="1" VERSION_NO="1">							
		<productGroup>ACCT</productGroup>						
		<autoPayInd>Y</autoPayInd>						
		<paperlessBillingInd>Y</paperlessBillingInd>						
	</account>							
</account>]]</Data>								
   </ns4:PWInvokeBillingActionResponse>								
   </SOAP-ENV:Body>								
</SOAP-ENV:Envelope>								

Return Codes
SUCCESS
FAILURE
note
 If AutoPay or Paperless doesn’t need to be updated 
OMIT 
the tag for that value which has no change.


 If AutoPay or Paperless doesn’t need to be updated 
OMIT 
the tag for that value which has no change.


Account MC_ID = IC Custom6
PDF Linking
Get Invoice Service
Authentication JNDIs: 
User / Password
HTTP Method: 
Get
Request Header: 
Content-Type: application/xml
HTTPURLParams
: /s/scsGetBase64Document/{path}
Example: 
/s/scsGetBase64Document/DocumentsPro/DevEnv/Policies/422130001/MiscellaneousDocuments/document.pdf
xml
<a:PWHTTPRequest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:a="http://adaptik.com/ws/xml" xmlns:jndiUtils="com.adaptik.util.JNDIUtils" xsi:schemaLocation="http://adaptik.com/ws/xml">
	<HTTPHeaders>
		<HTTPHeader>
			<HeaderName>Content-Type</HeaderName>
			<Value>application/xml</Value>
		</HTTPHeader>
	</HTTPHeaders>
	<HTTPURLParams> /s/scsGetBase64Document/DocumentsPro/DevEnv/Policies/422130001/MiscellaneousDocuments/document.pdf /</HTTPURLParams>

Sample Response:
<file>
 will contain the base64 encoded PDF.
xml
<scsResponse>
  <returnCode>SUCCESS</returnCode>
  <returnMessage>Success</returnMessage>
<documents>
    <document>
      <value key="size" namespace="int">4,099,685</value>
      <value key="type" namespace="int">scs:document</value>
      <value key="linked" namespace="int">no</value>
      <value key="filepath" namespace="int">/DocumentsPro/PW10/Policies/606180001/Star Wars Characters/Light
        Side/Image/babygroot.gif</value>
      <value key="versionLabel" namespace="int">0.1</value>
      <value key="displayPath" namespace="int">/Company Home/DocumentsPro/PW10/Policies/606180001/Star Wars
        Characters/Light Side/Image</value>
      <value key="id" namespace="int">0851a045-5572-450f-aa55-2bacd6390f28</value>
      <value key="downloadUrl" namespace="int">/d/a/workspace/SpacesStore/0851a045-5572-450f-aa55-2bacd6390f28/babygroot.gif</value>
      <value key="nodeRef" namespace="int">Node Type: {http://www.sapiens.com/model/alfresco/document/1.0}document
        Node Ref: workspace://SpacesStore/0851a045-5572-450f-aa55-2bacd6390f28</value>
      <value key="ticket" namespace="int">TICKET_b2822e6831f266280c234c389dcc9acd39ddb664</value>
      <value key="effectiveDate" namespace="scs">03/01/2019</value>
      <value key="created" namespace="cm">Wed Sep 04 2019 15:31:44 GMT-0400 (EDT)</value>
      <value key="version" namespace="scs">1</value>
      <value key="description" namespace="cm">Luke</value>
      <value key="creator" namespace="cm">admin</value>
      <value key="node-uuid" namespace="sys">0851a045-5572-450f-aa55-2bacd6390f28</value>
      <value key="name" namespace="cm">babygroot.gif</value>
      <value key="content" namespace="cm">org.alfresco.repo.jscript.ScriptNode$ScriptContentData@123ae882</value>
      <value key="store-identifier" namespace="sys">SpacesStore</value>
      <value key="versionLabel" namespace="cm">0.1</value>
      <value key="documentType" namespace="scs">Image</value>
      <value key="autoVersion" namespace="cm">true</value>
      <value key="initialVersion" namespace="cm">true</value>
      <value key="versionType" namespace="cm">MINOR</value>
      <value key="subcategory" namespace="scs">Light Side</value>
      <value key="autoVersionOnUpdateProps" namespace="cm">true</value>
      <value key="id" namespace="scs">606180001</value>
      <value key="agentCode" namespace="scs">mattc</value>
      <value key="transcationId" namespace="scs">1</value>
      <value key="store-protocol" namespace="sys">workspace</value>
      <value key="node-dbid" namespace="sys">1263</value>
      <value key="locale" namespace="sys">en_US</value>
      <value key="category" namespace="scs">Star Wars Characters</value>
      <value key="modifier" namespace="cm">admin</value>
      <value key="expirationDate" namespace="scs">09/01/2019</value>
      <value key="modified" namespace="cm">Wed Sep 04 2019 15:31:44 GMT-0400 (EDT)</value>
      <filename>Doc123.docx</filename>
      <file>==base64encodedfileishere</file>
    </document>
  </documents>
</scsResponse>

Sapiens to IC Mapping:
HTTPURLParams 
= Custom1
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is to transfer bill/invoice data to IC from the biller
File Extension: BIF
File Naming Convention: 
File Delimiter: pipe
Specification: Invoice Cloud SOAP Upload Invoice
Sample File/SOAP
xml
<?xml version="1.0" encoding="UTF-8"?>							
<a:PWHTTPRequest xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:clo="https://www.invoicecloud.com/portal/webservices/CloudManagement/" xmlns:a="http://adaptik.com/ws/xml"							
                 xsi:schemaLocation="http://adaptik.com/ws/xml">							
<HTTPHeaders>							
      <HTTPHeader>							
         <HeaderName>Authorization</HeaderName>							
         <Value>Basic S3o1T01lWXl0d1dWRFJ6YnFHMW4rNWtZRU1jOTNSN0VQSUlnRmNJeUV1SkljMEVzblZNQlNaSHQ5YUowdGxzSlFONmMvUmpCclRRSDNGbU1QRStGcjdRYy9qR1k5cUc5eWU1OVF3bm90Zm89Og==</Value>							
      </HTTPHeader>							
      <HTTPHeader>							
         <HeaderName>Content-Type</HeaderName>							
         <Value>application/x-www-form-urlencoded</Value>							
      </HTTPHeader>							
   </HTTPHeaders>							
   <HTTPMessageBody>BillerGUID=69591e78-8113-4d4f-83bd-b191d9afc71f&amp;WebServiceKey=b5ce550d-610d-474d-b6df-caf7dc443e08&amp;CustomerRecord=58~CR|59~102500001|60~Jim Smalls|61~1601 Penn St|62~|63~Penn|64~PA|65~43210|67~|373~I-100800001-1&amp;InvoiceHeaderRecord=7~IH|8~N|9~B3D8E0C6-0A66-4566-BD1F-480C87121EA6|10~68417|11~10/21/2021|12~09/20/2021|13~494.90|20~1|39~AG0001|40~I-100800001-1|42~P|93~494.90|194~1|252~164&amp;InvoiceDetailRecords=70~ID|100~I-100800001-1&amp;</HTTPMessageBody>							
</a:PWHTTPRequest>							
SFTP File Path: N/A - IC web services
File Transfer Frequency: Daily
Field Mapping
Note: Some fields below may be mapped slightly different based on the bill being a ‘Single Bill’ or ‘Account Bill’ - see details below.  Account Billing is a payer which pays their single or multiple policies through one invoice. A Single Bill payment term would issue an invoice for each installment to be paid for each policy.
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Description
Record Type
1
RowType
Y
TRUE
N/A - Always ‘FH’
N/A
File Header
2
BillerGuid
Y
TRUE
N/A - IC generated value
N/A
File Header
4
FileCreationDate
Y
TRUE
Current date
N/A
File Header
5
InvoiceCount
Y
TRUE
Invoice count in file
N/A
File Header
6
TotalInvoiceAmount
Y
TRUE
Invoice total count in file
N/A
File Header
7
RowType
Y
TRUE
N/A - Always ‘IH’
N/A
Invoice Header
8
RecordType
Y
TRUE
Always ‘N’
N/A
Invoice Header
9
InvoiceFormatGuid
Y
TRUE
N/A - IC generated value
N/A
Invoice Header
10
InvoiceNumber
Y
TRUE
invoiceNbr
Invoice Number
Invoice Header
11
InvoiceDate
Y
TRUE
invoiceDt
Invoice Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
invoiceDueDt
Invoice Due Date
Invoice Header
13
TotalAmountDue
Y
TRUE
currentBal
Current Balance
Invoice Header
20
AllowPartialPayments
Y
FALSE
Always '1' (true)
N/A
Invoice Header
38
Custom1
Y
FALSE
HTTPURLParams
Code for PDF Linking
Invoice Header
39
Custom2
Y
FALSE
4f427175-c041-46ea-8b1d-705e1e1c52f5
f18408d2-8e4c-4048-8d91-ed6cd1e32d1a
DECIDED
If single bill = Policy agreementNo
659eb644-08b8-40c3-aa20-b789f0b78885
DECIDED
If account bill = Account MC_ID
If single bill = Policy agreementNo
If account bill = Account MC_ID
2458bc5d-1080-45a6-9895-44f28e387e45
6e59a304-7b48-447c-b709-60fd75a46c36
DECIDED
If single bill = Policy agreementNo
c108f312-387f-4423-a489-2910c5b67245
DECIDED
If account bill = Account MC_ID
If single bill = Policy agreementNo
If account bill = Account MC_ID
Invoice Header
40
Custom3
Y
FALSE
policyNbr
Policy Number
Invoice Header
41
Custom4
Y
FALSE
billingAcctCode OR Certificate Number (Sapiens determines which to pass IC and IC passes back via data pump)
Billing Account Code
Invoice Header
42
Custom5
Y
FALSE
Allocation Level
P = Allocating by Policy Number (Single Bill)
A = Allocating by Account Number (Account Bill)
N = Allocating by Agreement Number 
C = Allocating by Certificate Number (sometimes referred to as Invoice Number by the biller)
I
 = Allocation by Invoice Number
Differentiates how the payment is being allocated
Invoice Header
43
Custom6
Y
FALSE
Account MD_ID
Account MD_ID
Invoice Header
44
Custom7
Y
FALSE
InterfaceCode
InterfaceCode value used in RTDR
Ex: icAccountBalanceUpd, icPolicyBalanceUpd or icInvoiceBalanceUpd
Invoice Header
45
Custom8
Y
FALSE
Tag
Tag value used in RTDR
Ex: acctName, policyNbr or invoiceNbr
Invoice Header
46
Custom9
Y
FALSE
Tag Value
Value to use within the Custom8 tag in RTDR
Ex: 123456
Invoice Header
47
Custom10
Y
FALSE
SearchID
SearchID value used in RTDR
Ex: BM_INVOICE_SRCH or BM_INVOICE_SRCH1
Invoice Header
93
BalanceDue
Y
FALSE
currentBal
Current Balance
Invoice Header
194
BalanceForward
Y
FALSE
Always '1' (true)
N/A
Invoice Header
252
InvoiceTypeID
Y
TRUE
Always ‘164’
N/A
Invoice Header
58
RowType
Y
TRUE
N/A - Always ‘CR’
N/A
Customer Record
59
AccountNumber
Y
TRUE
2a5f31f3-29f9-4308-b247-8d136a36891d
82518640-23a7-409d-9546-fdb727d885a6
DECIDED
If single bill = Policy agreementNo
92fb0bb2-3bb3-432d-a7d6-a8cbe380b916
DECIDED
If account bill = Account MC_ID
If single bill = Policy agreementNo
If account bill = Account MC_ID
2a5f31f3-29f9-4308-b247-8d136a36891d
82518640-23a7-409d-9546-fdb727d885a6
DECIDED
If single bill = Policy agreementNo
92fb0bb2-3bb3-432d-a7d6-a8cbe380b916
DECIDED
If account bill = Account MC_ID
If single bill = Policy agreementNo
If account bill = Account MC_ID
Customer Record
60
CustomerName
Y
TRUE
Value for single bill AND account bill = billToName
Bill to Name
Customer Record
61
Address1
Y
FALSE
4f9962a9-7e22-4aa5-95da-1b3247d9884b
3776ef48-6d90-4f7b-bfa4-1b34ab271dcf
DECIDED
If single bill = billToAddr1
367a0883-da2e-4675-ac21-daaa30908523
DECIDED
If account bill = billToAddress1
If single bill = billToAddr1
If account bill = billToAddress1
Bill to Address Line 1
Customer Record
62
Address2
Y
FALSE
82c2dd28-ffb0-4ad8-85a0-e6bd735f7dc9
3752b700-3ece-42c0-a5d7-f1fd5e1ef66b
DECIDED
If single bill = billToAddr2
e31e8194-d8a6-40dc-bc43-663018440696
DECIDED
If account bill = billToAddress2
If single bill = billToAddr2
If account bill = billToAddress2
Bill to Address Line 2
Customer Record
63
City
Y
FALSE
Value for single bill AND account bill = billToCity
Bill to City
Customer Record
64
State
Y
FALSE
Value for single bill AND account bill = billToState
Bill to State
Customer Record
65
Zip
Y
FALSE
Value for single bill AND account bill = billToPostalCd
Bill to Postal Cd
Customer Record
67
EmailAddress
Y
FALSE
Value for single bill AND account bill = billToEmail1
Bill to Email
Customer Record
373
DisplayAccountNumber
Y
FALSE
dfe256d8-488e-4d75-87a1-f0db9cdffdc3
a2f40f2e-a51e-4e64-ad76-e1afebc6b321
DECIDED
If single bill = policyNbr
edeeccd8-89b5-4ed1-bacf-fdd4a738ed1a
DECIDED
If account bill = N/A
If single bill = policyNbr
If account bill = N/A
8e436dc9-08c7-4c72-9952-47ed1756ac77
9c5eaaa7-7851-471d-9dec-e083e146c486
DECIDED
If single bill = Policy agreementNo
d143d672-f35a-4129-9cdd-08a1ab803101
DECIDED
If account bill = Account MC_ID
If single bill = Policy agreementNo
If account bill = Account MC_ID
Customer Record
70
RowType
Y
TRUE
N/A - Always ‘ID'
Invoice Detail
Advanced Settings
Setting ID
Description
Value
Is value unique per biller? (Y/N)
8
RTDR EndPoint/WebService URL
Y
9
RTDR Username if Applicable
Y
10
RTDR Key or Password if Applicable
Y
11
DataPump Payments EndPoint/WebService URL
Y
12
DataPump Payments EndPoint/WebService Username
Y
13
DataPump Payments EndPoint/WebService Password
Y
20
Remote PDF EndPoint/WebService URL
Y
21
Remote PDF EndPoint/WebService Username
Y
22
Remote PDF EndPoint/WebService Password
Y
89
Secondary RTDR Username if Applicable
Y
131
JSON Configuration	
{ "SapiensCompAndPowerSuite": { "RTDRInvoiceFilter": "InvoiceNumber not like '%-%'" } }
N - Circumstancial (review Int Mod before using)
131
JSON Configuration
{
    "SapiensCompAndPowerSuite": {
        "RTDRConfig": {
            "OpenBilling": false
        }
    }
}
Y - Only use if Biller is NOT an Open Billing Integration
INT-9667
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A,
AllowPartialPayments
On biller questionnaire, configured by BIF customization
AutoPayCollectionDate
On biller questionnaire, configured by BIF customization
BalanceForward
In BIF
CreditCardServiceFee
On biller questionnaire, configured by BIF customization
FirstNotifyRequestedDate
On biller questionnaire, configured by BIF customization
InvoiceDate
In BIF
InvoiceDueDate
In BIF
InvoiceFormatGuid
configured by BIF customization
InvoiceTypeID
In BIF
LateFeeDate
In BIF
LocationReference
N/A
MinimumAmountDue
N/A
PaymentExpirationDate
On biller questionnaire, configured by BIF customization
PaymentExpirationMessage
On biller questionnaire, configured by BIF customization
PromptPayExpirationDate
On biller questionnaire, configured by BIF customization
RegistrationValue
N/A
SecondNotifyRequestedDate
On biller questionnaire, configured by BIF customization
ThirdNotifyRequestedDate
On biller questionnaire, configured by BIF customization
User Interaction and Design
Data Flow - Invoice
Summary: In BillingPro, when an Invoice is generated on the Bill Process Date, a subsequent call will send the Invoice File to Invoice Cloud. We are processing using a “Balance Forward” approach, so the Invoice File will replace the existing file in IC.
Data Flow - Adjustments - Real Time Data Refresh
Summary: Each time a customer accesses their IC portal, a call from Invoice Cloud to BillingPro will be made to get the current account and/or policy details. 
Data Flow - Payment
Summary: A user makes a payment in IC and upon a successful response, IC calls a Sapiens service (real-time) to create the Remittance (receipt) which will allocate and update the balances in BillingPro.
Data Flow - Void
Summary: If a payment needs to be voided, a user would click a button within the BillingPro application which would call a web service to void the payment in Invoice Cloud. 
Success for Void – BillingPro gets the response of Success then re-balances the Policy by reversing allocations that were created. 
Failure for Void – BillingPro gets the response of Failure
Data Flow - ACH Reject
Summary: If a payment needs to be refunded, a user would click a button within the BillingPro application which would call a web service to refund the payment in Invoice Cloud. 
Success for Refund – BillingPro gets the response of Success and re-balances the Policy by reversing allocations that were created
Failure for Refund – BillingPro gets the response of Failure and Disbursement request created in BillingPro sits with a Failed Pending Status to prevent it from being disbursed
Data Flow - Change Log / Settings Changes
Summary: If a user opts to change their AutoPay and Paperless Settings, they can do so from within their Invoice Cloud Account.  If the user opts to make one of these changes, after the selection is submitted in Invoice Cloud, a web service call to BillingPro will be completed to update the Account and have the change be reflected in that application.
Data Flow - Bill Presentment
Agent Experience - CloudPay V2
In Sapiens 
PolicyPro
 Billing Information screen, the user will click the ‘Make Down Payment’ button to initiate the CloudPayV2 solution for making a down payment.
Sapiens Policy Pro Screen - select ‘Make Down Payment’
Screen opens IC CloudPay payment route
Payer Experience
Payers will use the Payer portal or Public One Time Payment.
One-Time Payments: In Sapiens PolicyPro and BillingPro, a user can make a one-time payment by clicking a link to navigate to the IC Virtual Site. From the screen the user will be able to submit a payment for processing. Upon successful payment, IC will call a configured Action to capture the payment information in Billing and create the corresponding Remittance Batch. If the payment originates in PolicyPro, the user can be navigated back to capture the payment disposition to provide a receipt or message for the user on the page.  The user can then continue working in PolicyPro.  If the payment originates in Billing, the user will be navigate back to the Account Dashboard to see the updated Receivables.
Recurring Payments: Sapiens BillingPro will send an Invoice File on the schedule defined by the payment plan of the policy. If the Policy has the AutoPay setting set to ‘Y’, in Invoice Cloud, the amount due is collected on the Due Date of the policy. Upon successful payment, Invoice Cloud will send the Remittance information to Sapiens BillingPro via web service call. A batch file is not used for recurring payments. This allows each payment to be tracked fully through being posted to the account. If a payment fails, notifications can be sent via email from Invoice Cloud to the customer.
Biller Experience
Outside the Downpayment / One-time payment the biller will use the Biller Portal for items, not details above.
User Stories
Use Case
Product/System
Process Detail
Issuance with Down Payment
CloudPayV2
Sapiens PolicyPro user navigated to IC CloudPay, and PolicyPro receives the IC Payment Transaction info via web service call (InvoicePaymentHistory - not data pump), and passes it to BillingPro during issuance. BillingPro adds the Remittance to update the Receivable balances. During the postAccount Action, an Invoice File is sent to IC to establish the Invoice Cloud User Account.
Issuance without Down Payment
Invoice file/EBPP Integration
The PolicyPro transaction is issued and during the postAccount Action, an Invoice File is sent to IC to establish the IC User Account.
CustomerConveyance
Invoice Cloud Conveyance API
EBPP-3365
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
To make the down payment visible to the policy holder, Sapiens will be using the Conveyance process to ‘convey’ the ‘account’ that the down payment was made on TO the established policy number/‘account’
Example: 
Policy down payment made on policy/account number Q12345678 (in PolicyPro) - policy is bound after down payment is made
Once the policy is bound, the policy/account number (in BillingPro) is issued - 76543210
Sapiens uses Conveyance to ‘rename’ policy/account number Q12345678 as 76543210
Invoice Cloud Web Services
API Name
API Use/Purpose
Invoice Cloud (SOAP) Upload Invoice
Upload invoice file
Customer Renewal (REST)
Allows Sapiens to renew the policies and link when the account goes from ‘Quote’ to ‘Policy’
InvoicePaymentHistory (SOAP)
Down Payments - After a down payment is made via CloudPayV2, Sapiens will call the InvoicePaymentHistory web service to post the payment in Sapiens
ViewCustomerRecord (SOAP)
Retrieve values for AutoPay/Paperless enrollments during down payment in PolicyPro
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-4903
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
11/112022
IC only supported tags for ‘Account’ and ‘Policy’ billing, based on Custom3.
Logic as follows:
c5f3be32-c29e-4c8b-9f1c-ddb313113be6
4466600e-a61d-407a-bd71-e05f73d18165
DECIDED
If Custom3 = NULL, use value in Custom2 in RTDR with the <acctName> tag
4e49ceb6-164d-4fb9-b238-d310a92c81e4
DECIDED
If Custom3 != NULL, use value in Custom3 in RTDR with the <policyNbr> tag
If Custom3 = NULL, use value in Custom2 in RTDR with the <acctName> tag
If Custom3 != NULL, use value in Custom3 in RTDR with the <policyNbr> tag
Change RTDR to remove the logic based on ‘Custom3’ so RTDR can be supported for a third variable (invoice billing).
Sapiens will use 3 IC custom fields to pass the values they want sent in RTDR so that as they change, IC doesn't have to keep coding logic to support
FileSpecID 44- Custom7 will contain the RTDR InterfaceCode
examples: icAccountBalanceUpd, icPolicyBalanceUpd or icInvoiceBalanceUpd
FileSpecID 45 - Custom8 will contain the RTDR Tag
examples: acctName, policyNbr or invoiceNbr
FileSpecID 46 - Custom9 will contain the value to be passed with the RTDR Tag (Alphanumeric - this will be the actual Value to use in RTDR call)
example: 123456
Sapiens releases different ‘allocation’ or billing levels and the balance that should display in IC varies based on the allocation level. Since each biller can choose which level for billing, we need to enhance the integration to be flexible to the levels Sapiens adds.
ITG-1597
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
The tag for posting Custom4 was <accountNbr> when posting payments.
Add logic to use an <invoiceNbr> tag to pass Custom4 when Custom5=S.
For invoices of a certain type (open item invoicing), pass a specific value (Custom4) 
with the <invoiceNbr> tag 
when posting payments.
INT-4811
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
9/30/2022
The tag for posting Custom4 was <accountNbr> when posting payments.
Add logic to use an <invoiceNbr> tag to pass Custom4 when Custom5=I.
For invoices of a certain type (open item invoicing), pass a specific value (Custom4) 
with the <invoiceNbr> tag 
when posting payments.
INT-4810
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
9/20/2022
There was no logic for when Custom5=I to pull a specific value when posting payments.
Add logic to send a specific value with payments with Custom5=I.
For invoices of a certain type (open item invoicing), pass a specific value (Custom4) when posting payments.
INT-3881
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
7/12/2022
No ‘payment type’ information passed when posting payments.
Add ‘paymentType’ tag when posting payments (CHECK/CC/CASH/ACH)
Gives biller visibility into the payment type used for the payment (CHECK/CC/CASH/ACH).
INT-3540
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/19/2022
Run RTDR on all invoices
Only run RTDR on invoices that do not start with Q
Invoices starting with Q are for quotes and do not have the required values to run RTDR. These invoices are created via CloudPayV2 and do not need RTDR. If we run RTDR on invoices that start with Q, the balance will be updated incorrectly.
INT-3509
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/19/2022
Web service did not include ‘creditcardbrand’ or ‘lastdigitsofpayment’
Include ‘creditcardbrand’ and ‘lastdigitsofpayment’ (last 4 digits) in payment posting
All payments will have this information posted
INT-3609
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/19/2022
Web service did not account for logic for new 'C' allocation types
Include logic for 'C' allocation types to post payments
Biller (PPM) uses ‘Certificate Number’ to post payments (not the policy or account number) so this additional allocation type has been added for payment posting
INT-3697
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
5/11/2022
Pass Custom2 with paperless and autopay flags (Update Settings web service)
Pass Custom6 with paperless and autopay flags (Update Settings web service)
Sapiens requesting different value
INT-6924
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
8/25/2020
Invoices were being created incorrectly. (Format xxxx-xxx) Due to this, RTDR is not accurately capturing the balances as it did not exist on Sapiens. This caused email notifications to not be sent. 
Not running RTDR on incorrectly created invoices by adding an Advanced Setting for PPM specifically. 
131- JSON Configuration: 	
{ "SapiensCompAndPowerSuite": { "RTDRInvoiceFilter": "InvoiceNumber not like '%-%'" } }
To remedy the issue, Sapiens will discontinue sending invoice numbers that do not match the integration and for previous invoices uploaded, logic has been put in place to ignore RTDR for these invoices. 
Logic in question: RTDR will not run if Invoicenumber contains dash 
or
 
custom8 field = ‘acctName'
INT-9667
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
5/16/24
RTDR updates balances for all invoices even if the Biller is using Balance Forward
RTDR only updates the most recent invoice if Balance Forward is being used 
Balance Forward billers should not use RTDR for closed off/balancef forwarded invoices
Unused API for Down Payments - Sapiens is using the InvoicePaymentHistory instead of data pump for Down Payments
IC Use
Partner API Name
Description
Request
Response
Specifications
Data Pump: DownPayment
Issuance With Down Payment Call To PolicyPro
Issuance With Down Payment Call From Invoice Cloud To PolicyPro
xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:bil="http://adaptik.com/ws/xml/billing">															
<soapenv:Header>															
	<wsse:Security soapenv:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">														
		<wsse:UsernameToken>													
			<wsse:Username>												
				<xsl:value-of select="xxx"/>			**Values to be provided separately 								
			</wsse:Username>												
			<wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText">												
				<xsl:value-of select="xxx"/>			**Values to be provided separately 								
			</wsse:Password>												
		</wsse:UsernameToken>													
	</wsse:Security>														
</soapenv:Header>															
<soapenv:Body>															
	<sch:PWInvokePolicyActionRequest xmlns:sch="http://adaptik.com/ws/xml">														
		<TransRef>1</TransRef>													
		<ReqDateTime></ReqDateTime>													
		<ActionCode>updPaymentInfo</ActionCode>													
		<PWAuthentication>													
			<UserLoginName>												
				<xsl:value-of select="xxx"/>			**Values to be provided separately 								
			</UserLoginName>												
		</PWAuthentication>													
		<Data>													
			<xsl:text disable-output-escaping="yes">&lt;![CDATA[</xsl:text>												
			<policy VERSION_NO="1" MC_ID="112111001" ID="1" ExtAction="U" CT_ID="1">	**Values to be provided separately 												
				<downPaymentReceived>1000.00</downPaymentReceived>											
				<paymentReferenceID>abc123454321</paymentReferenceID>											
				<paymentPayerName>Polly Payer</paymentPayerName>											
				<paymentPayerAddressLine1>123 Main Street</paymentPayerAddressLine1>											
				<paymentPayerAddressCity>Southtown</paymentPayerAddressCity>											
				<paymentPayerAddressCountry>US</paymentPayerAddressCountry>											
				<paymentPayerAddressState>PA</paymentPayerAddressState>											
				<paymentPayerAddressPostalCode>00000</paymentPayerAddressPostalCode>											
				<paymentPayerEMail>polly.payer@payme.com</paymentPayerEMail>											
			</policy>												
			<xsl:text disable-output-escaping="yes">]]&gt;</xsl:text>												
		</Data>													
	</sch:PWInvokePolicyActionRequest>														
</soapenv:Body>															
</soapenv:Envelope>															

xml
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">																							
   <SOAP-ENV:Header/>																							
   <SOAP-ENV:Body>																							
      <ns3:PWInvokePolicyActionResponse xmlns:ns3="http://adaptik.com/ws/xml" xmlns:ns4="http://www.napcip.sapiens.com/ConfiguredBranchService" xmlns:ns5="http://www.napcip.sapiens.com/ProductOccurrenceService" xmlns:ns6="http://www.napcip.sapiens.com/ActionService">																							
         <TransRef>test</TransRef>																							
         <ActionCode>updatePaymentInfo</ActionCode>																							
         <TransDateTime>2021-08-02T11:47:39.473-04:00</TransDateTime>																							
         <TransResult>																							
            <ReturnCode>SUCCESS</ReturnCode>																							
            <ReturnReasonCode>SUCCESS</ReturnReasonCode>																							
            <ReturnMessage>SUCCESS</ReturnMessage>																							
         </TransResult>																							
<Data><![CDATA[<![CDATA[<?xml version="1.0" encoding="UTF-8"?> 																							
<policy VERSION_NO="1" MC_ID="112111001" ID="1" GenerationTS="2021-07-22T19:18:37.240" CT_INT="1" CT_ID="1" xmlns:ns2="http://adaptik.com/ws/xml">																							
	<downPaymentReceived>1000.00</downPaymentReceived>																						
	<paymentReferenceID>abc123454321</paymentReferenceID>																						
	<paymentPayerName>Polly Payer</paymentPayerName>																						
	<paymentPayerAddressLine1>123 Main Street</paymentPayerAddressLine1>																						
	<paymentPayerAddressCity>Southtown</paymentPayerAddressCity>																						
	<paymentPayerAddressCountry LITERAL="United States">US</paymentPayerAddressCountry>																						
	<paymentPayerAddressState LITERAL="Pennsylvania">PA</paymentPayerAddressState>																						
	<paymentPayerAddressPostalCode>00000</paymentPayerAddressPostalCode>																						
	<paymentPayerEMail>polly.payer@payme.com</paymentPayerEMail>																						
</policy>																							
]]]]
>><![CDATA[]]
></Data>																							
      </ns3:PWInvokePolicyActionResponse>																							
   </SOAP-ENV:Body>																							
</SOAP-ENV:Envelope>																							

Return Codes
SUCCESS
FAILURE
This Policy Pro endpoint would be used only if the IC AccountNumber (or IC InvoiceNumber as these would be the same) would start with “Q”.
(all items that do not start with Q = billingpro)
 URL:/spaces/IM/pages/1899036708/Sapiens+Coresuite+P+C+-+Comp+Power+Suite+Technical+Design
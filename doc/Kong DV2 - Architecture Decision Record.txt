1
6
false
default
list
false
Legacy Workload Decisions
Does Kong support load balancing of backend services? 
Yes
If yes, does each web server count towards a Kong Service definition as part of the license pricing? 
No, a Backend Service can be associated with a Kong Upstream Resource, and it is the Kong Upstream Resource that contains the multiple Backend Targets and conducts the Load Balancing.
Regarding current Barracuda Mapping: 
Current exported mapping here
Can we align all urls needing all 10 web servers? 
Yes, a single Kong Backend Service that is supported by a single Kong Upstream Target Pool can serve traffic for multiple URLs (
hostname
,
 
port
, and
 
/path
 
combinations)
Do we need to support individually addressable web servers in Production (e.g. 
ic-web5.invoicecloud.com
)? 
Yes but only Web 1
Does WCF Proxy Traffic need to go thru Kong? 
No
Does Kong traffic need to go thru Fire Wall? 
No, decision verbally confirmed with Ramesh/Zach during offsite in Orlando
DNS Resolution when inside the NonProd or Prod Private Networks? 
Route traffic back thru Cloudflare so all testing and development routes use full Network stack to identify issues early in the process prior to Production deployment (most DevTest URLs however are protected by Cloudflare Firewall rule restricting to know IPs such as WARP IPs or Palo Alto Outbound IPs).
Options:
Direct VM (will all go thru Firewall though based on Spoke Network routing rules)
Kong
Cloudflare 
(Recommended)
No Non-HTTPS Routes should be allowed in Kong.
Cannot do this, Stratus uses Port 80
Does Kong support accepting traffic over HTTP (80) or HTTPS (443) on non-standard Ports such as 4422, 4433, 4478, 4479?  
Yes with some manual Ingress changes but we decided to change the traffic pattern for MCC request from our Web Servers to a direct route so the need to support ports 4422, 4433, 4478, 4479 is no longer needed.
ADR page: 
Kong DV2 - MCC Nonstandard Ports
 
NewGen Workload Decisions
Should a Kong Backend Service be mapped to a Cluster or an Application Service in the Cluster?  
Kong Backend Service should be mapped to a Cluster and use Kong Routes to route traffic to specific Application Service Ingresses within a Single Cluster.
Other Networking Change Decisions
Absolutely necessary
Cannot be done post June
, all networking changes must be done as part of Kong to enable the Network traffic to flow as needed within the new Hub/Spoke architecture since Kong will be sitting in the Hub now per proper Traffic Routing architecture, where Barracuda is sitting in a Spoke and causing atypical, inefficient, confusing, and hard to manage traffic patterns.
Proposed Kong Configurations
NonProd Legacy
NonProd Configuration Name
Incoming Routes (protocol, hostname, port, and path)
Routing Rules
Backend Service Targets
Subnet
1
devtest14
https://devtest.invoicecloud.com:443/ 
https://devtest14.invoicecloud.com:443/ 
https://icg-boarding-devtest.invoicecloud.com:443/ 
https://icg-boarding-devtest14.invoicecloud.com:443/ 
https://icg-payments-devtest.invoicecloud.com:443/ 
https://icg-payments-devtest14.invoicecloud.com:443/ 
https://icg-reporting-devtest.invoicecloud.com:443/ 
https://icg-reporting-devtest14.invoicecloud.com:443/
https://internal-qa.invoicecloud.com:443/  
https://internal-qa14.invoicecloud.com:443/  
https://my-devtest.invoicecloud.com:443/  
https://my-devtest14.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.18
2
devtest1
https://devtest1.invoicecloud.com:443/
https://icg-boarding-devtest1.invoicecloud.com:443/ 
https://icg-payments-devtest1.invoicecloud.com:443/ 
https://icg-reporting-devtest1.invoicecloud.com:443/ 
https://internal-qa1.invoicecloud.com:443/  
https://my-devtest1.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.10
3
devtest10
https://devtest10.invoicecloud.com:443/
https://icg-boarding-devtest10.invoicecloud.com:443/ 
https://icg-payments-devtest10.invoicecloud.com:443/ 
https://icg-reporting-devtest10.invoicecloud.com:443/ 
https://internal-qa10.invoicecloud.com:443/ 
https://my-devtest10.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.22
4
devtest11
https://devtest11.invoicecloud.com:443/
https://icg-boarding-devtest11.invoicecloud.com:443/
https://icg-payments-devtest11.invoicecloud.com:443/ 
https://icg-reporting-devtest11.invoicecloud.com:443/ 
https://internal-qa11.invoicecloud.com:443/  
https://my-devtest11.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.19
5
devtest12
https://devtest12.invoicecloud.com:443/
https://icg-boarding-devtest12.invoicecloud.com:443/
https://icg-payments-devtest12.invoicecloud.com:443/ 
https://icg-reporting-devtest12.invoicecloud.com:443/ 
https://internal-qa12.invoicecloud.com:443/  
https://my-devtest12.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.21
6
devtest13
https://devtest13.invoicecloud.com:443/
https://icg-boarding-devtest13.invoicecloud.com:443/ 
https://icg-payments-devtest13.invoicecloud.com:443/ 
https://icg-reporting-devtest13.invoicecloud.com:443/ 
https://internal-qa13.invoicecloud.com:443/  
https://my-devtest13.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.23
7
devtest2
https://devtest2.invoicecloud.com:443/
https://icg-boarding-devtest2.invoicecloud.com:443/ 
https://icg-payments-devtest2.invoicecloud.com:443/ 
https://icg-reporting-devtest2.invoicecloud.com:443/ 
https://internal-qa2.invoicecloud.com:443/  
https://my-devtest2.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.14
8
devtest3
https://devtest3.invoicecloud.com:443/
https://icg-boarding-devtest3.invoicecloud.com:443/ 
https://icg-payments-devtest3.invoicecloud.com:443/ 
https://icg-reporting-devtest3.invoicecloud.com:443/ 
https://internal-qa3.invoicecloud.com:443/  
https://my-devtest3.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.15
9
devtest4
https://devtest4.invoicecloud.com:443/
https://icg-boarding-devtest4.invoicecloud.com:443/ 
https://icg-payments-devtest4.invoicecloud.com:443/ 
https://icg-reporting-devtest4.invoicecloud.com:443/ 
https://internal-qa4.invoicecloud.com:443/  
https://my-devtest4.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.12
10
devtest5
https://devtest5.invoicecloud.com:443/
https://icg-boarding-devtest5.invoicecloud.com:443/ 
https://icg-payments-devtest5.invoicecloud.com:443/ 
https://icg-reporting-devtest5.invoicecloud.com:443/ 
https://internal-qa5.invoicecloud.com:443/  
https://my-devtest5.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.13
11
devtest6
https://devtest6.invoicecloud.com:443/
https://icg-boarding-devtest6.invoicecloud.com:443/ 
https://icg-payments-devtest6.invoicecloud.com:443/ 
https://icg-reporting-devtest6.invoicecloud.com:443/ 
https://internal-qa6.invoicecloud.com:443/  
https://my-devtest6.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.32.0.11
12
devtest7
https://devtest7.invoicecloud.com:443/
https://icg-boarding-devtest7.invoicecloud.com:443/ 
https://ic-payments-devtest7.invoicecloud.com:443/ 
https://ic-reporting-devtest7.invoicecloud.com:443/ 
https://internal-qa7.invoicecloud.com:443/  
https://my-devtest7.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.16
13
devtest8
https://devtest8.invoicecloud.com:443/
https://icg-boarding-devtest8.invoicecloud.com:443/ 
https://icg-payments-devtest8.invoicecloud.com:443/ 
https://icg-reporting-devtest8.invoicecloud.com:443/ 
https://internal-qa8.invoicecloud.com:443/  
https://my-devtest8.invoicecloud.com:443/
https://cert.invoicecloud.com:443/ 
https://icg-boarding-cert.invoicecloud.com:443/ 
https://icg-payments-cert.invoicecloud.com:443/ 
https://icg-reporting-cert.invoicecloud.com:443/ 
https://my-cert.invoicecloud.com:443/
Strip Path: No
Preserve Host Header: Yes
10.31.0.17
14
devtest9
https://devtest9.invoicecloud.com:443/
https://icg-boarding-devtest9.invoicecloud.com:443/
https://icg-payments-devtest9.invoicecloud.com:443/ 
https://icg-reporting-devtest9.invoicecloud.com:443/ 
https://internal-qa9.invoicecloud.com:443/  
https://my-devtest9.invoicecloud.com:443/  
Strip Path: No
Preserve Host Header: Yes
10.31.0.20
NonProd Legacy Notes
Traffic to IC-QA-Proxy3 (
10.0.17.8
) from the NonProd Network Lane is on its End of Life phase, this traffic route will be closed down as part of the PCI 4.0 work due by August.
Traffic to 
IC-QA-WebReg1
 (
10.0.16.6
) from the NonProd Network Lane is on its End of Life phase, this traffic route will be closed down as part of the PCI 4.0 work due by August
Prod Legacy Configurations
Note, it was decided to do HTTPS redirects via Kong using 301 Permanently Moved response for all Routes except for 
www.invoicecloud.com/stratuswebservices/*
 .
Rows with 
Red text
 are Routes that will not be migrated from Barracuda because they are no longer needed or are superseded by the HTTPS Redirect decision mentioned above.
Rows with Regular text are Routes that will be migrated from Barracuda.
Prod Configuration Name
Incoming Routes (protocol, hostname, port, and path)
Routing Rules
Backend Service Targets
Subnet
Route Table
1
WWW2
https://www2.invoicecloud.com:2053/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:443  
IC-Web1
10.0.61.20:443  
appgw-cloudflare
 LB
InternalNetwork/PublicFacing
InternalNetwork/IC-F5
IC-PaloDefaultRoute
IC-RT-AppGateway
2
TestSomething-www
http://www.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.0.13:2053 
10.0.1.14:2053 
3
TestSomething-nsp
http://nsp.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.0.1.13:2053
10.0.3.4:443
4
MMC-HTTPS
https://www1.mcc.net/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.4.4:443  
MCCWeb1
10.0.4.5:443  
MCCWeb2
InternalNetwork / MCC-Web-DMZ
IC-PaloDefaultRoute
5
InvoiceCloud-HTTPS-WebServerPool
https://invoicecloud.com/
https://www.invoicecloud.com/
https://www2.invoicecloud.com/
https://www3.invoicecloud.com/
https://sms2.invoicecloud.com/
https://stratus.invoicecloud.com/
https://greensboro.invoicecloud.com/
https://greensborotest.invoicecloud.com/
https://stage11.invoicecloud.com/
https://sso.invoicecloud.com/
https://nsp.invoicecloud.com/
https://*.invoicecloud.com/
https://cedarcity.invoicecloud.com/
https://ncf.invoicecloud.com/
https://my.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.1.4:443  
IC-Web1
10.0.1.5:443  
IC-Web2
10.0.1.6:443  
IC-Web3
10.0.1.7:443  
IC-Web4
10.0.1.8:443  
IC-Web5
10.0.1.9:443  
IC-Web6
10.0.1.10:443  
IC-Web7
10.0.1.11:443  
IC-Web8
10.0.1.12:443  
IC-Web9
10.0.1.15:443  
IC-Web10
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
6
IC-Helpdesk
https://helpdesk.invoicecloud.com/
https://maintenance.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.13.4:443  
IC-JitBitWeb1
10.0.13.5:443  
IC-JitBitWeb2
InternalNetwork / IC-JitBitWeb
IC-RouteTable
7
IC-Test1-443
https://test1.invoicecloud.com/
https://test1sms.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.1.101:443  
IC-TestWeb1
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
8
IC-Preview
https://preview.invoicecloud.com/
https://my-preview.invoicecloud.com/
https://icg-payments-preview.invoicecloud.com/ 
https://icg-boarding-preview.invoicecloud.com/
https://icg-reporting-preview.invoicecloud.com/ 
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.1.13:443  
IC-WebPreview1
10.0.1.14:443  
IC-WebPreview2
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
9
IC-ICHelpdesk
https://ichelpdesk.invoicecloud.com/
https://RobTestApps.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.20.11:443  RobTestApps
10
IC-WebMon-Web1
https://ic-web1.invoicecloud.com/
https://my1.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.1.4:443  
IC-Web1
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
11
IC-WebMon-Web2
https://ic-web2.invoicecloud.com/
https://my2.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.5:443  
IC-Web2
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
12
IC-WebMon-Web3
https://ic-web3.invoicecloud.com/
https://my3.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.6:443  
IC-Web3
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
13
IC-WebMon-Web4
https://ic-web4.invoicecloud.com/
https://my4.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.7:443  
IC-Web4
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
14
IC-WebMon-Web5
https://ic-web5.invoicecloud.com/
https://my5.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.8:443  
IC-Web5
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
15
IC-WebMon-Web6
https://ic-web6.invoicecloud.com/
https://my6.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.9:443  
IC-Web6
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
16
IC-WebMon-Web7
https://ic-web7.invoicecloud.com/
https://my7.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.10:443  
IC-Web7
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
17
IC-WebMon-Web8
https://ic-web8.invoicecloud.com/
https://my8.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.11:443  
IC-Web8
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
18
IC-WebMon-Web9
https://ic-web9.invoicecloud.com/
https://my9.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.12:443  
IC-Web9
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
19
IC-WebMon-Web10
https://ic-web10.invoicecloud.com/
https://my10.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.15:443  
IC-Web10
InternalNetwork/PublicFacing
IC-PaloDefaultRoute
20
IC-QA1
https://qa1.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.16.4:443
21
IC-QA2
https://qa2.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.16.5:443
22
IC-QA-Regression
https://qa-regression.invoicecloud.com/
https://my-regression.invoicecloud.com/
https://icg-payments-regression.invoicecloud.com/ 
https://icg-boarding-regression.invoicecloud.com/
https://icg-reporting-regression.invoicecloud.com/ 
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.16.6:443  
IC-QA-WebReg1
InternalNetwork/IC-Dev-Web
IC-PaloDefaultRoute
23
CertTest
https://certtest-old.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.40.4:443
24
TestEast
https://testeast.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:443
10.0.1.5:443
10.0.1.6:443
10.0.1.7:443
10.0.1.8:443
25
ICG-Pool
https://icg-boarding.invoicecloud.com/
https://icg-reporting.invoicecloud.com/
https://icg-payments.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.19.5:443  
IC-Gateway1
10.0.19.6:443  
IC-Gateway2
10.0.19.4:443  
IC-Gateway3
InternalNetwork/IC-Gateway-Web
IC-PaloDefaultRoute
26
cirrusutilities
https://*.cirrusutilities.com/
Strip Path: No
Preserve Host Header: Yes
10.0.45.5:443  IC-Dub-Test-Web
27
TestSomething.net
https://www4.testsomething.net/
https://nsp.testsomething.net/
https://Greensboro.testsomething.net/
https://Greensborotest.testsomething.net/
https://stage1.testsomething.net/
https://preview.testsomething.net/
https://www3.testsomething.net/
https://www2.testsomething.net/
https://cedarcity.testsomething.net/
https://sms.testsomething.net/
https://sso.testsomething.net/
https://ncf.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.40.0.5:443  cloudflare1
10.40.0.6:443  cloudflare2
28
www.testsomething.net
https://www.testsomething.net/
https://sms2.testsomething.net/
https://*.testsomething.net/
https://my.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.40.0.6:443  cloudflare2
29
IC-DevTest
https://devtest.invoicecloud.com/
https://my-devtest.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.31.0.18:443  IC-DevTest14
30
IC-Rob
http://*.ic-rob.com/
http://robtest.invoicecloud.com/  
Strip Path: No
Preserve Host Header: Yes
10.0.1.9:80  
IC-Web6
31
Invoicecloud-beta
https://www.invoicecloud-beta.com/
Strip Path: No
Preserve Host Header: Yes
10.0.11.7  
IC-Beta
32
apibeta-443
https://apibeta.invoicecloud.com/
https://www.invoicecloud.com/portal/ui/*
Strip Path: No
Preserve Host Header: Yes
10.223.0.122:443  
payer-v2-cluster-ingress-controller
33
payerbeta-443
https://payerbeta.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.223.128.68:80  
pve-pri-payer0web2-web
34
IC-Cert
https://cert.invoicecloud.com/
https://my-cert.invoicecloud.com/
https://icg-payments-cert.invoicecloud.com/
https://icg-reporting-cert.invoicecloud.com/
https://icg-boarding-cert.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.31.0.17  
vm-web-vm1qa8
35
MCC-4422
http://www1.mcc.net:4422/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:4422  
MCCWeb1
10.0.4.5:4422  
MCCWeb2
36
MCC-4433
https://www1.mcc.net:4433/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:4433  
MCCWeb1
10.0.4.5:4433  
MCCWeb2
37
MCC-4478
http://www1.mcc.net:4478/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:4478  
MCCWeb1
10.0.4.5:4478  
MCCWeb2
38
MCC-4479
https://www1.mcc.net:4479/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:4479  
MCCWeb1
10.0.4.5:4479  
MCCWeb2
39
MCC-HTTP
http://www1.mcc.net/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:80
MCCWeb1
10.0.4.5:80
MCCWeb2
40
InvoiceCloud-HTTP-WebServerPool
http://www.invoicecloud.com/
http://www2.invoicecloud.com/
http://www3.invoicecloud.com/ 
http://sms2.invoicecloud.com/
http://sso.invoicecloud.com/
http://stratus.invoicecloud.com/
http://greensboro.invoicecloud.com/
http://greensborotest.invoicecloud.com/ 
http://*.invoicecloud.com/  
http://cedarcity.invoicecloud.com/ 
http://ncf.invoicecloud.com/ 
http://my.invoicecloud.com/ 
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:80  
IC-Web1
10.0.1.5:80  
IC-Web2
10.0.1.6:80  
IC-Web3
10.0.1.7:80  
IC-Web4
10.0.1.8:80  
IC-Web5
10.0.1.9:80  
IC-Web6
10.0.1.10:80  
IC-Web7
10.0.1.11:80  
IC-Web8
10.0.1.12:80  
IC-Web9
10.0.1.15:80  
IC-Web10
41
IC-Helpdesk-HTTP
http://helpdesk.invoicecloud.com/
http://maintenance.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.13.4:80  
IC-JitBitWeb1
10.0.13.5:80  
IC-JitBitWeb2
42
InvoiceCloud-HTTP-WebServerPool-Limited
http://invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:80  
IC-Web1
10.0.1.5:80  
IC-Web2
10.0.1.6:80  
IC-Web3
10.0.1.7:80  
IC-Web4
10.0.1.8:80  
IC-Web5
43
IC-Test1-80
http://test1.invoicecloud.com/ 
http://test1sms.invoicecloud.com/  
Strip Path: No
Preserve Host Header: Yes
10.0.1.101:80  
IC-TestWeb1
10.0.1.4:80  
IC-Web1
10.0.1.5:80  
IC-Web2
44
IC-Test1sms-80
http://test1sms.invoicecloud.com/  
Strip Path: No
Preserve Host Header: Yes
10.0.1.101:80  
IC-TestWeb1
45
IC-RobTestApp1
http://robtestapps.invoicecloud.com/  
Strip Path: No
Preserve Host Header: Yes
10.0.20.11:80  
IC-RobTestApp1
46
IC-Robtest-80
Strip Path: No
Preserve Host Header: Yes
10.0.1.9:80  
IC-Web6
47
IC-Preview-80
http://preview.invoicecloud.com/  
Strip Path: No
Preserve Host Header: Yes
10.0.1.13:80  
IC-WebPreview1
10.0.1.14:80  
IC-WebPreview2
48
IC-QA1-80
http://qa1.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.16.4:80
49
IC-QA2
http://qa2.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.16.5:80
50
IC-WebMon-Web1-80
http://ic-web1.invoicecloud.com/
http://my1.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:80
IC-Web1
51
IC-WebMon-Web2-80
http://ic-web2.invoicecloud.com/
http://my2.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.5:80
IC-Web2
52
IC-WebMon-Web3
http://ic-web3.invoicecloud.com/
http://my3.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.6:80  
IC-Web3
53
IC-WebMon-Web4
http://ic-web4.invoicecloud.com/
http://my4.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.7:80  
IC-Web4
54
IC-WebMon-Web5
http://ic-web5.invoicecloud.com/
http://my5.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.8:80  
IC-Web5
55
IC-WebMon-Web6
http://ic-web6.invoicecloud.com/
http://my6.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.9:80  
IC-Web6
56
IC-WebMon-Web7
http://ic-web7.invoicecloud.com/
http://my7.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.10:80  
IC-Web7
57
IC-WebMon-Web8
http://ic-web8.invoicecloud.com/
http://my8.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.11:80  
IC-Web8
58
IC-WebMon-Web9
http://ic-web9.invoicecloud.com/
http://my9.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.12:80  
IC-Web9
59
IC-WebMon-Web10
http://ic-web10.invoicecloud.com/
http://my10.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.15:80  
IC-Web10
60
IC-QA-Regression
http://qa-regression.invoicecloud.com/
http://my-regression.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.16.6:80  
IC-QA-WebReg1
61
TestEast-80
http://testeast.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:80
10.0.1.5:80
10.0.1.6:80
10.0.1.7:80
10.0.1.8:80
62
ICG-Pool-80
http://icg-boarding.invoicecloud.com/
http://icg-reporting.invoicecloud.com/
http://icg-payments.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.19.5:80  
IC-Gateway1
10.0.19.6:80  
IC-Gateway2
10.0.19.4:80  
IC-Gateway3
63
www4-80
http://www4.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.4:80  
IC-Web1
10.0.1.5:80  
IC-Web2
64
IC-Testsomething-80
http://*.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.40.0.6:80  
IC-Web1-NOT
10.0.1.5:80  
IC-Web2
65
stage1.ic-alec.com-80
http://stage1.ic-alec.com/
Strip Path: No
Preserve Host Header: Yes
172.20.1.7:80  
cf-testweb1
172.20.1.8:80  
cf-testweb2
66
TS-NCF
http://ncf.testsomething.net/
Strip Path: No
Preserve Host Header: Yes
10.40.0.5:80  
CF1
10.40.0.6:80  
CF2
67
ptest1.invoicecloud-beta.com
http://ptest1.invoicecloud-beta.com/
Strip Path: No
Preserve Host Header: Yes
10.0.32.4:80  
IC-PaloTest-VM
10.0.33.4:80  
IC-PaloTest2-VM
68
ptest1.invoicecloud-beta.com
http://ptest2.invoicecloud-beta.com/
http://ptest2.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
10.0.33.4:80  
IC-PaloTest2-VM
69
IC-Rob
http://*.ic-rob.com/
Strip Path: No
Preserve Host Header: Yes
10.0.1.9:80  
IC-Web6
10.0.3.4:4443  
MCCCertTest
70
CertTest
http://www1.mcc.net/
Strip Path: No
Preserve Host Header: Yes
10.0.4.4:4433  
MCC-Web1
10.0.3.4:2000  
Port-2000
71
CertTest
https://certtest.invoicecloud.com/
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: Yes
10.0.1.4:443
IC-Web1
10.0.1.5:443
IC-Web2
72
Payer NextGen
https://www.invoicecloud.com/portal/ui/
https://api.invoicecloud.com/payer/
Strip Path: Yes
Preserve Host Header: No
HTTPS Redirect: Yes
payer-v3.invoicecloud.com:443
73
StratusWebServices
http://www.invoicecloud.com/stratuswebservices/*
Strip Path: No
Preserve Host Header: Yes
HTTPS Redirect: No
10.0.1.4:80  
IC-Web1
10.0.1.5:80  
IC-Web2
10.0.1.6:80  
IC-Web3
10.0.1.7:80  
IC-Web4
10.0.1.8:80  
IC-Web5
10.0.1.9:80  
IC-Web6
10.0.1.10:80  
IC-Web7
10.0.1.11:80  
IC-Web8
10.0.1.12:80  
IC-Web9
10.0.1.15:80  
IC-Web10
Route Tables used in Production Legacy Routing
After testing and analysis it was determined that no changes to Networking Routing are needed for the Subnets shown below so this proposal has been canceled to reduce the amount of change introduced.
 
 
There are 2 Route Tables used in the Routing of Legacy Traffic to Legacy VMs:
IC-PaloDefaultRoute
IC-RouteTable
These are used in the following Subnets:
InternalNetwork/MCC-Web-DMZ → IC-PaloDefaultRoute
InternalNetwork/PublicFacing → IC-PaloDefaultRoute
InternalNetwork/IC-JitBitWeb → IC-RouteTable
InternalNetwork/IC-Dev-Web → IC-PaloDefaultRoute
InternalNetwork/IC-Gateway-Web → IC-PaloDefaultRoute
Below is the proposed Routes for the New Route Table we will create and use during the Barracuda to Kong Transition to ensure the Traffic from Kong to the VMs does not go back thru the firewall as a double route thru the firewall after Ingressing into the Network is not required nor recommended by InvoiceCloud Security (per Conversation with 
 at the R&D Offsite in Orlando).
Records highlighted in 
Green
 
indicate records to be added to the new Subnet.  Records highlighted in 
Red
 
indicate records to be added to the new Subnet.  Unhighlighted records are in question and will be discussed with 
 and 
.
Route Name
Adress Prefix
Next Hop Type
Next Hop IP Address
Route Table Source
DefaultRoute
0.0.0.0/0
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
InternalNetwork
10.0.0.0/18
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
Loadbalancers
10.0.3.0/24
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
Non-Prod-AVD
10.168.4.0/22
Virtual appliance
10.152.2.254
IC-PaloDefaultRoute
prd-hub-vpn
172.16.4.0/24
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
saucelabs-sbx
10.166.0.0/24
Virtual appliance
10.152.2.254
IC-PaloDefaultRoute
sbx-hub-vpn
10.152.0.0/16
Virtual appliance
10.152.2.254
IC-PaloDefaultRoute
ToolingCluster
10.150.0.0/19
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
ToolingCluster-Legacy
10.150.0.0/16
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
vnet-east-infra-common-app-dev
10.33.0.0/16
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
vnet-east-infra-common-app-dev_1-6
10.32.0.0/16
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
vnet-east-infraQAcommon-dev
10.31.0.0/16
Virtual appliance
10.211.2.254
IC-PaloDefaultRoute
VPNTraffic
172.16.0.0/24
Virtual appliance
10.0.10.7
IC-PaloDefaultRoute
snet-pri-hub2-acr
10.211.0.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-appgw
10.211.1.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-trusted
10.211.2.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-untrusted
10.211.3.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-mgmt
10.211.4.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-jumpboxes
10.211.5.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-nodepool
10.211.6.0/24
Virtual appliance
10.211.2.254
New
snet-pri-hub2-acragentpool
10.211.64.0/26
Virtual appliance
10.211.2.254
New
snet-pri-hub2-keyvault
10.211.64.64/26
Virtual appliance
10.211.2.254
New
snet-pri-hub2-resolver
10.211.80.32/27
Virtual appliance
10.211.2.254
New
GatewaySubnet
10.211.80.64/27
Virtual appliance
10.211.2.254
New
snet-pri-hub2-aci
10.211.80.96/27
Virtual appliance
10.211.2.254
New
snet-pri-hub2-storage-account
10.211.80.128/26
Virtual appliance
10.211.2.254
New
snet-pri-hub2-service-bus
10.211.80.192/26
Virtual appliance
10.211.2.254
New
snet-pri-hub2-azure-sql
10.211.81.0/25
Virtual appliance
10.211.2.254
New
 URL:/spaces/platform/pages/3111976962/Kong+DV2+-+Architecture+Decision+Record
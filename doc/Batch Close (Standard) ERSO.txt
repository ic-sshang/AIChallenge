Epic Link: 
Batch Close SRE (Auto Close)
 
:flag_on:
atlassian-flag_on
:flag_on:
#FFF0B3
Maintain this section throughout the life of the project
Project Status
 Smooth Sailing!
 We are here as of 
 Dark Clouds Above
 Bad Things, Man
Phase
Discovery
Coding/Testing
Ext Comm
Deployment
Monitoring
Status
Complete
Green
 
Not STARTED
Red
 
NOT STARTED
Red
 
Not STARTED
Red
 
not STARTED
Red
 
Est Completion
 
 
 
 
 
:speaking_head:
1f5e3
ðŸ—£ï¸
#ABF5D1
Prepare this section for the review meeting
June 14th Review Meeting:
We will cover: 
The problem and our objective
Our approach for fixing these errors
Research to support visibility 
first draft of project timeline
 Problem Alignment
InvoiceCloud occasionally has problems with auto close batch processing. The batch closure process often fails because the number of batches which are closing around the same time period. When this happens, its a direct impact to billers. Billers rely on their batch summary reports and if the batch closes late or the email doesnâ€™t go out in a timely manner, support receives calls inquiring about whether or not their batch was closed. Billers expect their batches to close as expected each day without issue. Making sure teams are aware when these issues occur is also important. Part of this project will include alerts which will allow other departments to have visibility into batch failures.  
Currently the auto close process is managed in Azure. This is a custom job which loops through the process. The largest auto batch closes begin at 11:00pm and usually finish by 12:30am. As we continue to add additional billers to our processes, we will need the ability to overlap our batch close process to ensure all billers batches close out on time. The ideal solution would be that the batch close process then kicks off the payment file processing as soon as the batch close process is complete, but this would require development and support from the integrations team to meet this objective. 
Our window to rerun the auto close batch is very short because they run at 45 mins past the hour. If we run the batch late, we have to occasionally have to reach out to the Intergrations team to have them rerun the payment file processing. 
We also want to clean up the alerts as many of the existing alerts we receive are related to demo billers which are not actioned on. This will provide engineering with a less false alerts, making it easier and faster identify real issues. 
One thing to note, resources from the integration team are pulled in to work on batch close incidents, therefore improve this process would also free up valuable time for this team as well.  
Data analysis shows we spend significant time on resolving Batch processing issues from Jan 1 - April 1. 
Time spent in a week: 
Alerts: 4.75 hrs * (outliers are included in this estimate) On average we spend about 2 hours each day (14 hours per week) working through the alerts.  
If we are unable to reprocess these batch closures in time, then we need to engage the Intergrations team which is additional resources/time. 
All of the above metrics on time spent and impact we found are attributed to the following: 
Throughout Q1 2023,  
multishard errors accounted for the majority of errors.
DB timeouts occurred while processing a specific biller's batch. 
Errors connecting to the payment processor could potentially occur.
 
Â Objective
The objective of this project is to improve the batch close process so monitoring and supporting the batch close process work every time and provide IC with the time sensitive alerts to allow them to be proactive in reviewing and addressing any issues immediately. Our goal is for the batch close process to successfully close at the scheduled time each day and/or provide us with the information we need to address any interruptions as an escalation. By eliminating batch close errors that are within our control will allow us to provide a better biller experience, eliminating unnecessary calls to support because of a batch error or delay.  
Today, Most of the ops genie alerts are a false positives. We want to eliminate any false positive alerts so the team is not distracted by reviewing alerts that are non-actionable. This will allow the engineering team to respond quicker to real batch issues.  
We have some reporting available for other groups to see some information related to batch closure failures, but we would like to include additional batch close details on the logging in new relic. 
Therefore our objectives are: 
reducing majority if not all auto close batch errors 
reducing false positives alerts (75%) 
increasing visibility â†’ proactive handling 
Â Success Metrics
Goal
Metric
Current
Good
Great
Success Rate for Auto Close Batch
Increase the number of batches that are successful without manual intervention.
data not available
90%
>95%
Reduce false positive alerts on demo billers
Reduce amount of false positive alerts  per month for batch close processing issues.
Current Avg is 79 per month
<10
<5
Speed up the auto close batch process so batches close at their expected time
Decrease the processing time for Chase auto close batches at midnight
90% of the time goes thru into the 1:00 timeframe 
10%
<5% 
Less hours spent on batch failures
Reduce manual effort to resolve failures. 
14 hours per week
<2hrs
<1hr
Universal monitoring
Number of people in IC who can view batch failures monitoring and additional details.
~18 people 
>18
>100
 Target Audience
Group
Impact
All auto close billers 
When the batch process fails, all billers who are part of the standard batch close process will be impacted by these failures. 
IC development team 
The outcome of this work should reduce error remediation time spent, increase alerting, and monitoring of processing errors. 
IC Support teams 
IC CSMs, CS, DS are impacted by billers reaching out when Batch issues arise. The outcome of this work should enable this team to identify problems before our billers.
Â User Interaction and Design
User Research Background 
From 2023 Q1 research weâ€™ve found the most frequent issue is receiving alerts that there were errors on the auto close batch processes. The engineering team receives ops genie alerts mostly in the early morning hours which requires someone to review each item separately. If multiple batches fail, it takes additional time to review each of them and this can prevent us from missing the next auto close run time window. If we miss the batch run window, we need to engage Intergrations & CS to notify them of the impact.  
From this research suggested data points that could be of value are: 
Per Biller: 
Count of auto batch closes that did not close within the hour.
For Internal Team:
List of auto batch closes that did not close within the hour by payment type and/or module 
To place in New Relic Dashboard for monitoring. 
 Components Impacted
Auto Close Batch Processing 
Component
Impact
Batch Closures
To list the affected repos. 
New Relic 
We will add a tool in the New Relic to monitor batch closing processing, and any failures. 
Alerts 
Additional alerting internally of any batch close processing failures
Payment Exports
Reduction of manual exports
 Technical Architecture
EBPP-11576, EBPP-11577, EBPP-11578
 Testing Plan
In Scope
Features/tasks that will be tested
Out of Scope
Features/tasks that will not be tested
Environment/Tools
Where will this be tested and specific tool/knowledge required
Risks
What could impact this plan and mitigation plan
Resources
Any test data, files, settings needed for testing
Assumptions
What useful constraints are in place
Â 
Â 
Â 
Â 
Â 
Â 
Â 
Â 
Â 
Â 
 Serviceability/Observability
Internal Visibility:
 We need to continue the current internal visibility which includes new relic, and ops genie. 
How can we find that Auto Close Batch has not closed/ running longer than expected.
Here are the examples that we have today:
Slack channel (visible company-wide)  
Skybot Job 
3. Biller Portal - Settled Batch History
4. CRM - CRM version of the slack channel, Tool used to reset negative batches
:info:
atlassian-info
#B3D4FF
 Project Participants
Name
Company
Team
Role
Angie Paul
InvoiceCloud
Wicked Tendies
Product Manager
Adrian Izaguirre 
InvoiceCloud
Wicked Tendies
Technical Lead
Â Requirements
Change to rely on Jira, pull in epic details
Requirement
Importance
Jiras Linked 
Notes / Outcome
Addressing the top two errors: 
Speed up/overlap auto batch close process 
 Stop alerts for demo billers
relates to metric of reducing auto close batch errors, and engineering time.  Currently estimated that 2 hours per day are spent researching alerts.  
TBD
Increased success of auto close batches;  Reduction in time spent monitoring
Increase Logging
Â relates to metrics of reducing daily errors, and engineering time. 
TBD
Â Easier to identify issues
Internal Visibility 
Important so others within the organization can be aware of batch close status and issues. 
TBD
Increased visibility for DS & Support teams.
 Competitive Analysis
All competitors have a daily batch process. 
 Dependencies
Â Assumptions
Expecting this project will take approx. 8 weeks to complete
Assuming we may need to adjust alerts to include other false positive alerts
This project will not fix all issues, but should help us resolve auto close issues that are within our control
 
 Timeline
Event
Date
Confidence
Status/Work 
Kickoff call
 
Not Started
Red
 
Design review
 
not started
Red
 
Milestone 1 
 
Enhance IC.Batchclose
Milestone 2 
 
Stop Ops Genie Alerts for Demo Billers
Milestone 3 
 
Additional Logging
Â Open Questions
Question
Owner
Answer
Date Answered
Â Out of Scope
List the features discussed which are out of scope of might be revisited in a later release.
Custom close batch process is a separate project
 Communication Checklist
Comm Audience
Task
Notes/Actions
Project team members
Early Access Billers
All Billers
Partners
Internal \ Training
Internal \ Support+CSM
Internal \ Sales
Internal \ Boarding
Internal \ General
Results 
Monitoring of this project will begin immediately after its deployed. We should be able to confirm this project was successful after about 3 months of batch closes.  
Anticipated deployment date 9/19/23
Monitoring to begin 9/19/23
Success Measurements to be reported on 12/18/23. 
 URL:/spaces/PRODUCT/pages/2663710721/Batch+Close+Standard+ERSO
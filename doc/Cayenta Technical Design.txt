Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation
Jira ticket 
Release Date
Document status
Complete
Green
Document owner
 
Solution engineer
 
 
Salesforce SOW
Knowledge Transfer
API Documentation
Unique Domain
Datapump/RTDR URL and Credentials are provided to add into Advanced Settings
Note: We apply the RTDR logic to the most recent invoice that is not classified as a donation invoice. Donation invoices should be filtered out before initiating the RTDR process.
Full API document: 
Cayenta API Documentation - CCU
 
Specification - Payment Arrangement: 
A radio button will be added to the payment options page to display the Pay Arrangement amount. This feature will be visible only when Invoice Cloud receives a 
<Pay_Arrangement_Amt>
 value greater than 0 in the invoice file. If there is no arrangement amount, the tag will be left with no value. The Pay Arrangement amount will be processed as a standard payment.
Pay arrangements are set as the default for all Cayenta billers, and the GetPayArrangements API is accessible to all Cayenta customers.
A payment arrangement can be enrolled after a bill has been created. Consequently, both 
CURRENT_BALANCE
 and 
ARRANGEMENT_AMT
 must be updated via RTDR. If the 
ARRANGEMENT_AMT
 exceeds 0, the system must be updated, and the radio button should be made visible.
RTDR updates: We need to call GetAccount API to see if 
<ACTIVE_PAYARR_YN>
is true(if account is enrolled pay arrangement). If it's true, we need to call GetAccountBalance(
CURRENT_BALANCE
) and GetPayArrangements(
ARRANGEMENT_AMT
) for balance update. If it’s false, we can only pull 
CURRENT_BALANCE
 from GetAccountBalance.
Sample SetPhone API:
Sample file for Biller (City of Bellevue with the payment arrangement information):
NOTE
: Credentials provided by each Cayenta API should have permissions to run only the requests we use for the IC integration, These permissions are managed in the Cayenta Router.
Details
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
Cayenta Router
API Server installed at Billers site by Cayenta.  They call it a Cayenta Router because the API has internal security measures when accessing certain requests.
Past Due can be passed through: <OVERDUE_AMT>
<Request>
  <GetAccountBalance>
    <Params>
      <ACCOUNT_NO>{BillerAccountNumber}</ACCOUNT_NO>
    </Params>
  </GetAccountBalance>
</Request>
<Reply>
<GetAccountBalance>
<Params>
<ACCOUNT_NO></ACCOUNT_NO>
<ACCOUNT_NO_CUSTOM></ACCOUNT_NO_CUSTOM>
<BILLED_AND_OWING></BILLED_AND_OWING>
<DUE_IF_TRUE_UP></DUE_IF_TRUE_UP>
<CURRENT_BALANCE></CURRENT_BALANCE>
<CARRY_FWD_AMT></CARRY_FWD_AMT>
<OVERDUE_AMT></OVERDUE_AMT>
<UNAPPLIED_CREDIT></UNAPPLIED_CREDIT>
			<LAST_BILL_DT></LAST_BILL_DT>
			<LAST_BILL_AMT></LAST_BILL_AMT>
			<LAST_PAYMENT_DT></LAST_PAYMENT_DT>
			<LAST_PAYMENT_AMT></LAST_PAYMENT_AMT>
			<DUE_DT></DUE_DT>
			<CUTOFF_DT></CUTOFF_DT>
			<CUTOFF_AMT></CUTOFF_AMT>
			<NONPAY_CUTOFF_YN></NONPAY_CUTOFF_YN>
			<DISCOUNT_AMT></DISCOUNT_AMT>
			<ACTUAL_AMT_OWING></ACTUAL_AMT_OWING>
			<DISCOUNT_END_DT></DISCOUNT_END_DT>
                       <PREPAY_AMT></ PREPAY_AMT >
                       <PREPAY_BALANCE></ PREPAY_BALANCE >
			<STATUS></STATUS>
			<STATUS_DESC></STATUS_DESC>
</Params>
<STATUS></STATUS>
</GetAccountBalance>
</Reply>
Past Due: <OVERDUE_AMT>
<Reply transNo="6431" pid="2020">
<GetAccountBalance version="1.1">
<Params>
<ACCOUNT_NO>2003708</ACCOUNT_NO>
<ACCOUNT_NO_CUSTOM>138714</ACCOUNT_NO_CUSTOM>
<BILLED_AND_OWING>100.24</BILLED_AND_OWING>
<DUE_IF_TRUE_UP> </DUE_IF_TRUE_UP>
<CURRENT_BALANCE>100.24</CURRENT_BALANCE>
<CARRY_FWD_AMT> </CARRY_FWD_AMT>
<OVERDUE_AMT>100.24</OVERDUE_AMT>
<UNAPPLIED_CREDIT>0</UNAPPLIED_CREDIT>
<CUTOFF_AMT>100.24</CUTOFF_AMT>
<BALANCE_NET_AMT>100.24</BALANCE_NET_AMT>
<PASTDUE_AMT>100.24</PASTDUE_AMT>
<LAST_BILL_DT>20240418</LAST_BILL_DT>
<LAST_BILL_AMT>100.24</LAST_BILL_AMT>
<LAST_PAYMENT_DT>20240304</LAST_PAYMENT_DT>
<LAST_PAYMENT_AMT>-98.24</LAST_PAYMENT_AMT>
<CUTOFF_DT/>
<DUE_DT>20240520</DUE_DT>
<NONPAY_CUTOFF_YN>F</NONPAY_CUTOFF_YN>
<EXTENDED_DUE_DT/>
<BUDGET_BILL_TP> </BUDGET_BILL_TP>
<BUDGET_BILL_AMT> </BUDGET_BILL_AMT>
<CURRENT_CHARGES>100.24</CURRENT_CHARGES>
<ACCOUNT_BALANCE>100.24</ACCOUNT_BALANCE>
<WRITE_OFF_AMT>0</WRITE_OFF_AMT>
<WRITE_OFF_DT/>
<STATUS>0</STATUS>
<STATUS_DESC>Account 2003708 found.</STATUS_DESC>
</Params>
<STATUS>0</STATUS>
</GetAccountBalance>
</Reply>
<PASTDUE_AMT> → PastDue (FileSpecID 407)
Calling the GetAccountBalance API is always going to get the most up to date past due balance for the account, so even if the daily extract file was modified to include the past due balance you could always query the system for the most up to date balance. 
Default BalaceDueNodeName is “CURRENT_BALANCE“
If Custom2 on the invoice is “BUDGET” we use “BUDGET_BILL_AMT“
If Advanced Setting 129 is set we use the Advanced Setting value instead of the default
 (example: BID 827)
RTDR Per Due Date: RTDR will review the <DUE_DT> on the response provided and compare this date to the due date on the most recent bill on IC’s side to make sure the balance is being updated to the correct invoice. If the due date does not match, do not update the balance. - INT-2573
The OVERDUE_AMT in the cutoff amount is for the account rather than the past due amount. For most clients these are actually the same however it is possible for some clients to have items which are past due but aren't included in the cutoff amount. 
Original request by City of Bellevue, but there could be different use case between billers, Advanced Settings is preferred.  
RTDR: Payment Arrangement
GetPayArrangements
Used to retrieve pay arrangement amount if an account is signed up for arrangement plan 
<Request>
    <GetAccount>
    <Params>
        <ACCOUNT_NO>{AccountNumber}</ACCOUNT_NO>
        <PREPAY_INFO_YN></PREPAY_INFO_YN>
        <FMT_PREPAY_YN></FMT_PREPAY_YN>
    </Params>
    </GetAccount>
</Request>
<Request>
  <GetPayArrangements>
    <Params>
      <ACCOUNT_NO>{BillerAccountNumber}</ACCOUNT_NO>
      <PAYSCHEDULE_YN></PAYSCHEDULE_YN>
    </Params>
  </GetPayArrangements>
</Request>
If <ACTIVE_PAYARR_YN> is true, then call GetPayArrangement
<Reply>
<GetPayArrangements version=1.1>
<Params>
<Arrangement>
  <ACCOUNT_NO>2036948</ACCOUNT_NO>
  <PAY_ARRANGEMENT_REF>8</PAY_ARRANGEMENT_REF>
  <STATUS_CD>Y</STATUS_CD>
  <START_DT>20241022</START_DT>
  <END_DT>20250515</END_DT>
  <PAY_OPTION_CD>BDUE</PAY_OPTION_CD>
  <PAY_OPTION_AMT>3</PAY_OPTION_AMT>
  <STREAM_CD>BPA</STREAM_CD>
  <ARRANGEMENT_AMT>1671.4</ARRANGEMENT_AMT>
  <GRACE_DAYS>0</GRACE_DAYS>
  <CHG_DTM>2024102211551857</CHG_DTM>
  <REASON_CD></REASON_CD>
</Arrangement>
</Params>
<STATUS>0</STATUS>
</GetPayArrangements>
</Reply>
In terms of how to get the payment arrangement amount, first call GetAccount API to see if <ACTIVE_PAYARR_YN> is true.
If true, call GetPayArrangements using the ACCOUNT_NO and ARRANGEMENT_AMT will be the pay arrangement amount.
It’s a part of original enhancement requests.
Balance due has already included pay arrangement amount, but to display the amount, it needs a Product request. Only requested by City of Bellevue.
Data Pump: Payment
Cayenta_PostPaymentWithPaymentDate
Used to post payments to the client’s system in near real-time 
<Request>
<AddARItems>
		<Params>
			<GROUP_NO></GROUP_NO>
			<SUBSYSTEM_ID>"UM"</SUBSYSTEM_ID>
			<SS_ACCOUNT_NO>{CustomerAccountNumber}</SS_ACCOUNT_NO>
			<ITEM_DT>{TodaysDate 'yyyyMMdd'}</ITEM_DT>
			<ITEM_TP>{Payment Code from AdvSetting based on Payment Type}</ITEM_TP>
			<CATEGORY_CD></CATEGORY_CD>
			<SUMMARY_CD></SUMMARY_CD>
			<SOURCE_SS_ID>"AR"</SOURCE_SS_ID>
			<SOURCE_REFERENCE>"ARWEB"</SOURCE_REFERENCE>
			<SOURCE_SPEC1>{Payment GUID}</SOURCE_SPEC1>
			<SOURCE_SPEC2>{Customer Phone - IF Bid 836, 1023: Payment Message}</SOURCE_SPEC2>
			<SOURCE_SPEC3>{Payment Method}</SOURCE_SPEC3>
			<ITEM_AMT>{Payment Amount - Fee}</ITEM_AMT>
			<TAXABLE_AMT></TAXABLE_AMT>
			<TAX_CD></TAX_CD>
			<ITEM_STAT></ITEM_STAT>
			<ON_HOLD_YN></ON_HOLD_YN>
			<PENALIZABLE_YN></PENALIZABLE_YN>
			<ALLOW_PAP_YN></ALLOW_PAP_YN>
			<AS_PAYMENT_YN>"T"</AS_PAYMENT_YN>
			<CUTOFF_YN></CUTOFF_YN>
			<SUBJECT_TO_INTEREST_YN></SUBJECT_TO_INTEREST_YN>
			<PAY_AGENT></PAY_AGENT>
			<ITEM_CMTS>{EmailAddress on Payment Record}</ITEM_CMTS>
                       <INVOICE_NO></INVOICE_NO>
		</Params>
</AddARItems>
</Request>

All donations will go to the same accounts receivable item code
Add new Payment Type: 
Donations
Add new Payment Code: 
DONATE-PMT
 
08/06/2025 Following changes only for BID 3587 Chugarch Cayenta  requested a swap due to AUS to Cayenta migration
<SOURCE_SPEC1>{Customer Phone - IF Bid 3587 : Payment Message}</SOURCE_SPEC1>
<SOURCE_SPEC2>{Payment GUID}</SOURCE_SPEC2>
<Reply>
  <AddARItem>
    <Params>
      <STATUS></STATUS>
      <STATUS_DESC></STATUS_DESC>
    </Params>
  <STATUS></STATUS>
  </AddARItem>
</Reply>

Include Credits & Chargebacks?
Credits
? Yes
To pump credits, IC sets advanced setting #114 to 1.  The transaction type is identified as "6" -credit
Chargebacks
? No
Sent a Negative value, using dash indicator?
 Yes
If biller advanced setting 64, 65 and 104 are not configured, biller uses the following hardcoded Payment Methods:
IVR
OBD
TEXT
CSR1X
ICPOS
AUTO
PAYNEARME
WEB
Data Pump: ACH Reject 
Cayenta_AddReturnedCheck
Used to post ACH Rejects to the client’s system in near real-time 
<Request>
<AddReturnedCheck>
<Params>
	<PAYMENT_REF></PAYMENT_REF>
	<REASON_CD>{AdvSetting 106 or ""}</REASON_CD>
	<SUBSYSTEM_ID>"UM"</SUBSYSTEM_ID>
	<SOURCE_REF>"RCPT"</SOURCE_REF>
	<COLLECTION_STREAM></COLLECTION_STREAM>
	<CHECK_AMT>{PaymentAmount}</CHECK_AMT>
	<BANK_ID></BANK_ID>
	<BRANCH_ID></BRANCH_ID>
	<NSF_LETTER_YN></NSF_LETTER_YN>
</Params>
</AddReturnedCheck>
</Request>

<Reply>
  <AddReturnedCheck>
    <Params>
      <STATUS>0</STATUS>
      <STATUS_DESC></STATUS_DESC>
		<FOLIO_NO></FOLIO_NO>
		<CHECK_AMT></CHECK_AMT>
    </Params>
  </AddReturnedCheck>
</Reply>

No - C Code
(In progress) We will populate COLLECTION_STREAM with values from a new advanced setting that will be determined when Jira 
INT-4619
 is complete.
Data Pump: Void 
Cayenta_AdjARItem
Used to adjusts an accounts receivable item to the client’s system in near real-time
Void: full refund  
<Request>
<AdjARItem>
<Params>
	<ITEM_NO></ITEM_NO>
	<ITEM_TP></ITEM_TP>
	<ITEM_DT></ITEM_DT>
	<ITEM_AMT></ITEM_AMT>
	<TAX_CD></TAX_CD>
	<TAXABLE_AMT></TAXABLE_AMT>
	<ADJ_REASON_CD></ADJ_REASON_CD>
	<ITEM_CMTS></ITEM_CMTS>
</Params>
</AdjARItem>
</Request>

<Reply>
  <AdjARItem>
    <Params>
      <STATUS>0</STATUS>
    </Params>
    <STATUS>0</STATUS>
  </AdjARItem>
</Reply>

Return Codes:
0 - The AdjARItem request succeeded
<0 - An error occurred
Required Parameters:
ITEM_NO - Identifies an existing AR item that the function will adjust. <ITEM_NO> for test: 205184, 205063, 205064, 204987
ITEM_DT - Effective date of the AR adjustment. If the return is for today, it can be left blank.
ITEM_AMT - The function will generate an adjustment AR item with this amount. A value of zero indicates a full refund. For a partial refund, is the difference between the original AR item amount and the refund amount.
ITEM_AMT = 0: Void (full refund)
Data Pump: Credit/Refund
Cayenta_AdjARItem
Used to adjusts an accounts receivable item to the client’s system in near real-time
Allow partial refund 
<Request>
<AdjARItem>
<Params>
	<ITEM_NO></ITEM_NO>
	<ITEM_TP></ITEM_TP>
	<ITEM_DT></ITEM_DT>
	<ITEM_AMT></ITEM_AMT>
	<TAX_CD></TAX_CD>
	<TAXABLE_AMT></TAXABLE_AMT>
	<ADJ_REASON_CD></ADJ_REASON_CD>
	<ITEM_CMTS></ITEM_CMTS>
</Params>
</AdjARItem>
</Request>

ITEM_AMT (N(15, 2): Required tag. For partial refund it must be a value greater than 0 and less then original AR item amount. If ITEM_AMT = 0, it will be a void payment. 
<Reply>
  <AdjARItem>
    <Params>
      <STATUS>0</STATUS>
    </Params>
    <STATUS>0</STATUS>
  </AdjARItem>
</Reply>

Return Codes:
0 - The AdjARItem request succeeded
<0 - An error occurred
Required Parameters:
ITEM_NO - Identifies an existing AR item that the function will adjust. <ITEM_NO> for test: 205184, 205063, 205064, 204987
ITEM_DT - Effective date of the AR adjustment. If the return is for today, it can be left blank.
ITEM_AMT - The function will generate an adjustment AR item with this amount. A value of zero indicates a full refund. For a partial refund, is the difference between the original AR item amount and the refund amount.
Data Pump: Paperless Enrollment
AddAlert(IC-_PostPaperLessChangeXML)
Used to post status changes of Customer’s Paperless to the client’s system in near real-time 
<Request>
<AddAlert>
		<Params>
			<OWNERSHIP_CD>"ACCT"</OWNERSHIP_CD>
			<ALERT_KEY>{Account Number}</ALERT_KEY>
			<ALERT_KEY_CUSTOM></ALERT_KEY_CUSTOM>
			<ALERT_CD>{Adv Setting 47}</ALERT_CD>
			<ALERT_ON_DT>{Today 'yyyyMMddHHmmssff'}</ALERT_ON_DT>
			<ADDRESSEE_CD>"ALL"</ADDRESSEE_CD>
			<ALERT_CMTS></ALERT_CMTS>
		</Params>
</AddAlert>
</Request>

<Reply>
  <AddAlert>
    <Params>
      <STATUS></STATUS>
    </Params>
  <STATUS></STATUS>
  </AddAlert>
</Reply>

Data Pump: AutoPay Enrollment
AddAlert(IC- _PostAutopayChangeXML)
Used to post status changes of Customer’s Autopay to the client’s system in near real-time
<Request>
<AddAlert>
		<Params>
			<OWNERSHIP_CD>"ACCT"</OWNERSHIP_CD>
			<ALERT_KEY>{Account Number}</ALERT_KEY>
			<ALERT_KEY_CUSTOM></ALERT_KEY_CUSTOM>
			<ALERT_CD>{Adv Setting 46}</ALERT_CD>
			<ALERT_ON_DT>{Today 'yyyyMMddHHmmssff'}</ALERT_ON_DT>
			<ADDRESSEE_CD"ALL"></ADDRESSEE_CD>
			<ALERT_CMTS></ALERT_CMTS>
		</Params>
</AddAlert>
</Request>

<Reply>
  <AddAlert>
    <Params>
      <STATUS></STATUS>
    </Params>
  <STATUS></STATUS>
  </AddAlert>
</Reply>
Data Pump: Email Address and Phone Number
Display:
GetAccount
Display: GetPhoneRecords
New: AddPersonPhone(Email Address only)
Update: SetPhone(All Phone Number changes)
Use GetAccount API to get person number on the account.
Use GetPhoneRecords to display all phone and email records set up for the person record. 
Use AddPersonPhone to adds a new phone/email record and optionally sets it as the
person's default phone.
Use SetPhone to update a new phone phone or an existing email record.
<Request>
    <GetAccount>
    <Params>
        <ACCOUNT_NO>{AccountNumber}</ACCOUNT_NO>
        <PREPAY_INFO_YN></PREPAY_INFO_YN>
        <FMT_PREPAY_YN></FMT_PREPAY_YN>
    </Params>
    </GetAccount>
</Request>
Sample Account Number: 2003708
<Request>
    <GetPhoneRecords>
        <Params>
            <PERSON_NO></PERSON_NO>
        </Params>
    </GetPhoneRecords>
</Request>
Sample Person Number: 1020424 (Only use for Email Address change)
<Request>
    <AddPersonPhone>
    <Params>
        <PERSON_NO>1020424</PERSON_NO>
        <PHONE_CD></PHONE_CD>
        <PHONE_NO>test@ictest.com</PHONE_NO>
        <ACTIVE_DT></ACTIVE_DT>
        <INACTIVE_DT></INACTIVE_DT>
        <EXTENSION_NO></EXTENSION_NO>
        <DEFAULT_YN>T</DEFAULT_YN>
        <PHONE_CMTS>Customer set via InvoiceCloud.</PHONE_CMTS>
    </Params>
</AddPersonPhone>
</Request>
Sample Person Number: 1020424 (All Phone Number Changes)
<Request>
    <SetPhone>
    <Params>
        <PERSON_NO>1020424</PERSON_NO>
        <PHONE_SEQ></PHONE_SEQ>
        <PHONE_CD>HOME</PHONE_CD>
        <PHONE_NO>1122345678</PHONE_NO>
        <EXTENSION_NO></EXTENSION_NO>
        <PHONE_CMTS></PHONE_CMTS>
        <ACTIVE_DT></ACTIVE_DT>
        <INACTIVE_DT></INACTIVE_DT>
        <ACCOUNT_DFLT_YN>T</ACCOUNT_DFLT_YN>
        <PERSON_DFLT_YN>T</PERSON_DFLT_YN>
        <PHONE_CMTS>Customer set via InvoiceCloud.</PHONE_CMTS>
        <ACCOUNT_NO>2003708</ACCOUNT_NO>
    </Params>
    </SetPhone>
</Request>
To update email address, PERSON_NO and PHONE_CD are required. PHONE_NO can be either phone or email.
Additional Tags:
ACCOUNT_DFLT_YN (T/F): Determines whether the given phone number is to be the default phone number for the given account. When ACCOUNT_DFLT_YN is T, SetPhone sets the CO_PHONE_SEQ field in the Account table to the value of the PHONE_SEQ. 
The function ignores
ACCOUNT_DFLT_YN if the request does not provide an
ACCOUNT_NO.
PERSON_DFLT_YN (T/F): Determines whether the phone number is to be the default phone number for the given person. When PERSON_DFLT_YN is T, SetPhone sets the
PHONE_SEQ_DFLT field in the Person table to the value of the PHONE_SEQ.
Note: ACCOUNT_DFLT_YN and PERSON_DFLT_YN will only for Data Pump Phone Number.
PHONE_CMTS (String): Comment indicates that change is set via Invoice Cloud. 
GetAccount response
xml
<Reply transNo="239690" pid="9364">
    <GetAccount version="1.1">
        <Params>
            <ACCOUNT_NO>2003708</ACCOUNT_NO>
            <ACCOUNT_NO_CUSTOM>1176500600021202</ACCOUNT_NO_CUSTOM>
            <ACCOUNT_NO_CUSTOM_2>0002120211765006</ACCOUNT_NO_CUSTOM_2>
            <PERSON_NO>1020424</PERSON_NO>
            <APPLICATION_NO/>
            <CYCLE_CD>05</CYCLE_CD>
            <ELIG_TXROLLOVER_YN>F</ELIG_TXROLLOVER_YN>
            <CUSTOM_BILL_ID/>
            <TITLE_CD/>
            <PERSON_FNM>CLARK</PERSON_FNM>
            <PERSON_MNM/>
            <PERSON_LNM>BLANCHARD</PERSON_LNM>
            <ADDR_SEQ_DFLT>1</ADDR_SEQ_DFLT>
            <ADDR_SEQ_OVRD/>
            <CO_PHONE_SEQ>1</CO_PHONE_SEQ>
            <IN_CARE_OF_OVRD/>
            <ENVELOPE_MEMO_OVRD/>
            <ADDR_FUTURE_CHG_DT/>
            <FUTURE_ADDR_SEQ/>
            <FUTURE_INCAREOF/>
            <FUTURE_ENVMEMO/>
            <ACCOUNT_STAT>INBIL</ACCOUNT_STAT>
            <ACCOUNT_STAT_START_DT>20010531</ACCOUNT_STAT_START_DT>
            <ACCOUNT_STAT_END_DT/>
            <AVG_BILLING_YN>F</AVG_BILLING_YN>
            <AVG_DFLT_AMT/>
            <BILLING_STAT>REGLR</BILLING_STAT>
            <CLOSED_YN>T</CLOSED_YN>
            <OK_TO_BILL_YN>F</OK_TO_BILL_YN>
            <BILL_COPIES/>
            <BILL_COUNT>0</BILL_COUNT>
            <ACCOUNT_CLASS_DFLT>RES</ACCOUNT_CLASS_DFLT>
            <ALLOW_DAYS_LATE/>
            <SELECT_CD/>
            <OVERDUE_YN>F</OVERDUE_YN>
            <LAST_BILL_DT>20231116</LAST_BILL_DT>
            <LAST_BILL_TM/>
            <LAST_BILL_AMT>602.24</LAST_BILL_AMT>
            <TAX_EXEMPT_YN>F</TAX_EXEMPT_YN>
            <GENERIC_1/>
            <GENERIC_2/>
            <GENERIC_3/>
            <CO_BYPASS_YN>F</CO_BYPASS_YN>
            <INTEREST_EXEMPT_YN>F</INTEREST_EXEMPT_YN>
            <BYPASS_END_DT/>
            <FUTURE_CYCLE_CD/>
            <FUTURE_CYCLE_DT/>
            <CREDIT_SCORE>2</CREDIT_SCORE>
            <CREDIT_RATING_CD>EXCEL</CREDIT_RATING_CD>
            <CREDIT_EXPIRY_DT>20250119</CREDIT_EXPIRY_DT>
            <LIEN_STATUS/>
            <LIEN_AMT/>
            <BYPASS_WRITE_OFF_YN>F</BYPASS_WRITE_OFF_YN>
            <HOLD_WRITE_OFF_YN>F</HOLD_WRITE_OFF_YN>
            <LANGUAGE_CD>ENG</LANGUAGE_CD>
            <NO_BILL_START_DT/>
            <NO_BILL_END_DT/>
            <REBILL_AS_INSTBILL>F</REBILL_AS_INSTBILL>
            <WELFARE_AGENCY_YN>F</WELFARE_AGENCY_YN>
            <ATT_ON_HOLD_YN>F</ATT_ON_HOLD_YN>
            <ATT_ON_HOLD_END_DT/>
            <BYPASS_WRTOF_END_DT/>
            <REBILL_PENDING_YN>F</REBILL_PENDING_YN>
            <BILL_SORT_SEQ_CD/>
            <MIN_BILL_AMT/>
            <MIN_BILL_TAXABLE_YN>F</MIN_BILL_TAXABLE_YN>
            <MIN_BILL_DISCOUNTABLE_YN>F</MIN_BILL_DISCOUNTABLE_YN>
            <ARCHIVE_NO/>
            <HIGH_BILL_AMT/>
            <LOW_BILL_AMT/>
            <BUDGET_BILL_TP/>
            <FORCE_FINAL_YN>F</FORCE_FINAL_YN>
            <ACCOUNT_CMTS/>
            <V_NAME> CLARK BLANCHARD </V_NAME>
            <V_AR_BALANCE_DUE></V_AR_BALANCE_DUE>
            <V_AR_BALANCE_NET></V_AR_BALANCE_NET>
            <V_CREDIT_SCORE></V_CREDIT_SCORE>
            <V_AR_OVERDUE_AMT></V_AR_OVERDUE_AMT>
            <V_CREDIT_RATING_CD></V_CREDIT_RATING_CD>
            <V_HAS_NSF_YN></V_HAS_NSF_YN>
            <V_PARSE_NAME></V_PARSE_NAME>
            <ACTIVE_PAYARR_YN>T</ACTIVE_PAYARR_YN>
            <SSN></SSN>
            <LICENSE_NO></LICENSE_NO>
            <STATUS></STATUS>
            <SUMMARY_BILL_YN>F</SUMMARY_BILL_YN>
            <NEXT_CYCLE_METER_READ_DT></NEXT_CYCLE_METER_READ_DT>
            <PREPAY_NO></PREPAY_NO>
            <START_DT></START_DT>
            <END_DT></END_DT>
            <PREPAY_STAT></PREPAY_STAT>
            <PRIORITY_DEBT_PCT></PRIORITY_DEBT_PCT>
            <PREPAY_AMT></PREPAY_AMT>
            <UNBILLED_METERED_AMT></UNBILLED_METERED_AMT>
            <UNBILLED_NONMETERED_AMT></UNBILLED_NONMETERED_AMT>
            <PREPAY_BALANCE></PREPAY_BALANCE>
            <DAYS_REMAINING></DAYS_REMAINING>
            <COST_PER_DAY></COST_PER_DAY>
            <LAST_CALC_DTM></LAST_CALC_DTM>
            <LAST_PAY_DT></LAST_PAY_DT>
            <PREPAY_CMTS></PREPAY_CMTS>
            <LAST_NOTIFICATION_DTM></LAST_NOTIFICATION_DTM>
            <THRESHOLD_METHOD></THRESHOLD_METHOD>
            <THRESHOLD_AMT></THRESHOLD_AMT>
            <STATUS_DESC></STATUS_DESC>
        </Params>
      <STATUS>0</STATUS>
    </GetAccount>
</Reply>
GetPhoneRecords response:
xml
<Reply transNo="239693" pid="11124">
    <GetPhoneRecords version="1.1">
        <Params>
            <STATUS>0</STATUS>
            <PHONE_COUNT>2</PHONE_COUNT>
            <PHONE>
                <PHONE_SEQ>1</PHONE_SEQ>
                <ACTIVE_DT>20110407</ACTIVE_DT>
                <INACTIVE_DT/>
                <PHONE_CD>HOME</PHONE_CD>
                <PHONE_NO>4258811818</PHONE_NO>
                <EXTENSION_NO/>
                <PHONE_CMTS>H</PHONE_CMTS>
                <PERSON_PHONE_YN>T</PERSON_PHONE_YN>
                <ACCOUNT>
                    <ACCOUNT_NO>2003708</ACCOUNT_NO>
                </ACCOUNT>
            </PHONE>
AddPersonPhone response:
<Reply transNo="239698" pid="9354">
    <AddPersonPhone version="1.1">
        <Params>
            <PHONE_SEQ>1</PHONE_SEQ>
            <STATUS>0</STATUS>
        </Params>
        <STATUS>0</STATUS>
    </AddPersonPhone>
</Reply>
SetPhone response:
xml
<Reply transNo="239711" pid="9364">
    <SetPhone version="1.1">
        <Params>
            <PHONE_SEQ>1</PHONE_SEQ>
            <STATUS>0</STATUS>
        </Params>
        <STATUS>0</STATUS>
    </SetPhone>
</Reply>
SetPhone response error if PHONE_CD is missing: 
<Reply transNo="239725" pid="11124">
    <SetPhone version="1.1">
        <Params>
            <STATUS>-100</STATUS>
            <STATUS_DESC>PHONE_CD tag is missing or is empty.</STATUS_DESC>
        </Params>
        <STATUS>0</STATUS>
    </SetPhone>
</Reply>
To update an existing email address record for a customer the SetPhone API needs one of the following sets of information:
Either Person_No and Phone_Seq, with Phone_CD blank
Or Person_No and Phone_CD, with Phone_Seq blank
In either case the API is then looking for the record that matches the values sent.
If using Phone_CD, then the value(s) used will be specific to the county, although generally they will be using EBILL and EMAIL, where the EBILL record is used for eBilling and EMAIL record for any other email addresses.
if you use Phone_Seq, you don’t need to send a Phone_cd value. The value of the Phone_seq would be provided when you get the existing records from the CIS.
Phone number data pump scenarios when using <SetPhone> function: 
Adding new phone number that doesn’t exist in Cayenta:
If PHONE_SEQ not presents, <SetPhone> should automate the next PHONE_SEQ in the request when adding a new phone number. (Note: Do not add PHONE_SEQ to new accounts, keep all the tags we have already coded. <ACCOUNT_DFLT_YN>, <PERSON_DFLT_YN>, <PHONE_CMTS>)
Updating existing phone number:
In <SetPhone>, we're going to get the latest PHONE_SEQ number with PHONE_CD is RES. When records are found and use that to update the PHONE_SEQ record on their side. (keep all the tags we have already coded. <ACCOUNT_DFLT_YN>, <PERSON_DFLT_YN>, <PHONE_CMTS>)
Remove phone number (empty number):
When a customer wants to remove their phone number.  All we need is to inactivate it which including the <INACTIVE_DT> tag.
For example:  if the current SEQ 2 is the RES and active number, we need just add an <INACTIVE_DT> with the current date.
For Bellevue, validate PHONE_CD values related to email addresses are EBILL and EMAIL.
Additional Tags are currently only for Johnson County Wastewater integration. 
Data Pump: Mailing Address
Display:
GetAccountBillingAddress
Update: SetAccountBillingAddress
Update:
AddContact
POST:
The GetAccountBillingAddress function retrieves the default mailing address for a given account.
The SetAccountBillingAddress
function adds a new record in the Person Address table. The PRIMARY_LOCATION_YN tag to set the mailing address as the default mailing address for the account.  You can leave this tag empty if county doesn’t have any preferences to set default mailing address for the account.
The AddContact API is for creating a contact record or a transaction record to track changes that is made to the account which is useful for CSR or system admin to know when IC made a change to an account in Cayenta.  It is best practice to call AddContact API right after a successful response from calling the SetAccountBillingAddress API. 
<Request>
    <GetAccountBillingAddress>
        <Params>
            <ACCOUNT_NO>2000341</ACCOUNT_NO>
        </Params>
    </GetAccountBillingAddress>
</Request>
Sample Account Number: 2000341
<Request>
    <SetAccountBillingAddress>
        <Params>
            <ACCOUNT_NO>2000341</ACCOUNT_NO>
            <ACTIVE_DT></ACTIVE_DT>
            <INACTIVE_DT></INACTIVE_DT>
            <SEASON_STR_MTH></SEASON_STR_MTH>
            <SEASON_STR_DAY></SEASON_STR_DAY>
            <SEASON_END_MTH></SEASON_END_MTH>
            <SEASON_END_DAY></SEASON_END_DAY>
            <ADDRESS_CD>FWD</ADDRESS_CD>
            <HOUSE_NO></HOUSE_NO>
            <STREET_PFX_DIR></STREET_PFX_DIR>
            <STREET_NM>180 Main ST</STREET_NM>
            <STREET_NM_SFX></STREET_NM_SFX>
            <STREET_SFX_DIR></STREET_SFX_DIR>
            <SEC_ADDR_ID></SEC_ADDR_ID>
            <SEC_ADDR_RANGE></SEC_ADDR_RANGE>
            <TER_ADDR_ID></TER_ADDR_ID>
            <TER_ADDR_RANGE></TER_ADDR_RANGE>
            <ADDR_ID_4></ADDR_ID_4>
            <ADDR_RANGE_4></ADDR_RANGE_4>
            <LOCATOR_ID></LOCATOR_ID>
            <ROUTE_PFX></ROUTE_PFX>
            <ADDR_ROUTE></ADDR_ROUTE>
            <CITY>Tampa</CITY>
            <PROVINCE_CD>FL</PROVINCE_CD>
            <POSTAL_CD>33605</POSTAL_CD>
            <PO_BOX_NO></PO_BOX_NO>
            <DELIVERY_INST_TP></DELIVERY_INST_TP>
            <DELIVERY_INST_NM></DELIVERY_INST_NM>
            <COUNTRY_CD></COUNTRY_CD>
            <IN_CARE_OF></IN_CARE_OF>
            <ENVELOPE_MEMO></ENVELOPE_MEMO>
            <LIS_CD></LIS_CD>
            <LIS_NO></LIS_NO>
            <LIS_VALIDAT_STAT></LIS_VALIDAT_STAT>
            <PRIMARY_LOCATION_YN></PRIMARY_LOCATION_YN>
            <ADDRESS_CMTS></ADDRESS_CMTS>
        </Params>
    </SetAccountBillingAddress>
</Request>
Additional Tag:
ADDRESS_CD (String): Identifies the purpose of the address, e.g. residence or business. Must be a sub-code of control code SG/ADDCD.
<Request>
    <AddContact>
        <Params>
            <CONTACT_TP>WEB</CONTACT_TP>
            <ACCOUNT_NO>2000341</ACCOUNT_NO>
            <CONTACT_DESC>Invoice Cloud Web - Mailing Address Update - 180 MAIN ST</CONTACT_DESC>
            <RECEIVED_DTM>20240404</RECEIVED_DTM>
            <RECEIVED_BY>INVCLD</RECEIVED_BY>
            <ATTACH_PARAMETERS></ATTACH_PARAMETERS>
            <FILE></FILE>
            <UPLOAD_YN></UPLOAD_YN>
            <SOURCE_CD></SOURCE_CD>
            <SOURCE_ID></SOURCE_ID>
        </Params>
    </AddContact>
</Request>
CONTACT_TP needs verify by county 
CONTACT_DESC: Invoice Cloud Web - Mailing Address Update - <STREET_NM>
RECEIVED_DTM: Current date with YYYYMMDD format
RECEIVED_BY: Data pump username provided by county
GetAccountBillingAddress Response:
<Reply transNo="3158" pid="11908">
    <GetAccountBillingAddress version="1.1">
        <Params>
            <PERSON_NO>1001154</PERSON_NO>
            <ADDRESS_SEQ>2</ADDRESS_SEQ>
            <ACTIVE_DT>20160318</ACTIVE_DT>
            <INACTIVE_DT/>
            <SEASON_STR_MTH/>
            <SEASON_STR_DAY/>
            <SEASON_END_MTH/>
            <SEASON_END_DAY/>
            <ADDRESS_CD/>
            <BUILDING_NAME/>
            <HOUSE_NO/>
            <STREET_PFX_DIR/>
            <STREET_NM>10516 BARTON ST</STREET_NM>
            <STREET_NM_SFX/>
            <STREET_SFX_DIR/>
            <SEC_ADDR_ID/>
            <SEC_ADDR_RANGE/>
            <TER_ADDR_ID/>
            <TER_ADDR_RANGE/>
            <ROUTE_PFX/>
            <ADDR_ROUTE/>
            <CITY>OVERLAND PARK</CITY>
            <PROVINCE_CD>KS</PROVINCE_CD>
            <POSTAL_CD>66214</POSTAL_CD>
            <PO_BOX_NO/>
            <DELIVERY_INST_TP/>
            <DELIVERY_INST_NM/>
            <COUNTRY_CD/>
            <IN_CARE_OF/>
            <ENVELOPE_MEMO/>
            <DEFAULT_YN/>
            <LIS_CD/>
            <LIS_NO/>
            <LIS_VALIDAT_STAT/>
            <PRIMARY_LOCATION_YN>F</PRIMARY_LOCATION_YN>
            <ADDR_ID_4/>
            <ADDR_RANGE_4/>
            <LOCATOR_ID/>
            <ADDRESS_CMTS/>
            <ACCOUNT_NO>2000341</ACCOUNT_NO>
            <ACCOUNT_NO_CUSTOM>133110</ACCOUNT_NO_CUSTOM>
            <STATUS>0</STATUS>
            <STATUS_DESC>Account Billing Address 2000341 found.</STATUS_DESC>
        </Params>
    </GetAccountBillingAddress>
</Reply>
SetAccountBillingAddress Response:
<Reply transNo="3236" pid="14388">
    <SetAccountBillingAddress version="1.1">
        <Params>
            <STATUS>0</STATUS>
            <STATUS_DESC>Account Address 2000341 updated. </STATUS_DESC>
        </Params>
        <STATUS>0</STATUS>
    </SetAccountBillingAddress>
</Reply>
AddContact Response:
<Reply transNo="3590" pid="5248">
    <AddContact version="1.1">
        <Params>
            <STATUS>0</STATUS>
            <CONTACT_NO>3857241</CONTACT_NO>
            <STATUS_DESC>Contact Created.</STATUS_DESC>
        </Params>
        <STATUS>0</STATUS>
    </AddContact>
</Reply>
Status code:
0
: The request succeeded.
-4
 Invalid Account Number:
Either ACCOUNT_NO or
ACCOUNT_NO_CUSTOM failed to
match a record in Cayenta, or
more than one account has the
specified ACCOUNT_NO_CUSTOM.
-100
 ACCOUNT_NO or
ACCOUNT_NO_CUSTOM tag is
missing or is empty:
Neither the ACCOUNT_NO nor the
ACCOUNT_NO_CUSTOM parameter appears in the request along with a value.
Less than 0
 Unable to update account phone! (XX) (where XX is a more descriptive error message):
An error occurred. XX provides a
detailed error message
If the existing record already has an inactive date, or the active date of the previous record is
greater than or equal to the requested active date for the new record, then
SetAccountBillingAddress leaves the existing record's inactive date as-is. Otherwise,
SetAccountBillingAddress changes the inactive date of the existing record to the day before the
active date requested for the new record.
SetAccountBillingAddress only updates the mailing address information for the
account specified in the request. Changing the mailing address information for
multiple accounts associated to a given person requires a separate
SetAccountBillingAddress request for each account.
Note: We always add new address and active/inactive date will be used to verify which is the most recent data. There is different from normal update process. 
Additional Tag is currently only for Johnson County Wastewater integration. Value FWD is a custom code for JCW in Cayenta platform.
Data Pump: VetexOne Registration Alert
AddAlert
Used to post registration status updates from the VetexOne system to the client’s system in near real-time 
<Request>
<AddAlert>
		<Params>
			<OWNERSHIP_CD>"ACCT"</OWNERSHIP_CD>
			<ALERT_KEY>{Account Number}</ALERT_KEY>
			<ALERT_KEY_CUSTOM></ALERT_KEY_CUSTOM>
			<ALERT_CD>CSTRG</ALERT_CD>
			<ALERT_ON_DT>{Today 'yyyyMMddHHmmssff'}</ALERT_ON_DT>
			<ADDRESSEE_CD>"ALL"</ADDRESSEE_CD>
			<ALERT_CMTS>Registration Alert added by Invoice Cloud</ALERT_CMTS>
		</Params>
</AddAlert>
</Request>

<Reply>
  <AddAlert>
    <Params>
      <STATUS></STATUS>
    </Params>
  <STATUS></STATUS>
  </AddAlert>
</Reply>

ALERT_CD is biller-specific and is configured individually for each biller in the Cayenta system. ALERT_CMTS is a comment added to the Cayenta system and should be specific to each county. 
PDF Linking
Get_StmntPdf
Used to retrieve invoice images for display
Sample URL:
https://vmupay.vinelandcity.org:444/cayentaws/service/BILLPDF
PDFURL 
= AdvancedSetting 20
UserName = AdvancedSetting 21
Password = AdvancedSetting 22
Account_No = Display Accountnumber
Invoice_No = BillerInvoiceNumer
Bill_Dt = Invoice Date (yyyy-MM-ddT00:00:00)
we check if the response has contents in it, if it does, then we render the PDF image response
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: XML
File Naming Convention: billheader_yyyyMMddhhmmss.xml
File Delimiter: N/A
Specification
: (See sample)
Add Phone number to the Standard Cayenta Invoice mapping, and it’s specific only to Helix Water District (BID 968) and Helix Water District TEST (BID 973)
 
Add Payment Arrangement Amount field to the database. It will be stored and displayed in the payment route.
Add Email field to the Standard Cayenta Invoice mapping, and it’s specific to City of Clearwater Utility (BID 3047)  
Sample File: 
Payment Arrangement Amount Sample:
SFTP File Path: \ToInvoiceCloud\Invoices\UB
File Transfer Frequency: Daily
Field Mapping - Standard Cayenta Invoice Upload File Type
City of Clearwater is requesting a modification to their invoice file upload format. They would like to start passing the Email field in the invoice files. 
Sample file: 
 
New File Type: (858) 
IF_Cayenta_SSO - UB REG - Email
 
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Record Type
1
RowType
N
TRUE
N/A - IC to always use ‘FH’
File Header
2
BillerGuid
N
TRUE
N/A - value generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A - value generated by IC using current date
File Header
5
InvoiceCount
N
TRUE
N/A - value generated by IC using invoice count in the file
File Header
6
TotalInvoiceAmount
Y
TRUE
N/A - value generated by IC using invoice balances in the file
File Header
7
RowType
N
TRUE
N/A - IC to always use ‘IH’
Invoice Header
8
RecordType
N
TRUE
N/A - IC to always use type 'N'
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - value generated by IC - BIF Customization
Invoice Header
10
InvoiceNumber
Y
TRUE
UB + Invoice_No+InvoiceDate.(MMDDYYYY)
Text
Invoice Header
11
InvoiceDate
Y
TRUE
Bill_DT
Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due_DT
Date
Invoice Header
13
TotalAmountDue
Y
TRUE
Gross_Amount
Currency
Invoice Header
38
Custom1
Y
FALSE
Service_Address_2
Text
Invoice Header
39
Custom2
Y
FALSE
“BUDGET” or ““
Text
 If BillTP.Equals("EQUAL BILLING") Then
                    Return "BUDGET"
else return ""
Invoice Header
41
Custom4
Y
FALSE
Service_Address_1
Text
Invoice Header
42
Custom5
Y
FALSE
Cycle_CD
Invoice Header
47
Custom10
Y
FALSE
Mailing_Address_1
Text
Invoice Header
93
BalanceDue
Y
FALSE
Gross_Amount
Currency
Invoice Header
94
Custom11
Y
FALSE
Service_Address_2
Text
Invoice Header
252
InvoiceTypeID
N
TRUE
“Utility” (42)
Always Utility (42)
Invoice Header
346
BillerBillYear
Y
FALSE
InvoiceDate.Year
Invoice Header
347
BillerInvoiceNumber
Y
FALSE
Invoice_No
Text
Invoice Header
407
PastDue
Y
FALSE
Past_Due_Amount (Update by RTDR <PASTDUE_AMT>)
Currency
Invoice Header
412
PaymentArrangementAmount
Y
F
<Pay_Arrangement_Amt>
Money
Invoice Header
58
RowType
N
TRUE
N/A - IC to always use ‘CR’
Customer Record
59
AccountNumber
Y
TRUE
Account_No
Text
Customer Record
60
CustomerName
Y
TRUE
Customer_Name
Text
Customer Record
61
Address1
Y
FALSE
Mailing_Address
Text
Customer Record
63
City
Y
FALSE
Mailing_Address_2.City
Text
Customer Record
64
State
Y
FALSE
Mailing_Address_2.State
Text
Customer Record
65
Zip
Y
FALSE
Mailing_Address_2.Zip
Text
Customer Record
66
Phone
Y
FALSE
Mailing_Address_2.Phone
Text
This is specific only to Helix Water District BID 968 and test BID 973
Customer Record
67
EmailAddress
Y
FALSE
Email
Text
This is specific only to City of Clearwater BID 3047
Customer Record
373
DisplayAccountNumber
Y
FALSE
Account_No
Text
Customer Record
Field Mapping - Commercial Residential File Type
Summary
: (Inherits from Standard Cayenta File Type)
If the biller needs to split invoices into multiple types based on the account class, IC uses the Account_Class_Dflt field to map to the applicable IC InvoiceTypeID. IC configures this mapping with Advanced Setting 86 (Cayenta - Commercial Utility Codes) 
Text values listed after ‘6:’ map from the invoice file ‘Account_Class_Dflt’ to IC Invoice Type ID 6. All other text values from the invoice file 'Account_Class_Dflt’ map to IC Invoice Type ID 42.
Sample Biller: BID 1167
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Record Type
1
RowType
N
TRUE
N/A - IC to always use ‘FH’
File Header
2
BillerGuid
N
TRUE
N/A - value generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A - value generated by IC using current date
File Header
5
InvoiceCount
N
TRUE
N/A - value generated by IC using invoice count in the file
File Header
6
TotalInvoiceAmount
Y
TRUE
N/A - value generated by IC using invoice balances in the file
File Header
7
RowType
N
TRUE
N/A - IC to always use ‘IH’
Invoice Header
8
RecordType
N
TRUE
N/A - IC to always use type 'N'
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - value generated by IC - BIF Customization
Invoice Header
10
InvoiceNumber
Y
TRUE
UB + Invoice_No+InvoiceDate.(MMDDYYYY)
Text
Invoice Header
11
InvoiceDate
Y
TRUE
Bill_DT
Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due_DT
Date
Invoice Header
13
TotalAmountDue
Y
TRUE
Gross_Amount
Currency
Invoice Header
38
Custom1
Y
FALSE
Service_Address_2
Text
Invoice Header
39
Custom2
Y
FALSE
“BUDGET” or ““
Text
 If BillTP.Equals("EQUAL BILLING") Then
                    Return "BUDGET"
else return ""
Invoice Header
41
Custom4
Y
FALSE
Service_Address_1
Text
Invoice Header
42
Custom5
Y
FALSE
Cycle_CD
Invoice Header
47
Custom10
Y
FALSE
Mailing_Address_1
Text
Invoice Header
93
BalanceDue
Y
FALSE
Gross_Amount
Currency
Invoice Header
94
Custom11
Y
FALSE
Service_Address_2
Text
Invoice Header
252
InvoiceTypeID
N
TRUE
Account_Class_Dflt
InvoiceTypeID mapping depends on value in field Account_Class_Dflt.
Invoice Header
346
BillerBillYear
Y
FALSE
InvoiceDate.Year
Invoice Header
347
BillerInvoiceNumber
Y
FALSE
Invoice_No
Text
Invoice Header
407
PastDue
N
FALSE
RTDR <PASTDUE_AMT>
Currency
Invoice Header
412
PaymentArrangementAmount
Y
F
<Pay_Arrangement_Amt>
Money
Invoice Header
58
RowType
N
TRUE
N/A - IC to always use ‘CR’
Customer Record
59
AccountNumber
Y
TRUE
Account_No
Text
Customer Record
60
CustomerName
Y
TRUE
Customer_Name
Text
Customer Record
61
Address1
Y
FALSE
Mailing_Address
Text
Customer Record
63
City
Y
FALSE
Mailing_Address_2.City
Text
Customer Record
64
State
Y
FALSE
Mailing_Address_2.State
Text
Customer Record
65
Zip
Y
FALSE
Mailing_Address_2.Zip
Text
Customer Record
373
DisplayAccountNumber
Y
FALSE
Account_No
Customer Record
Field Mapping - Standard and Commercial and Residentials DREC
Summary
: (Same as Standard or Commercial Invoice Upload except for RecordType)
If the biller needs to deactivate invoices, they will provide invoices in the standard file format in a 
specific
 SFTP file path for deactivation. When invoices files are placed in this SFTP path, IC will import them using the mapping above with a RecordType = D
Sample Biller: BID 836
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Record Type
1
RowType
N
TRUE
N/A - IC to always use ‘FH’
File Header
2
BillerGuid
N
TRUE
N/A - value generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A - value generated by IC using current date
File Header
5
InvoiceCount
N
TRUE
N/A - value generated by IC using invoice count in the file
File Header
6
TotalInvoiceAmount
Y
TRUE
N/A - value generated by IC using invoice balances in the file
File Header
7
RowType
N
TRUE
N/A - IC to always use ‘IH’
Invoice Header
8
RecordType
N
TRUE
N/A - IC to always use type 'D'
Deactivate records
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - value generated by IC - BIF Customization
Invoice Header
10
InvoiceNumber
Y
TRUE
UB + Invoice_No+InvoiceDate.(MMDDYYYY)
Text
Invoice Header
11
InvoiceDate
Y
TRUE
Bill_DT
Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due_DT
Date
Invoice Header
13
TotalAmountDue
Y
TRUE
Gross_Amount
Currency
Invoice Header
38
Custom1
Y
FALSE
Service_Address_2
Text
Invoice Header
39
Custom2
Y
FALSE
“BUDGET” or ““
Text
 If BillTP.Equals("EQUAL BILLING") Then
                    Return "BUDGET"
else return ""
Invoice Header
41
Custom4
Y
FALSE
Service_Address_1
Text
Invoice Header
42
Custom5
Y
FALSE
Cycle_CD
Invoice Header
47
Custom10
Y
FALSE
Mailing_Address_1
Text
Invoice Header
93
BalanceDue
Y
FALSE
Gross_Amount
Currency
Invoice Header
94
Custom11
Y
FALSE
Service_Address_2
Text
Invoice Header
252
InvoiceTypeID
N
TRUE
“Utility” (42)
Always Utility (42)
Invoice Header
346
BillerBillYear
Y
FALSE
InvoiceDate.Year
Invoice Header
347
BillerInvoiceNumber
Y
FALSE
Invoice_No
Text
Invoice Header
407
PastDue
N
FALSE
RTDR <PASTDUE_AMT>
Currency
Invoice Header
412
PaymentArrangementAmount
Y
F
<Pay_Arrangement_Amt>
Money
Invoice Header
58
RowType
N
TRUE
N/A - IC to always use ‘CR’
Customer Record
59
AccountNumber
Y
TRUE
Account_No
Text
Customer Record
60
CustomerName
Y
TRUE
Customer_Name
Text
Customer Record
61
Address1
Y
FALSE
Mailing_Address
Text
Customer Record
63
City
Y
FALSE
Mailing_Address_2.City
Text
Customer Record
64
State
Y
FALSE
Mailing_Address_2.State
Text
Customer Record
65
Zip
Y
FALSE
Mailing_Address_2.Zip
Text
Customer Record
373
DisplayAccountNumber
Y
FALSE
Account_No
Customer Record
Field Mapping - Johnson County Water Cayenta Invoice Upload File Type
Johnson County Watsewater is requesting a modification to their invoice file upload format. They would like to start passing the AutoPayCollectionDate in the invoice files. Once the change is put in place, we will remove the BIF customization that is there to set autopay collection date and it should just be set by the AutoPayCollectionDate sent in the invoice file for each record in the file.
JCW sample Invoice: 
 
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Record Type
1
RowType
N
TRUE
N/A - IC to always use ‘FH’
File Header
2
BillerGuid
N
TRUE
N/A - value generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A - value generated by IC using current date
File Header
5
InvoiceCount
N
TRUE
N/A - value generated by IC using invoice count in the file
File Header
6
TotalInvoiceAmount
Y
TRUE
N/A - value generated by IC using invoice balances in the file
File Header
7
RowType
N
TRUE
N/A - IC to always use ‘IH’
Invoice Header
8
RecordType
N
TRUE
N/A - IC to always use type 'N'
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - value generated by IC - BIF Customization
Invoice Header
10
InvoiceNumber
Y
TRUE
UB + Invoice_No+InvoiceDate.(MMDDYYYY)
Text
Invoice Header
11
InvoiceDate
Y
TRUE
Bill_DT
Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due_DT
Date
Invoice Header
13
TotalAmountDue
Y
TRUE
Gross_Amount
Currency
Invoice Header
38
Custom1
Y
FALSE
Service_Address_2
Text
Invoice Header
39
Custom2
Y
FALSE
“BUDGET” or ““
Text
 If BillTP.Equals("EQUAL BILLING") Then
                    Return "BUDGET"
else return ""
Invoice Header
40
Custom3
Y
FALSE
Customer_No
Text
Invoice Header
41
Custom4
Y
FALSE
Service_Address_1
Text
Invoice Header
42
Custom5
Y
FALSE
Cycle_CD
Invoice Header
47
Custom10
Y
FALSE
Mailing_Address_1
Text
Invoice Header
93
BalanceDue
Y
FALSE
Gross_Amount
Currency
Invoice Header
94
Custom11
Y
FALSE
Service_Address_2
Text
Invoice Header
248
AutoPayCollectionDate
Y
FALSE
AutoPayCollectionDate
Date
Apr-19-2025
Invoice Header
252
InvoiceTypeID
N
TRUE
“Utility” (42)
Always Utility (42)
Invoice Header
346
BillerBillYear
Y
FALSE
InvoiceDate.Year
Invoice Header
347
BillerInvoiceNumber
Y
FALSE
Invoice_No
Text
Invoice Header
407
PastDue
Y
FALSE
Past_Due_Amount (Update by RTDR <PASTDUE_AMT>)
Currency
Invoice Header
58
RowType
N
TRUE
N/A - IC to always use ‘CR’
Customer Record
59
AccountNumber
Y
TRUE
Account_No
Text
Customer Record
60
CustomerName
Y
TRUE
Customer_Name
Text
Customer Record
61
Address1
Y
FALSE
Mailing_Address
Text
Customer Record
63
City
Y
FALSE
Mailing_Address_2.City
Text
Customer Record
64
State
Y
FALSE
Mailing_Address_2.State
Text
Customer Record
65
Zip
Y
FALSE
Mailing_Address_2.Zip
Text
Customer Record
66
Phone
Y
FALSE
Mailing_Address_2.Phone
Text
This is specific only to Helix Water District BID 968 and test BID 973
Customer Record
373
DisplayAccountNumber
Y
FALSE
Customer_No
Text
Customer Record
Payment/Lockbox File 
File Summary/Purpose: The purpose of this file is transfer cloud store donation payment data from IC to a Cayenta biller.
Specification: This payment export is currently only apply to BID 3426 - City of Bellevue
Field Mapping: 
BID 3426 City of Bellevue WA Technical Design
 
Advanced Settings
DataPump Donation Payments Code: 
DONATE-PMT
 (No payment type specific codes)
Setting
Description
Details and Logic
Value
3
SSO Customer Login URL
{
Biller Provided URL
}
4
Customer Portal Session Expire - Close Window?
0 - False or 1 - True
5
Customer Portal Home Button Redirect
0 - False or 1 - True
6
Customer Portal - Suppress Change Email
0 - False or 1 - True
8
RTDR EndPoint/WebService URL
{
Biller Provided URL
}
9
RTDR Username if Applicable
{
Biller Provided Username
}
10
RTDR Key or Password if Applicable
{
Biller Provided Password
}
11
DataPump Payments EndPoint/WebService URL
{
Biller Provided URL
}
12
DataPump Payments EndPoint/WebService Username
{
Biller Provided Username
}
13
DataPump Payments EndPoint/WebService Password
{
Biller Provided Password
}
14
DataPump Paperless EndPoint/WebService URL
{
Biller Provided URL
}
15
DataPump Paperless EndPoint/WebService Username
{
Biller Provided Username
}
16
DataPump Paperless EndPoint/WebService Password
{
Biller Provided Password
}
17
DataPump AutoPay EndPoint/WebService URL
{
Biller Provided URL
}
18
DataPump AutoPay EndPoint/WebService Username
{
Biller Provided Username
}
19
DataPump AutoPay EndPoint/WebService Password
{
Biller Provided Password
}
28
Cayenta - Customer Block EFT Indicator
This value has 4 positions separated by pipes where 4 different configurations can reside. Billers can configure their own indicators and how they function in Cayenta. The biller will need to provide IC the specific code for each.
Position Definitions:
BLOCK EFT AND BLOCK CC
BLOCK EFT (this position can support two indicators, separated by a ':' ) - see examples 2 and 5 below
BLOCK CC
BLOCK EFT AND BLOCK CC
 
EXAMPLES: 
(note-'XX' and ‘NONE’ are just placeholders for no action. You must confirm with the biller that they do not have a configured code set to ‘XX’ or ‘NONE’ that would trigger the block on IC)
CO|XX|XX|XX – Blocks EFT and CC when ‘CO’ is returned
NONE|CO:NOCHK|NOCC|NONE – Blocks EFT when ‘CO’ or ‘NOCHK’ are returned, Blocks CC when ‘NOCC’ is returned
XX|OFFNP:CONLY|XX|XX – Blocks EFT when ‘OFFNP’ or ‘CONLY’ are returned
XX|XX|NOCC|XX – Blocks CC when ‘NOCC’ is returned
CO|OFFNP:NOCHK|NOCC|XX – Blocks EFT and CC when ‘CO’ is returned, Blocks EFT when ‘OFFNP’ or ‘NOCHK’ are returned, Blocks CC when ‘NOCC’ is returned
{
Biller Block Payment Flags
}
32
Customer Profile - Set Block ACH/CC as ReadOnly
1
35
Service Version
2
46
Cayenta - Autopay Alert Flag
Biller Provided Autopay Flags
47
Cayenta - Paperless Alert Flag
Biller Provided Paperless Flags
64
DataPump Payments CC Code
Credit Card Payment Codes : {
PaymentSourceID
}(
CayPaymentCode
)|
65
DataPump Payments ACH Code
ACH Payment Codes : {
PaymentSourceID
}(
CayPaymentCode
)|
74
Cayenta - Request Prepended Key Value
XMLREQUEST= or APIREQUEST=
101
DataPump ACH Rejects EndPoint/WebService URL
{
Biller Provided URL
}
102
DataPump ACH Rejects EndPoint/WebService Username
{
Biller Provided Username
}
103
DataPump ACH Rejects EndPoint/WebService Password
{
Biller Provided Password
}
104
DataPump Payments Cash Code
{Biller Provide Code}
106
DataPump ACH Reject Code
{Biller Provide Code}
Example BID 2944
107
RTDR - Past Due Amount Key
The integration checks if there is a value stored in that advanced setting and if so, it uses that value to find the past due in the RTDR response, then use it to update the past due amount on IC
PASTDUE_AMT
116
DataPump Payments Paypal Code
Paypal Payment Codes : {
PaymentSourceID
}(
CayPaymentCode
)|
117
DataPump Payments Paypal Credit Code
Paypal Credit Payment Codes : {
PaymentSourceID
}(
CayPaymentCode
)|
118
DataPump Payments Venmo Code
Venmo Payment Codes : {
PaymentSourceID
}(
CayPaymentCode
)|
129
RTDR - Balance Due Amount Key
Field name from RTDR (example: BILLED_AND_OWING)
This setting allows the biller to configure which ‘balance’ field in the RTDR response they would like mapped to IC ‘BalanceDue’. Example BID 827
131
JSON Configuration
Update Cayenta’s invoice file import integration to accept phone numbers
(This is specific only to Helix Water District BID 968 and test BID 973)
Update Cayenta’s Data Pump to support phone number, email address and mailing address update. 
(This is specific only to Johnson County Wastewater, KS BID 4078 and test BID 4097)
{ "CayentaSSO": { "InvoiceConfig": { "IncludePhoneNumber": true } } }
{ "HarrisCayenta": { "DataPumpConfig": { "EmailSearchCd": "EBILL","PhoneSearchCd": "RES", "UpdateMailingAddress": true,"AddressCd": "FWD","BillerCustomizations": {"PhoneComments": "Customer set via InvoiceCloud.","AccountDefault": true,"PersonDefault": true,
"IncludeAccountNumber": true}}}}
148
RTDR Invoice Type Whitelist
This setting is expecting a number, or a series of numbers separated by commas. If this Advanced Setting is set and configured, RTDR will filter the invoice types and it will retrieve to only those set in this setting. Therefore, invoice types such as donations (e.g. 188) could be filtered out if the Advanced Setting is configured to only take in utility “42”. 
This is currently only implemented for Cayenta’s RTDR.
42
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
Biller Questionaire
AutoPayCollectionDate
Biller Questionaire
BalanceForward
Biller Questionaire: (should always be on)
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
Biller Questionaire
InvoiceDate
In File
InvoiceDueDate
In File
InvoiceFormatGuid
Biller Questionaire
InvoiceTypeID
N/A
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
N/A
PaymentExpirationDate
N/A
PaymentExpirationMessage
N/A
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
Biller Questionaire
ThirdNotifyRequestedDate
Biller Questonaire
User Interaction and Design
Data Flow - Invoice
att2315911200
2051866698
1
Chart1
IM
att2316795915
att2315878415
0
Data Flow - Adjustments
att2316337164
2051866698
1
Chart2
IM
att2316533767
att2315813277
0
Data Flow - Payment
att2316992517
2051866698
1
Chart3
IM
att2316861451
att2316664846
0
Data Flow - ACH Reject
att2317058065
2051866698
1
Chart4
IM
att2315747371
att2316533772
0
Data Flow - Paperless
att2315747376
2051866698
1
Chart5
IM
att2316632075
att2316107787
0
Data Flow - Bill Presentment
att2370371682
2051866698
1
Diagram1
IM
att2370535522
att2370732089
0
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
AgentConnect is used to redirect clerk to needed page on Invoice Cloud
User Stories
User starts on Cayenta portal and are redirected to IC for payments using CloudSSO Connect, autopay, and paperless
Invoice Cloud Web Services
API Name
API Use/Purpose
RemoteAuthentication
This allows Cayenta to authenticate remotely by providing credentials that are then cross-referenced with the database. When valid credentials are provided, we return a success true response along with a  RemoteAuthenticationToken for the account who’s credientials were provided.
ViewCustomerRecord
This allows Cayenta to view the Customers profile if found in our system by providing an account number. The API returns account information like Active Bit, Registration Bit, Autopay flag, PaperInvoices flag etc. 
RemoteRegistration
This allows Cayenta to remotely register customers with a pipe delimited list of account numbers, email address and password. The API then returns a success code and the RemoteAuthenticationToken if successful. 
AgentConnect
Use to link various pages of their biller admin portal to Invoice Cloud. The AgentConnect API is similar to our older product, CloudCSRConnect, but has additional security and functionality to better serve both Insurance and GUB biller needs.
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-2573
September 2022
RTDR runs and grabs balance from Cayenta and update the most recent invoice available on IC
RTDR runs and grabs the balance and due date to update the invoice with the same due date on IC
Use 
<DUE_DT>
 in order to match which invoice Cayenta is updating before we receive the most recent invoice file
INT-4012
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
June 2022
Three separate alerts supported for: Block ACH, Block CC and Cash Only
Support 4 alerts, two for Block ACH, one for Block CC and one for Cash Only
Billers may have more than one status to block ACH
INT-4619
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
October 2022
No value is populated in COLLECTION_STREAM field when posting ACH Rejects through the data pump
When posting ACH Rejects through the data pump add a value to COLLECTION_STREAM based on a new Advanced Setting
Hawaii Gas needs a specific value in order to automatically process ACH Rejects. We will use an Advanced setting to populate the COLLECTION_STREAM value in the data pump.
INT-6948
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
09/14/2023
An error message is happening to invoices due to a mismatched value from the software partner response and our invoices table. 
If Biller does have properly formatted JSON, search invoiceDate by “LAST_BILL_DT“ and compare with “InvoiceDate“. If Biller does not have a properly formatted JSON or not provide any JSON, DataView will filter search InvoiceDate by “DUE_DT“ and compare with “InvoiceDueDate“. This is the default.
Adding functionality via Advanced Setting 131 (JSON Config) to optionally compare LAST_BILL_DT to InvoiceDate instead of comparing DUE_DT to InvoiceDueDate. The following JSON must be set in order to enable this functionality:
{ "HarrisCayenta": { "RTDRConfig": { "UseBillDateInsteadOfDueDate": "True"} } }
INT-7997
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
01/17/2024
No Phone number in BIF.
Cayenta has provided a test .xml file that includes the phone number and it successfully loaded.
This is done in the code by checking if the JSON advanced setting 131 has the “includephonenumber“ setting set to true. If it does, then we add the Phone field’s value into the Customer Record of the BIF file.
{ "CayentaSSO": { "InvoiceConfig": { "IncludePhoneNumber": "True"} } }
ITG-2156
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
03/07/2024
No Payment code for Donation payment type.
Add a donation code that is provided by Cayenta.
Add DataPump Donation Payments Code: DONATE-PMT (No payment type specific codes). If a logged-in utility customer makes a donation, send their account number. 
ITG-2375
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
04/16/2024
The account number sent from biller is not the customer number that their customers see on their printed bills or what print vendor stores as the account number in their data warehouse.
IC maps the Customer_No sent from Cayenta to a new field which won’t affect IVR functionality.
Use DisplayAccountNumber field to store Customer_No. 
ITG-2633
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
06/13/2024
Miss tags in data pump request for phone number, email address and mailing address.
Add additional tags for each request.
Add ACCOUNT_DFLT_YN, PERSON_DFLT_YN, PHONE_CMTS and ADDRESS_CD tags for Johnson County Wastewater.
ITG-2634
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
06/25/2024
No partial refund function for data pump
Add data pump credit/refund 
ITEM_AMT must be greater than 0 and less than original AR amount for partial refund. Advanced Setting 114 must be enabled. 
INT-10322
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
06/25/2024
New phone and email can be added through data pump, but required tags are not included
All required tags should be included for new or existing record
Use <AddPersonPhone> function to add required tags.
ITG-2719
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
06/25/2024
<AddPersonPhone> is not the preferred method for all phone number updates
Only use <SetPhone> for all phone number updates.
Add three scenarios check before adding new/exist phone number to Cayenta side.
ITG-2949
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
09/16/2024
Past due amount is not included in invoice.
IC can store correct past due amount for billers who request it.
Cayenta add <PASTDUE_AMT> in RTDR. IC can store the amount and update FileSpecID 407. This will be the most update past due amount.
ITG-3213
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
INT-12320
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
TBD
When processing Datapump records for Paperless, Datapump does not process each Datapump record as a change log, but instead looks at the current setting and sends that result in the API.
Cayenta would like each Datapump record to be sent for paperless as more of a change log to show a true audit trail of the changes.  These records must be processed in order.
Created this ITG ticket which is attached to EPIC INT-12320.  This is a larger issue and affects the overall design of Datapump.
ITG-3213
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
ITG-3456
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/1/2025
Payment Arrangement Amount is not support.
Add new field in the database to store the value.
IC will add a new field to store the value. If payment arrangement amount is not 0 or blank, we will store the value and display it in the payment route.
ITG-3462
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
EBPP-24851
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/1/2025
Payment Arrangement Amount can not be updated through RTDR.
Update balance through RTDR if account is signed up for pay arrangement.
If an account is enrolled in a payment arrangement, IC will update the balance using a new endpoint via RTDR; otherwise, the existing endpoint will be utilized.
ITG-3499
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
4/17/2025
RTDR failed to update due to a donation invoice.
RTDR should update non-donation invoice
IC should filter out donation invoices before triggering RTDR. We make it option to billers and move others as necessary. 
ITG-3580
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
5/20/2025
AutoPayCollectionDate is controlled by BIF Customization. 
Each invoice can have individual  AutoPayCollectionDate instead of only one.
Add AutoPayCollectionDate to invoice mapping. Do not create new FileType instead of updating existing FileType 847.
ITG-3610
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
5/29/2025
No email field in invoice file.
Biller start passing email address in the invoice file.
Add Email to invoice mapping. Do not create new FileType instead of updating existing FileType 435.
ITG-3745
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
TBD
No data pump available for registration information that sent from other CIS/Partner.
Data pump registration information sent from third party.
Need to modify the Cayenta framework and maybe introduce a new data pump type.
 URL:/spaces/IM/pages/2051866698/Cayenta+Technical+Design
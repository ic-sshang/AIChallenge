 Overview
Our Engineering team changed 3 production database account passwords used by our applications  on 2026-06-16 5:00PM CST.  This document reflects our observations of the period beginning at execution time till now (2025-06-18 4:00PM CST).  
Date
Team
Cross functional
Participants
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 Retrospective
Add your Start doing, Stop doing, and Keep doing items to the table below. We'll use these to talk about how we can improve our process going forward.
What Went Well
What Didn’t Go Well
What Can We Do Better
Over 90% (350 repo base) reviewed for DB connectivity within ~9hrs
Azure Functions needed to be redeployed to trigger environment variables to be repulled.  Restart was not effective.
Uncontrollable with this event but with more time to plan we could’ve come out of it with less surprises
Planning from a separate project on team Build Breakers' roadmap proved to be critical in proactively identifying the repos that would be a problem
Initial focus was on the main DB server password but there were 2 other passwords that we didn’t think about till maybe 10 mins before change time.  
Scheduled checkins on the bridge call 
Platform reps on the call most of the time helped get past Platform related issues.
The excel sheet was the live document to check status but it appeared some were not providing updates.  Some did not understand the tasks (posted on the channel).
Project manager for the process +1
Teams were empowered to deploy as needed
DBWAREHOUSE config entry source and transformation is unknown currently.  It doesn’t exist in keyvault currently, or ADO Library groups.  But the value is getting inserted into the config as we observed that.  FINDING:  It’s coming from 
Service Configuration - Production
 library group.  
Convey the gravity of the situation.  It was an all hands on deck event but some treated it as a normal issue.  Should we have triggered an incident from the db password change event?
Mobilization of engineering base late in the work day
Team Spam had multiple critical repositories that needed updates but not enough hands.  Work was prioritized but there is no winner when prioritizing Autopay run over Emails.  Emails were delayed significantly due to not enough hands to tackle that.  In addition the excel document had an inaccurate update noting that EQP had db connectivity but it did not.
We could have tested this out in a lower environment earlier on to prepare for what would have been broken. This would have allowed us to catch broken Azure functions and proxies needing to be redeployed early on. 
Having a counterpart in India helped us transition some work at that time
Upgrade path for repos with really old IC.Database versions proved challenging.  It did not help that we were not able to pull the original commit of that IC.Database version, leading to trial and error figuring out the right combination of dependencies.  The permanent solution was upgrade to latest but time was not on our side.  NOTE:  Ex version `1.0.7949.17945` was built off a feature branch that also could’ve been deleted.  Ideally we only see versions from 
main
 branch in our nuget repository.  There are known issues with our library approval/promotion process.
Breakout Rooms for Managers + Team. It would’ve helped the team align on the items they owned and what they should be testing. A formal kick-off to what needs to get done. 
New db password handoff.  We used bitwarden to have some control but ideally it goes only to keyvault and no one but known key custodians can see it.
Clearly define ownership of repos.  We know the lists out there are stale and owners aren’t clearly listed either.
Handoff to India-based teams could have been improved.  
Better record of key events.  When was password changed.  When were specific apps up.  Etc.
SRE team was notably missing.  Unsure what happened with communication.  Their group could have helped teams burn down repos.
DB Service needed to be redeployed next day after we found that ICGATEWAY db connection through db service was using old password.   For some reason that uses the connection string value in config but the main DB uses MI, which is why we didn’t need to redeploy the day of.  Just needed a restart.
We found ICGATEWAY issues next day first the day of.  Why?  Action item added.
For a couple repos (EQP, ICGenerateAgentReport) we had to navigate around previously rolled back versions to not re-introduce another issue.  Changes were made off 
main
 but 
main
 could have had problematic changes and also new changes not yet released.
It was helpful to empower teams to deploy as needed (we still got Platform approval) but usage of Jira for tracking I believe was non-existent.  Integrations did create Jiras but others did not.
Teams were notified a bit late. The channel where all the work was being done was private and was very unorganized. An email wasn’t sent out until 4pm CST. 
Communication to teams.  A small group knew but not at liberty to expand the group.  
Deployment to Azure Batch is time consuming.
Noticed inconsistencies in azure batch testing.  Sometimes a version worked but next run w no changes didn’t work.  Unknown at this time why.  Team powered through.  In one case we just had to deploy to production as devtest was not cooperating.
 Action items
Add 1-2 follow-up action items to help the team apply what they learned in the retrospective:




1


1


incomplete


Update CloudCrypto.dll in 
www.invoicecloud.com
 to use keyvault version






505


1959d2e5-ed62-4077-a061-790b82091e54


complete


Remove Telerik.dll from 
www.invoicecloud.com
 as it is no longer in use and old






506


48cae116-577a-465b-9f5b-80d07425b00a


incomplete


Update 
www.invoicecloud.com
 to use MI to connect to DB






515


f3587f27-7e8c-4c63-a423-8f8cd4c01c33


incomplete


Validate 
www.invoicecloud.com
 pipeline functionality up to production






507


a6396079-28a1-4a5d-a38f-ff9399b32656


incomplete


“Delist” temp versions of IC.Database that were added to nuget repo






508


a73c4087-9d54-4fc0-84d6-21c56a9bd4dd


complete


Change the Restart Services pipeline back to use Environment-Preview group






509


ff52b220-0bd8-4295-ab2e-e412073c7850


incomplete


Figure out the source of the DBWAREHOUSE config transformation value.  Doesn’t appear to be on Keyvault.  NOTE.  Found the source.  Need to reconcile.






510


1d1534e0-cf0e-4e50-92b1-b3e9c321d2e1


incomplete


Plan to do it again as the new db password can be considered internally leaked due to handoff process






511


ea56595f-5aca-4e33-ac2f-90cb3ce179bc


incomplete


Look into why MI fails, leading to usage of connection string in config.  3k log lines in last 7 days (before event) show clear fall back to config value.






512


80d8ddb9-1f9d-414c-a4ae-064f0cf29abd


incomplete


Run a comprehensive search against Apps/Web servers looking for config files with the old connection strings.  We will need to redeploy those.  Those conn strings are used if/when MI is down.  We should expand it to a code wide search as RTDR was an example where it was in code (not even in ic.database).  






513


4301fb4f-d3ea-482c-ad04-d7020fc087ba


incomplete


Bring devtest to parity.  Some changes were, rightly, focused on prod only given the time, but now we’ll need to apply to devtest.  Ex:  
www.invoicecloud.com
 encrypted password change.






514


6389291c-af50-415c-862d-457a691310bf


incomplete


Change db password in devtest?






516


744feaaf-0ad7-4a34-b334-ae6b43298cf2


incomplete


Reconciling 
Service Configuration - Production
 ADO Library Group with Keyvault entries.  The ADO Library Group does not have the current keyvault values.  Get secrets out of Library groups and into keyvault






517


02fedd0c-9fa2-4e96-9006-840b571e9412


incomplete


Dust off the library development/promotion process that is documented but not enforced






518


8ca03e34-9066-4c29-9e75-12c5e77f4eba


incomplete


Health checks related to checking db connectivity should be testing the database servers they connect to and not just a database in general.  Ex:  Some payment related apps passed health check cause they were checking main db but not icgateway db.






519


4a36a307-7b82-4ef0-8d72-65f6baceddf5


incomplete


Improve the “rollback” process.  When we “rollback” we deploy the last good version but that can get lost amongst a see of other deployments.  






520


64c722c1-c5a6-4998-9b3f-19a323c49086


incomplete


Retroactively create Jiras for released changes






521


0caef5ce-d7ca-4987-8536-e978df2754a1


incomplete


Create better view of repo ownership that is constantly updated.  CMDB may help with this at some point.






522


38cccdc0-36b4-48e1-8c23-51728e5ebcb1


incomplete


Get secrets out of code bases and/or config files when possible






523


02dcdb1e-e0fe-463b-924d-273aa43845dc


incomplete


Improve our practice of updating package dependencies to reduce occurrence of situations where we need to make large jumps that may come with other changes and frustrations




 URL:/spaces/ED/pages/4423811073/Retro+-+2025-06-16+DB+Password+Change
This page contains the data dictionary for Payments DB schema. For the diagram and other details refer to 
https://invoicecloud.atlassian.net/wiki/spaces/EA/pages/4509040734/Proposed+Payments+Schema+-+WIP+-+Draft+V2?atlOrigin=eyJpIjoiNzc0ZGNkMmNmYzgxNDU5ZmI3N2VjODJhYzRiOTNiMDEiLCJwIjoiYyJ9
 
Table: Currencies
TODO: add definition
Column
Data Type
Description
CurrencyCode  
string (PK) 
ISO currency code (e.g., USD, EUR). Used in 
Payments
. 
CurrencyName  
string     
Full name of the currency. 
Table: PaymentStatuses
TODO: add definition
Column
Data Type
Description
PaymentStatusID  
int (PK, auto-increment) 
Unique status ID. Should be used in 
Payments
 instead of string 
Status
. 
PaymentStatusName
string     
Human-readable status (e.g., Completed, Voided). 
Table: CreditStatuses
TODO: add definition
Column
Data Type
Description
CreditStatusID  
int (PK, auto-increment) 
Unique status ID. Should be used in 
Payments
 instead of string 
Status
. 
CreditStatusName
string     
Human-readable status (e.g., PartiallyRefunded, Refunded). 
Table: Payments
TODO: add definition
Column
Data Type
Description
PaymentID           
bigint (PK, auto-increment) 
Unique payment identifier. 
SubmerchantKey      
string    (Max 40 length)
Identifier for submerchant which will be passed along to ChaseAPI. Will be unique per submerchant (biller) 
Amount              
decimal    
Payment amount. 
ConvenienceFee      
decimal    
Additional fee charged. 
PaymentDate         
datetime   
Timestamp of payment. 
PaymentStatusID     
int        
FK to 
PaymentStatuses
. 
TransactionTypeID   
int        
Type of transaction (e.g., sale, refund). 
PaymentTypeId
int
Type of Payment (ach, creditcard)
TraceNumber         
string (unique) (Max 16 Length)
External trace number. To be able to tie Payment record to the tracing emitted by sale/refund routes. 
PaymentReference
string     (Max 50 Length)
External reference ID. Ties original payment record and its subsequent refunds. 
PaymentMessage      
text       (Max 252 Length)
Optional message or notes. To be used to record at least an actor performing the insert operation. 
InvoiceNumber       
string     
Invoice associated with payment. Keeping it here to record some information about the intent for the payment flow. 
CurrencyCode        
string     
FK to 
Currencies
. I know, now we do not do any payments in foreign currencies, but this might change. Keeping it here from the beginning to let us incorporate that in the future. 
CreditForPaymentID  
bigint        
FK to original payment if this is a refund. 
CreditStatusID      
int        
Status of refund. FK to 
CreditStatuses
. 
IdempotencyKey      
string (unique) 
Will be in form of GUID + current timestamp. Used to prevent duplicate sales/refunds on HTTP retries for the respective routes. 
UpdatedAt           
datetime   
Last update timestamp. 
MerchantOrderNumber
string (unique)  
The ID generated by IC containing submerchantId + unique string (40 characters max). This will be used to tie IC to Chase on money movement journey. 
ProcessorTransactionId
string (nullable)
Represents the transactionId received from payment processor (for now Chase) after processing the payment. For CC to be recorded during sale. For ACH to be empty or to be received from Chase after NACHA file were to be processed.
PaymentProcessorID
int
FK to the PaymentProcessors PaymentProcessorID (for now will contain only Chase)
BillerID            
bigint   
Identifier for biller to tie payment record to the specific shard. 
Table: VoidRequests
TODO: add definition
Column
Data Type
Description
VoidRequestID  
bigint (PK, auto-increment) 
Unique void request ID. 
PaymentID      
bigint        
FK to 
Payments
. 
IdempotencyKey 
string (unique) 
Will be in the form of GUID+current timestamp. Used to prevent duplicate voids. 
RequestedAt    
datetime   
Timestamp of void request. 
Table: AuditLog
TODO: add definition
TODO: triggers or change data capture to ensure we record everything irrespective of the actor initiating the change
Column
Data Type
Description
AuditID        
bigint (PK, auto-increment) 
Unique audit entry. 
EntityType     
string     
Type of entity (e.g., Payment, VoidRequest). 
EntityID       
string     
ID of the entity affected. 
ActionType     
string     
Action performed (e.g., Created, Updated). 
ActionTimestamp
datetime   
When the action occurred. 
PerformedBy    
string     
User or system that performed the action. 
OldValue       
json       
Snapshot of previous values. 
NewValue       
json       
Snapshot of new values. 
 URL:/spaces/EA/pages/4530831430/Data+Dictionary+for+Payments+schema
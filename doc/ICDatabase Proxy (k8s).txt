container name: 
ic-database-service
application name: 
ICDatabaseService
hosted in cluster: 
aks-pri-proxy1
Connecting to ICDatabase Proxy (K8s)
Connect to Azure K8 Service: (this connection needs to be made from a Production Jumpbox)
bash
az aks get-credentials -n <cluster name> -g <resource group name> --subscription "<subscription name>"
Each cluster is saved as a context once connected
list contexts:
kubectl config get-contexts
switch between clusters you've already connected to:
bash
kubectl config use-context <context name> 
set a namespace for your context so you don't need to add --namespace to every command you run:
bash
kubectl config set-context --current --namespace <namespace name> 
A few helpful commands k8s commands that may be needed as immediate action during an alert:
get logs
 (stdout of the pod) - NewRelic should have most logs, however, not all logs are ingested by NewRelic, and some logs may not have been sent yet. 
kubectl logs <pod name>
get info
 - Detailed information about the resource
kubectl describe <resource type> <resource name>
restart
 a deployment
kubectl rollout restart deployment <deployment name>
scale 
a deployment
kubectl scale deployment <number>
Handling Golden Alerts
Golden alerts represent the most important metrics of a systems health.  Below is how to begin handling an alert for each type.
Errors
The rate of requests that fail.
Meaning
:
We are currently seeing a lot of errors coming from the application.
Potential Issues
:
Code change
Bad configuration
Dependency in a bad state
Action
:
Roll back if the issue is unknown with an unknown time to recovery
Roll forward if the issue is obvious and easy to fix (ie: bad configuration)
Need to inspect the logs/distributed tracing to determine the cause of the high error rate
Take action depending on the errors to resolve the root cause
do we have slow errors? or fast errors?
Possible Improvements
:
add missing unit/integration tests?
add graceful degradation to handle dependencies that are in error states (circuit breaker, default values, caching, etc...)
Saturation (CPU/Memory)
How "full" your service is
Meaning
:
Available CPU/Memory is running low.
Potential Issues
: 
Increased latency, traffic, and errors as a result of being starved for resources in the cluster.
Reduced availability to handle incoming requests
Action
:
We probably need to increase the available CPU/Memory to the pods.
or add another pod to the cluster to take some load from the others.
Possible Improvements
: 
can the code be more efficient? 
do we need to adjust resource requests/limits in our deployment? 
Is autoscaling enabled for this workload? If so, perhaps it needs tuning to avoid the issue.
Latency 
The time it takes to service a request.
Meaning
:
The app is taking longer than usual to respond to requests.
Potential Issues
: 
app is saturated
network issue
slow/erroring dependency
slow/erroring code
Action
:
Investigate the logs and transactions
do we have slow errors? or fast errors?
If the latency seems to be correlated to a release, consider a roll back / roll forward.
Do we need to scale our pod resources?
Possible Improvements
: 
depends
Traffic (Requests per Minute)
A measure of how much demand is being placed on your system, measured in a high-level system-specific metric. (Requests per Minute)
Meaning
:
The app is receiving less requests than usual
Potential Issues
: 
upstream errorâ€™s
app is not running
app is saturated
network issue
slow/erroring dependency
slow/erroring code
Action
:
If the throughput issues seem to be correlated to upstream errors, then there is likely nothing to do for this application
Investigate the logs and transactions
do we have slow errors? or fast errors?
If the throughput issues seem to be correlated to a release, consider a roll back / roll forward.
Do we need to scale our pod resources?
Possible Improvements
: 
depends
does it make sense for this application to alert on low traffic? perhaps this alert can be disabled. should this just me a helpful metric in the dashboard to assist in troubleshooting and understanding the system
 URL:/spaces/DS/pages/2901147692/ICDatabase+Proxy+k8s
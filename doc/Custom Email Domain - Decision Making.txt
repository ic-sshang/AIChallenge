Table of Contents:
none
Custom Email Domains becoming unverified after go-live
Problem Statement
In the 
Custom Email Domain
 feature, once a biller takes a domain live, there are scenarios where the domain (or individual email entries under the domain) may later become 
unverified
 due to DNS misconfigurations, expired records, or other reasons.
When this happens, outbound emails tied to those entries may 
fail to send
, directly impacting payers. This creates business risk, as important communications (receipts, reminders, notifications) may not reach end-users.
Scenario
Number of Emails
Number of Impacted Emails
Impact
Scenario 1
1 email address configured
1 impacted (domain/email unverified)
No payer emails can be sent — total outage for this biller.
Scenario 2
2 or more email addresses configured
1 impacted
Partial impact — emails mapped to the working address continue, but any invoice types mapped to the unverified address stop sending.
Possible solutions:
Solution
Pros
Cons
Fallback all impacted emails to 
InvoiceCloud 
Ensures no outage; all payer emails still go out.
Simple, consistent fallback rule.
Violates the principle that if a biller opts for custom domain, 
all emails must come from that domain
.
Risk of biller complaints about mixed sending domains (custom vs InvoiceCloud ).
 
Fallback all emails to 
InvoiceCloud 
Ensures no outage; all payer emails still go out.
Simple, consistent fallback rule.
No violation of custom email domains principle.
Difficult to explain to billers and may cause confusion.
Block sending until re-verified (no fallback)
None
High business impact: all impacted emails fail until the issue is resolved.
Risk of critical communications not reaching payers.
 
Auto-notify and guide biller to fix
 (can be combined with 1 or 2)
Transparent to the biller; they are immediately aware of the problem.
Provides actionable guidance to restore verification.
Does not by itself solve the sending problem.
Needs robust monitoring/alerting setup.
Conclusion
After reviewing the scenarios and evaluating possible solutions, the approach we are opting for is:
#2 Fallback all emails to InvoiceCloud
 
:
 If any custom email entry under a biller becomes unverified after going live, 
all emails for that biller will automatically fall back to sending via 
invoicecloud.net
. This ensures that no payer communication is blocked, and avoids partial delivery states that may confuse both billers and customers. Importantly, this approach does 
not violate the core principle
 that custom domain usage must be consistent across all outbound emails.
#4 Auto-notify and guide biller to fix:
 To minimize business impact and ensure transparency, we will implement an 
automated Slack notification
 that alerts the internal CS team whenever a custom domain becomes unverified. The customer team will then contact the biller, explain the situation, and guide them to restore domain verification.
Why this solution?
✅ Ensures 
business continuity
 (no emails are lost).
✅ Maintains the 
consistency principle
 (all or nothing rule for custom domain usage).
✅ Provides 
transparency
 through Slack alerts and proactive outreach.
⚠️ May be difficult to explain to billers why their emails suddenly reverted back to 
invoicecloud.net
, but this can be mitigated through clear communication and support guidance.
Handling Fully Mapped Invoice Types During Custom Email Domain Setup
Problem Statement
In the 
Custom Email Domain
 setup, when all invoice types (and general notifications) are already mapped to existing email addresses, adding a new email becomes problematic.
In the 
Email Setup page
, invoice type selection is mandatory to move forward.
If all invoice types are already mapped, thechecklist is fully disabled, preventing progress.
In the 
pre-live state
, billers can still return to the grid view, unmap invoice types, and then remap them to a new email. However, the lack of clear guidance makes this confusing.
In the 
live state
, this becomes more restrictive, as unmapping invoice types directly is not allowed. As a result, adding a new email entry with remapped invoice types becomes blocked, with no clear guidance to the user.
This creates a communication gap and confusion, as users cannot understand why they cannot proceed, nor what actions are required.
Possible Solutions
Solution
Pros
Cons
Always Enable “Next” Button
 (regardless of whether invoice types are available to select)
Provides maximum flexibility; user can always continue.
Avoids blocking the flow in any scenario.
High potential for confusion, especially with billers who have many invoice types.
Risk of misconfiguration, since users may not realize invoice types are required element.
 
Auto-Enable “Next” Button When All Invoice Types Are Already Mapped
 (restricted case)
Avoids blocking the flow only in the “fully mapped” state.
Lets billers proceed to the grid view where unmap/remap actions can be managed.
More controlled than Solution 1.
Still leaves users confused if no clear message explains why invoice types are disabled.
Requires tooltips or warnings (e.g., “All invoice types are already mapped. To remap, unassign from another email first.”).
Conclusion
Among the possible solutions, 
Solution 2 (Auto-Enable the Next Button When All Invoice Types Are Already Mapped)
 is the preferred approach. It prevents billers from being blocked entirely, while still preserving the integrity of the setup flow. By allowing the 
Next
 button to become active in the “fully mapped” state, billers can proceed and manage remapping without hitting a dead end.
To avoid confusion, it is essential to pair this with a 
clear warning or tooltip
 (e.g., 
“All invoice types are already mapped. To remap, unassign from another email first.”
). Similar communication should also be visible in the grid view, ensuring billers understand why invoice types appear disabled and what steps they need to take.
This approach balances 
usability and clarity
, making it superior to Solution 1, which risks causing more confusion by always enabling the Next button in every state.
Handling Tracking Configuration Failures When Adding Custom Email Domains
Problem Statement
When adding a new custom email domain, the system must also configure tracking (click tracking, open tracking, unsubscribe, and tracking protocol). This happens via a separate API call after the domain is created.
If this tracking configuration call fails:
Click tracking and open tracking may not be enabled.
Tracking protocol may remain as HTTP instead of HTTPS.
The product loses the ability to measure engagement (opens, clicks) reliably, which directly impacts success tracking and biller reporting.
Since this error is expected to be 
rare
, the solution should balance development effort with operational safeguards.
Possible Solutions
Solution
Pros
Cons
Retry Tracking Configuration Twice
 
(one immediate attempt + one retry after short delay; log failure in New Relic)
Simple to implement. 
Covers transient API issues. 
Failure is logged for investigation.
If both retries fail, the problem remains unresolved. 
Still requires manual intervention.
 
#1 solution + Slack Notification for Failures
 
(log in New Relic and send Slack alert so customer/ops team can manually fix)
Adds real-time visibility to failures. 
Reduces mean time to resolution.
Requires Slack integration
Still manual fix if tracking never applies.
 
 
#1 solution + Retry Again at Go-Live + + Slack Notification for Failures
(attempt on domain add, retry once, retry again during go-live checks, and send Slack alert if still failing)
Adds an extra safety net at the 
critical go-live moment
. 
Maximizes chance that tracking config is correct before production use. 
Provides Slack alerting if all retries fail.
Slightly more complex logic. 
May still rarely fail if all attempts miss. 
Still requires manual intervention.
Queue & Scheduled Retry (background job)
 
(failed configs added to a retry queue, periodically retried until success or manual stop)
Robust; ensures eventual consistency without manual fixes. 
Eliminates most failure scenarios.
More costly to develop. 
Adds operational complexity (queue management, retries, monitoring).
Conclusion
✅ From an effort vs. impact standpoint:
Solution 3
 (retry on add, retry again at go-live, Slack alert if failing) is likely the 
best balance
. It covers the rare case at the most critical point (go-live), ensures visibility via Slack, and avoids the higher development cost of a background job system (Solution 4).
Solution 2
 is simpler but slightly weaker because it doesn’t check again at go-live.
Known Limitation: Local-Only Change Model for Post–Go Live Edits
Problem Statement
In the 
Custom Email Domain
 feature, once a biller is live, any mapping changes made to invoice types are saved only in the 
local browser session
 until the user clicks 
Save Changes
. This creates a limitation:
Users cannot 
share or review in-progress changes
 with others.
If they refresh or another user logs in, the changes are lost.
Supporting collaboration across roles (e.g., admin making edits, senior reviewing) isn’t possible.
Why Not to Do It Now
Low Frequency
The scenario of needing to remap invoice types post–go-live is rare. Most mapping is completed during initial setup.
High Cost of Implementation
Solving this properly requires a 
new draft/versioning system
, with persistence, collaboration, and audit logs.
Not Core to Success Criteria
The main product value lies in 
having custom domains live and sending reliably
.
Draft collaboration is a nice-to-have, not essential.
Alternative Mitigation Exists
Lightweight UI messaging (warnings/tooltips like 
“Changes are saved locally until applied”
) can set expectations without heavy engineering effort.
Recommendation
For now, 
stick with the local-only change model
, and add 
clear communication in the UI
 so billers understand that:
Pending edits are local to their session, and
Other users cannot see them until saved.
Revisit heavier draft/versioning solutions only if customer demand, compliance requirements, or collaboration needs grow significantly.
 URL:/spaces/PE/pages/4628840487/Custom+Email+Domain+-+Decision+Making
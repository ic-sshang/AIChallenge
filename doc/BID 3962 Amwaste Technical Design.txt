Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation
Jira ticket 
Release Date
Document status
Completed
Green
Document owner
 
 
Solution engineer
 
Knowledge Transfer
Summary
Amwaste integration is a full batch integration. InvoiceCloud design uses provided company codes(the specific company and its internal coding system) as corresponding InvoiceTypeID which to minimize the impact to Amwaste services. Example can be found 
here
.
Integration Summary
Integration Point
Delivery
Format
Notes/Descriptions
Invoice
Stratus
Integrator File
There will be only one invoice layout, but we will get one invoice file per Invoice ID. It is only determined by file name, and it will be used as InvoiceCloud InvoiceTypeID. Amwaste will use two file types: H and W. The difference is Type W doesn’t have “D0 - detail line” in invoice file. Neither type H nor W affects BIF mapping, only type H stores more custom data.
Adjustment
Stratus
Integrator File
InvoiceCloud will use the “Amwaste lockbox payment file” as an Adjustment file.  AmWaste is providing us a payment listing from their bank because they have no other mechanism to generate balance changes.
Payment/Lockbox
Stratus
Integrator File
Payment files will be send per Company Code daily, and it must match the lockbox sample format. 
There are only three CloudStore payment files send daily,  Alabama - AW, Georgia - GA, Louisiana - AL.
Change log
Stratus
Integrator File
Amwaste will pull Change log file from SFTP at a scheduled time.
 File includes all accounts that had changes and date/time changes are made.
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: .txt
File Naming Convention:  File Name Column (e.g. AW-
RES
-MM-DD-YY): “AW“ - Company Code, “AW-RES“ - representing Invoice ID 158
Correction: Troup County Waste Complex - LanDfill AR(Invoice ID 235): Company Code - TR, File Name - TR-MM-DD-YY 
 
Invoice ID (Depends on File Name):
File Delimiter: comma
Specification:
There will be only one invoice layout, but we will get one invoice file per invoice ID(e.g. 158: AW-RES-MM-DD-YY).
The Invoice ID is only determined by file name, and it will be used as InvoiceCloud InvoiceTypeID. (ID and corresponding File Name can be found in Invoice Types table) 
According to Amwaste, there are two file types: H(Haul IT - landfill billing) and W(Weigh IT - Transfer station)
Type H (Only 3 Amwaste Divisions: AW, GA, AL). Type W (Total of 7: CC, MM, CG, TR, WV, BR, MC). 
The difference is Type W doesn’t have “D0 - detail line” in invoice file. Neither type H nor W affects BIF mapping, only type H stores more custom data.
Each invoice file transfer frequency could be different(Monthly, Bi-Monthly, Quarterly)
The invoice number is not unique. We will add Company Code to form a unique invoice number
Rows may be omitted if they are not present in the file provided by the biller. Required row: C1, I1-I5, H1-H4, D0, T1, S1
Troup County Waste Complex - LanDfill AR
 
Company Code should be TR 
Sample File:
Type H Sample File: 
Type W Sample File:
Position: Block “I1“ to “M“ (M1 - M4), no “D0” block for Type W
Field Mapping
Custom11 - Custom24 fields are only available for Type H invoice.
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
N
TRUE
Set by IC - Always ‘FH’
File Header
2
BillerGuid
N
TRUE
Set by IC
File Header
4
FileCreationDate
N
TRUE
Set by IC
File Header
5
InvoiceCount
N
TRUE
Set by IC
File Header
6
TotalInvoiceAmount
N
TRUE
Set by IC
File Header
7
RowType
N
TRUE
Set by IC - Always ‘IH’
Invoice Header
8
RecordType
Y
TRUE
Set by IC
Invoice Header
9
InvoiceFormatGuid
N
TRUE
Set by IC
Invoice Header
10
InvoiceNumber
N
TRUE
Invoice Number
Company Code (Custom1) + InvoiceNumber(BillerInvoiceNumber)
(ex. AW0000000705, no dash)
Varchar
C1 - Position 1 + I1 - Position 1
30
Invoice Header
11
InvoiceDate
Y
TRUE
Invoice Date
Date(MM/DD/YYYY)
I1 - Position 2
10
Invoice Header
12
InvoiceDueDate
N
TRUE
Invoice Date + 1 day
Amwaste doesn’t have due date concept. InvoiceDueDate will be InvoiceDate plus 1 day
Date(MM/DD/YYYY)
10
Invoice Header
13
TotalAmountDue
Y
TRUE
Invoice Amount
Money
T1 - Position 1
Invoice Header
38
Custom1
Y
FALSE
Company Code
Varchar
C1 - Position 1
2
Invoice Header
39
Custom2
Y
FALSE
External Reference
Varchar
C1 - Position 2
10
Invoice Header
40
Custom3
Y
FALSE
Company Name
Varchar
C1 - Position 3
50
Invoice Header
41
Custom4
Y
FALSE
Company Address 1
Varchar
C1 - Position 4
50
Invoice Header
42
Custom5
Y
FALSE
Company Address 2
Varchar
C1 - Position 5
50
Invoice Header
43
Custom6
Y
FALSE
Company City
Varchar
C1 - Position 6
50
Invoice Header
44
Custom7
Y
FALSE
Company Province/State
Varchar
C1 - Position 7
2
Invoice Header
45
Custom8
Y
FALSE
Country
Varchar
C1 - Position 8
2
Invoice Header
46
Custom9
Y
FALSE
Company Phone
Varchar
C1 - Position 9
10
Invoice Header
47
Custom10
Y
FALSE
Service Site Number
Numeric
I4 - Position 1 Billing site number
4
Invoice Header
93
BalanceDue
Y
FALSE
Invoice Amount
Money
T1 - Position 1
Invoice Header
94
Custom11
Y
FALSE
Name
Varchar
D0 (Type H Only) - Position 2
40
Invoice Header
95
Custom12
Y
FALSE
Address
Varchar
D0 (Type H Only) - Position 3
40
Invoice Header
96
Custom13
Y
FALSE
Site Level PO #
Varchar
D0 (Type H Only) - Position 4
40
Invoice Header
97
Custom14
Y
FALSE
Site Level Contract Number
Varchar
D0 (Type H Only) - Position 5
40
Invoice Header
98
Custom15
Y
FALSE
Site Custom fields 1
Varchar
D0 (Type H Only) - Position 6
50
Invoice Header
99
Custom16
Y
FALSE
Site Custom fields 2
Varchar
D0 (Type H Only) - Position 7
50
Invoice Header
100
Custom17
Y
FALSE
Site Custom fields 3
Varchar
D0 (Type H Only) - Position 8
50
Invoice Header
101
Custom18
Y
FALSE
Site Custom fields 4
Varchar
D0 (Type H Only) - Position 9
50
Invoice Header
102
Custom19
Y
FALSE
Site Custom fields 5
Varchar
D0 (Type H Only) - Position 10
50
Invoice Header
103
Custom20
Y
FALSE
Site Custom fields 6
Varchar
D0 (Type H Only) - Position 11
50
Invoice Header
104
Custom21
Y
FALSE
Site Custom fields 7
Varchar
D0 (Type H Only) - Position 12
50
Invoice Header
105
Custom22
Y
FALSE
Site Custom fields 8
Varchar
D0 (Type H Only) - Position 13
50
Invoice Header
106
Custom23
Y
FALSE
Site Custom fields 9
Varchar
D0 (Type H Only) - Position 14
50
Invoice Header
107
Custom24
Y
FALSE
Site Custom fields 10
Varchar
D0 (Type H Only) - Position 15
50
Invoice Header
108
Custom25
114
Custom31
Y
FALSE
Aging Buckets: Current
Money
S1 - Position 1
Invoice Header
115
Custom32
Y
FALSE
Aging Buckets: 31-60
Money
S1 - Position 2
Invoice Header
116
Custom33
Y
FALSE
Aging Buckets: 61-90
Money
S1 - Position 3
Invoice Header
117
Custom34
Y
FALSE
Aging Buckets: 91+
Money
S1 - Position 4
Invoice Header
118
Custom35
Y
FALSE
Message 1
Varchar
M1 - Position 1
80
Invoice Header
119
Custom36
Y
FALSE
Message 2
Varchar
M2 - Position 1
80
Invoice Header
120
Custom37
Y
FALSE
Balance Forward Amount
Money
B1 - Position 1(Skip if rows not in file)
Invoice Header
121
Custom38
Y
FALSE
Payment
Money
B1 - Position 2(Skip if rows not in file)
Invoice Header
122
Custom39
Y
FALSE
Adjustment
Money
B1 - Position 3(Skip if rows not in file)
Invoice Header
123
Custom40
Y
FALSE
Other Invoices
Money
B1 - Position 4(Skip if rows not in file)
Invoice Header
124
Custom41
Y
FALSE
Invoice Type(H/W)
Varchar
I1 - Position 3
1
Invoice Header
252
InvoiceTypeID
N
FALSE
Invoice ID (Depends on Invoice File Name. e.g. AW-RES-MM-DD-YY, “AW-RES“ is 158)
Varchar
Invoice Header
347
BillerInvoiceNumber
Y
TRUE
Invoice Number
Varchar
I1 - Position 1
30
58
RowType
N
TRUE
Set by IC - Always 'CR”
Customer Record
59
AccountNumber
Y
TRUE
Company Code (Custom1) + 
Customer Number(I3)
(ex. AW000123, no dash)
Varchar
I3, IC will append 2 letters (Custom1) in front of the Customer Number to make it unique 
30
Customer Record
60
CustomerName
Y
TRUE
Customer/Site Name
Varchar
H1 - Position 1
40
Customer Record
61
Address1
Y
FALSE
Customer/Site Address
Varchar
H2 - Position 1
40
Customer Record
62
Address2
Y
FALSE
Customer/Site Address
Varchar
H3 - Position 1
40
Customer Record
63
City
Y
FALSE
Customer / Site City
Varchar
H4 - Position 1
42
Customer Record
64
State
Y
FALSE
Customer / State
Varchar
H4 - Position 1
2
Customer Record
65
Zip
Y
FALSE
Customer / Postal code (We will only store the left 5 characters as Zip If H4-Position 1 contains 9 characters)
Varchar
H4 - Position 1
9(IC only stores 5 characters)
Customer Record
373
DisplayAccountNumber
Y
TRUE
Customer Number
Varchar
I3 - Position 1
6
Customer Record
70
RowType
N
TRUE
Set by IC - Always ‘ID’
Invoice Detail
Adjustment/Daily Balance File
File Summary/Purpose: The purpose of this file is transfer bill/invoice updated balance data to IC from the biller
File Extension: txt
File Naming Convention: 
File Delimiter: comma
Specification: We will receive one adjustment files daily.
File Transfer Frequency: Daily (Monday - Friday)
Field Mapping
InvoiceCloud will use the “Amwaste lockbox payment file” as an Adjustment file.  This is different from our definition of a lockbox/payment file, which is specified below.  AmWaste is providing us a payment listing from their bank because they have no other mechanism to generate balance changes.
A Balance Differential will be used in the adjustment file. In the raw file, AdjustmentAmount will be the account balance.
(e.g. Existing Balance: 100, AdjustmentAmount: 40, New Balance: 40)
IC FileSpecID
IC Field Name
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Position
Partner Field Format
Partner Field Character Limit
Record Type
305
RowType
N
TRUE
Set by IC - always AH
File Header
306
BillerGuid
N
TRUE
Set by IC
File Header
307
ThirdPartyFileReference
N
FALSE
File Header
308
FileCreationDate
N
TRUE
Set by IC
File Header
309
AdjustmentCount
N
TRUE
Set by IC
File Header
310
TotalAdjustmentAmount
N
TRUE
Set by IC
File Header
311
RowType
N
TRUE
Set by IC - Always AR
Adjustment Record
312
InvoiceNumber
Y
TRUE
Pull from InvoiceNumber on Adjustment file
Position 4
Varchar
30
Adjustment Record
313
AccountNumber
Y
TRUE
Append Company code with dash in front of Customer Number on Adjustment file. 
(e.g. CG000966, no dash)
Company Code: Position 1
Customer Number: Position 2
Varchar
30
Adjustment Record
314
AdjustmentAmount
Y
TRUE
Pull from Payments on Adjustment file
Position 6
Money
Adjustment Record
316
AdjustmentTypeID
N
TRUE
2 (Balance Differential)
Int
1
Adjustment Record
Payment/Lockbox File
File Summary/Purpose: The purpose of this file is transfer payment data from IC to the biller
File Extension: txt
File Naming Convention: 
EBPP - 
 
IC_Payments
_CC_YYYYMMDD_HHMMSS (Where CC=Company Code 2 characters)
CloudStore -
 IC_Payments_CloudStore_CC_YYYYMMDD_HHMMSS (Where CC=Company Code 2 characters, only AW, GA and AL)
File Delimiter: comma
Specification: Payment files will be send per Company Code daily, and it must match the lockbox sample format. 
Leave the Billing Site Number empty for Invoice types: 161,163, 228, 235, 237, 240, 245.
There are only three CloudStore payment files send daily,  Alabama - AW, Georgia - GA, Louisiana - AL.
Included Payment Types: Only Payments
Sample File:
Stratus File Path: 
File Transfer Frequency: Daily after batch closure
Field Mapping for EBPP
For Invoice types: 161,163,228,235,237,240,245, leave Billing Site Number field blank, do not pull data from Custom10 on Invoice.
Field
Data Type
Character Limits
Sample
Values
Company Code
Varchar
2
CG
Pull from Custom1 on Invoice
Customer Number
Varchar
6
000966
Pull from DisplayAccountNumber on Invoice
Billing Site Number
Numeric
4
0000, WV, CL
Not use by IC, pull from Custom10 on Invoice
(blank for InvoiceType - 161,163,228,235,237,240,245)
Invoice Number
Varchar
30
0000422589
Pull from BillerInvoiceNumber on Invoice
Auth Order Number
Varchar
30
I4D19M0603417
RejectReference 
as stored in IC
Payment 
Money
159.88
PaymentAmount as stored in IC
Field Mapping for CloudStore
Will need a total of three files (one file per company code with both Cloud Stores included).
Prepayment CloudStore and Reinstatement Fee CloudStore
Service State is not always the same as Company Code, see table below
Service State
Company Code
AL
AW
GA
GA
LA
AL
Field
Data Type
Character Limits
Sample
Values
Company Code
Varchar
2
AW, GA, AL
 Pull from CustomField 1 from invoice detail where ProductID is Service State
Account Number
Varchar
6
000966
Account Number cloudstore field (Without company code)
Billing Site Number
Numeric
4
0000
Hard code to 0000
Invoice Number
Varchar
2
OA
Hard code to OA
Auth Order Number
Varchar
30
I4D19M0603417
authOrderNumber as stored in IC
Transaction Amount
Money
159.88
PaymentAmount as stored in IC (no service fee)
Change Log File
File Summary/Purpose: The purpose of this file is transfer change log data from IC to the biller
File Extension: csv
File Naming Convention: N/A
File Delimiter: comma
Specification: Amwaste will pull Change log file from SFTP at a scheduled time.
 File includes all accounts that had changes and date/time changes are made.
SFTP File Path:
File Transfer Frequency: Daily
Field Mapping
Field
Data Type
Character Limits
Format
Values
Account Number
Varchar 
30 
Pull from AccountNumber on Invoice
AP Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in AutoPay
AP Un-Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed un - enrollment in AutoPay
Email
Varchar
100
EmailAddress of the customer
Email Address change date
Datetime
MMDDYYYYHHMMSS
Date email address was change on IC
Phone Number
Varchar 
15
PhoneNumber of the customer
Phone Number change date
Datetime
MMDDYYYYHHMMSS
Date phone number was changed on IC
Paperless Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in paperless
Paperless Un-enrollment
Datetime
MMDDYYYYHHMMSS
Date customer un-enrolled in paperless
Advanced Settings
Setting ID
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
Site configuration 
Invoice Types
Invoice Types
158 - 
AW-RES
247 - 
AW-MUN
159 - 
AW-COM
160 - 
AW-RO
250 - 
AW-PT
161 - 
CC
163 - 
MM
228 - 
CG
232 - 
GA-RES
248 - 
GA-MUN
233 - 
GA-COM
234 - 
GA-RO
235 - 
TC
237 - 
WV
240 - 
BR
242 - 
AL-RES
249 - 
AL-MUN
243 - 
AL-COM
244 - 
AL-RO
245 - 
MC
 
Virtual Site
Required Options
Input required integration options below.
ID
Option Description
Details
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, On Biller Quesitonnaire - BIF customization
AllowPartialPayments
AutoPayCollectionDate
BalanceForward
CreditCardServiceFee
FirstNotifyRequestedDate
InvoiceDate
InvoiceDueDate
InvoiceFormatGuid
InvoiceTypeID
LateFeeDate
LocationReference
MinimumAmountDue
PaymentExpirationDate
PaymentExpirationMessage
PromptPayExpirationDate
RegistrationValue
SecondNotifyRequestedDate
ThirdNotifyRequestedDate
User Interaction and Design
Data Flow - Invoice
att2816311322
2786656567
1
TRUXInvoice
att2816573454
IM
att2816475181
0
Data Flow - Adjustments
att2816507941
2786656567
1
TRUXAdjustment
att2816344107
IM
att2816049171
0
Data Flow - Payment
att2816409628
2786656567
1
TRUXPayment
att2816507947
IM
att2816049177
0
Data Flow - Change Log
att2470772752
2291859471
1
Chart3
att2470051881
IM
att2469920782
0
Data Flow - Bill Presentment
att2837118978
2786656567
1
TRUX Bill Present
att2836594694
IM
att2836824084
0
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
Biller Portal
Invoice Cloud Web Services
API Name
API Use/Purpose
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-7774
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
12/08/2023
Adjustment type was Fixed Amount
Adjustment type is Balance Differential
Change AdjustmentTypeID to 2 
ITG-2343
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
03/22/2024
PaymentGUID can’t be searched in portal
Find a searchable fields in IC portal
Replace PaymentGUID with a searchable Auth Order Number in Field Mapping for EBPP and CloudStore
ITG-2419
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
04/30/2024
Payment file imports issue
Import successful with existing payment export
Leave Billing Site Number empty for invoice type: 161,163,228,235,237,240,245 only
INT-10330
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
07/02/2024
Balance Due amount is incorrect
Balance Due amount should be the same as Invoice Amount
Remap the Balance Due to T1-Position1. This is the same amount as TotalAmountDue
 URL:/spaces/IM/pages/2786656567/BID+3962+Amwaste+Technical+Design
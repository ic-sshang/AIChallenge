For this integration we have introduced a new instance of Okta that will be available for development and testing within our DEVTEST environment for CRM and future apps.  This is a separate and isolated instance of Okta that has almost no ties to the production Okta instance.  As it is a separate instance, you will go through an initial quick set up to establish your new password and 2FA.
URL:
 
https://engagesmart-2.oktapreview.com/
URL: 
https://dev-390385.okta.com/
 (shut down 7/18/2025)
Welcome email
Setting your new password
Sign in to test Okta account
User Management
In collaboration with Engagesmart team, we have configured Okta Org2Org to push down Engineering and Product employee data from the production Okta instance to our devtest Okta instance.  It is a one way push.  Changes occurring in production will be pushed down daily, including additions and deactivations.  Changes made to users inside the devtest Okta instance will not be synced back up to the production instance.  
There should not be a need to manage user data unless it is required for development or testing.
Engineering and Product employees will slowly gain access to this Okta during rollout 
Sending activation emails
Coming soonâ€¦
SP-initiated and IdP-initiated Information
This devtest integration only supports SP-initiated SSO due to the 14+, and growing, devtest environments we have.  This integration will also work when you are debugging on 
localhost
 on your AVD and are using port 
8888
.  As of today (6/11) this is the default port set up in the ICCRM solution.  
This can be simply explained by saying that if the SSO request is coming from devtest<environment> then we can configure Okta on the fly where to come back to after authenticating.  It is also a known set of environments (devtest > devtest14+).  
If it is IdP-initiated, Okta does not know which devtest<environment> the developer is using.  Maybe a future enhancement.
IdP-initiated is possible during development if the developer has access to configure the CRM app.  The developer will need to configure the app to have the localhost url where they are running their CRM instance.
The CRM app on the Okta User Dashboard is configured to go to the 
http://localhost:8888
 url.
Configuring CRM for Signing In
This integration work introduced a new key named 
CRMAuthSupport 
in the 
web.config
 file of ICCRM.
The comments describe the supported values.  They are described further below.  These were created to support switching during rollout without code changes.
CRMAuthSupport 
Value
Description
Sign in page look
0
Default
 - Only Legacy sign ins are supported.  This is the standard we know today.  This will continue to be the standard for local development.
1
Both Legacy and Okta sign ins supported.  This will be shown during transition period to enable users to switch back and forth based on their needs.  The Okta button will take them to the devtest Okta if CRM is running in devtest but it will take them to production instance if the CRM app is running in production.
2
Only Okta sign ins are supported.  There is no need to show the traditional CRM sign in page at this point.  In fact going to the old login page will redirect them to the configured Okta location.
If a value is used that leverages Okta, there are more values that start to come into play.  Screenshot below shows the other values in 
web.config
.  
All these are local/test environment values.  
In addition to these values, we do make use of the Okta signing certificate to validate POSTs to our CRM callback url are coming from Okta only.  This value is stored in the environment keyvault.  This screenshot shows the value in our devtest keyvault instance.
These values are transformed per environment using pre-existing functionality in the deploy pipeline for this application.
For reference, the values are pulled as such:
Environment
Values are pulled from
Notes
Local
web.config
The values in code mirror what is in the DevTest library group.  They are test values.  Can be changed as needed to test.
DevTest
DevTest 
library group in ADO and transformed into 
web.config
 during deployment into that environment
 Regression
Regression 
library group in ADO and transformed into 
web.config
 during deployment into that environment.
Production
Production 
library group in ADO and transformed into 
web.config
 during deployment into that environment
Auditing
Along with this integration we are also now logging CRM sign in activity into a new table.  
UserSignInActivity table
Note the 
AuthTypeID 
column.  This is different then 
CRMAuthSupport 
used in the 
web.config
 file.  This indicates the authentication model the user used.  In the screenshot above it shows me signing in using Legacy first (
735
) and then signing in using Okta (
736
) while testing.
tblAuthType table
 
 URL:/spaces/EN/pages/2996601044/CRM+Okta+DEVTEST+Integration
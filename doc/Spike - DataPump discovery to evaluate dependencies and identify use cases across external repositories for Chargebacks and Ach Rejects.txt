Chargebacks:
üîÑ 
Chargeback Flow
Dispute Raised
The 
end user
 raises a dispute with the 
Biller
 for a specific transaction.
Verification by Biller
The Biller verifies the dispute and prepares the 
chargeback records
.
Skybot Job Trigger
A Skybot job runs daily to:
Fetch chargeback data via 
API
 or 
FTP
.
Insert the records into the 
chargebacks
 table
.
The same records are being inserted into 
Datapump
 table
 with the help of Stored Procedures.
Stored Procedures Overview 
These are the stored procs we will be using:
insChargebacks
insChargebacks_ICGW
these stored procs internally inserts records into datapump table
Table / Stored Proc Names
  Code Snippet
Dependencies of Chargeback Table
 
insChargebacks
 
insChargebacks_ICGW
 
Repositories Utilizing These Procedures:
The following repositories contain implementations or integrations that invoke the above stored procedures to insert chargeback table:
Repo Name
 Repo Link
SkybotJobName
job running frequency
Test Flow in development
Code Snippet
NCRJetPayChargebacks
NCRJetPayChargebacks - Repos
STAGING-NCRJetPayChargebacks
daily
we could mock the data and test in devtest environment
 
ChaseChargebacks
ChaseChargebacks.vb - Repos
STAGING-ChaseDFRImportChain
daily
we could mock the data and test in devtest environment
 
PayPalChargebackProcessing
ChargebackRepository.cs - Repos
PayPalChargebackProcessing
unscheduled job
we could mock the data and test in devtest environment
 
DemoPortals
DemoPortals - Repos
 
AchRejects:
üîÅ 
ACH Rejects Flow
Bank Rejection
The 
bank
 rejects a payment (e.g., due to insufficient funds) typically 
2‚Äì3 days after initiation
.
Skybot Job Trigger
A Skybot job runs daily to:
Retrieve ACH reject data via 
API
 or 
FTP w.r.t
 payment integrators / processors endpoint or ftp path.
Insert the records into the 
ACHRejects
 
table
.
The same records are being inserted into 
Datapump
 table
 with the help of Stored Procedures.
Stored Procedures Overview:
These are the stored procs we will be using:
insACHRejects
these stored procs internally inserts records into datapump table
Table / Stored Proc Names
  Code Snippet
Dependencies of ACHRejects Table
 
insACHRejects
 
Repositories Utilizing These Procedures: 
The following repositories contain implementations that invoke the above stored procedures to insert AchRejects table:
Repo Name
 Repo Link
SkybotJobName
job running frequency
Test Flow in development
Code Snippet
PayPalACHRejectProcessing
 
PayPalACHRejectProcessing - Repos
STAGING-BraintreeRejects
daily
we could mock the data and test in devtest environment
 
 
HawaiianTelcomRejects
HawaiianTelcomRejects - Repos
STAGING-HawaiianTelcomRejects
daily
we could mock the data and test in devtest environment
 
ChaseNocs
ChaseNocs - Repos
runs as a part of
STAGING-ChaseDFRImportChain
daily
we could mock the data and test in devtest 
 
NCRJetPayRejects
NCRJetPayRejects - Repos
STAGING-NCRJetPayRejects
daily
we could mock the data and test in devtest 
 
TTechAchRejects
TTechAchRejects - Repos
TTechAchNowRejects
daily
we could mock the data and test in devtest 
 
WellsFargoRejects
WellsFargoRejects - Repos
STAGING-WellsFargoRejects
runs from monday to friday
we could mock the data and test in devtest environment
 
EFTRejects
EFTRejects.vb - Repos
STAGING-SageEFTRejects
runs daily
we could mock the data and test in devtest environment
 
DemoPortals
DemoPortals - Repos
 
‚úÖ 
Test Plan For Datapumpv2 w.r.t Event-Driven approach  
Objective
To validate the new 
event-driven architecture (EDA)
 for inserting records into the 
datapumpv2
 table via a new 
Worker Service App
, while maintaining the existing legacy flow that populates the original 
datapump
 table. The goal is to ensure both flows produce consistent and accurate results.
Test Setup
1. 
Simulated Data Generation
Prepare mock datasets for:
Chargeback records
ACH reject records
Ensure data covers various edge cases (e.g., missing fields, duplicates, invalid formats).
2. 
Event Publishing
Simulate event publishing using test producers:
ChargebackDataRetrieved
ACHRejectDataRetrieved
Events are published to the 
Service Bus
.
3. 
New Worker Service App
Subscribes to the above events.
On event receipt:
Parses and validates payload.
Inserts records into the new 
datapumpv2
 table.
4. 
Legacy Flow (Skybot) (DataPump)
Continues to run as-is:
Retrieves data via API/FTP.
Inserts into the existing 
datapump
 table.
Validation & Comparison
5. 
Data Comparison
Compare records in 
datapump
 and 
datapumpv2
:
Record count
Field-level data integrity
6. 
Success Criteria
100% match in record count and content between both tables.
No data loss, duplication, or transformation errors.
 URL:/spaces/PE/pages/4487348237/Spike+-+DataPump+discovery+to+evaluate+dependencies+and+identify+use+cases+across+external+repositories+for+Chargebacks+and+Ach+Rejects
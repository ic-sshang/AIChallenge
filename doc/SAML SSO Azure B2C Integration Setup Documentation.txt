Worked On By:
Bruno S.
Victor C.
Luke B.
Related Items:
EBPP-26550
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-26549
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-27109
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-28009
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
At a Glance 
The Doctors Management Company (
BID: 4389
) would like to use Azure B2C for their SAML SSO integration. We confirmed in EBPP-26550 that this SAML integration is functional with our current SAML SSO solution out-of-the-box. We worked with the Infra team to receive the proper permissions and access to make the necessary configurations in the Azure portal (
shown in the steps below
).
Problem
We did this research to confirm that our current SAML SSO solution can successfully integrate with Azure B2C without any app code changes.
Solution
Confirmed SAML SSO integrates with Azure B2C by following the steps below.
Testing Procedures
This item was tested with the following link in BID: 221 after completing the configuration steps below.
wide
https://sso.invoicecloud.com/saml/225F2E93-E8C2-464E-A913-726E74E0FB33?Deeplinkid=1&account=WTR-901815&ViewMode=0
Configuration steps
Create an Enterprise App
Click Enterprise Applications or search for it on the Search bar (
at the top of the page
).
b. Click on New application
c. Click on Create your own application, input the name for your app, select the Integration any other application you don’t find in the gallery option, then click the Create button.
Set up the SAML configurations in the Single sign-on (Preview) area
a. Go back to the Enterprise app
b. Select SAML (Preview) in the Single sign-on preview area
c. Click the Edit button for the Basic SAML Configuration
d. Add the proper SAML urls for your application (IC SAML SSO’s urls used below)
Add a user to the Enterprise app under the Users and groups area
Click Add user/group
b.  Click on None Selected, click on the checkbox(es) for the user(s)/group(s) that you would like to add, click the Select button, then click the Assign button.
Set up the SAML Claims. In this example I set up a role claim that will map to the Login Type in the Invoice Cloud system.
Click Edit in the Attributes & Claims area
b. Click Add new claim
c. Add the following values for the new claim, then click the Save button.
Note:
 The Namespace should be the following so the SAML SSO app retrieves the claims correctly.
http://schemas.xmlsoap.org/ws/2005/05/identity/claims
Result:
Update the user’s properties under the Users and groups area. 
Click on the user’s name.
b. Click on Properties.
c. Update and review the user’s properties to ensure they match the values that were configured under the SAML claims.
Set up the SAML Identity Provider Settings and SAML Claims Configuration in the Products > Cloud SSO Connect tab in the CRM. The values are listed below.
full-width
SAML Identity Provider Settings
-------------------------------------------------------------------
Entity ID: https://aa0f9431-70dc-4c42-850a-810e9f47ad26.ciamlogin.com/aa0f9431-70dc-4c42-850a-810e9f47ad26/
Metadata url: https://invoicecloudwdil.ciamlogin.com/aa0f9431-70dc-4c42-850a-810e9f47ad26/federationmetadata/2007-06/federationmetadata.xml?appid=95b7af81-18cb-4181-b914-b692e99f447a
SSO Service Url: https://invoicecloudwdil.ciamlogin.com/aa0f9431-70dc-4c42-850a-810e9f47ad26/saml2

SAML Claims Configuration
--------------------------------------------------------------------
LoginType: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/role
EmailAddress: http://schemas.xmlsoap.org/ws/2005/05/identity/claims/emailaddress
AccountNumber: Account

LoginType Claim Mapping
---------------------------------------------------------------------
Owner - Account_Owner
Guest - Account_Guest
Where do I find these urls?
Entity ID: This url is in the following format:
https://{TenantID}.ciamlogin.com/{TenantID}/
To find the Tenant ID, search for tenant in the Search bar and click on Tenant Properties
Metadata url is in the Single sign-on (Preview) area in the App Federation Metadata Url:
SSO Service url is under the App registrations area.
Click on App registrations or search for it
b. Find and click on your application
c. Click on Endpoints
d. The SSO Service url is in the SAML -P sign-on/out endpoint fields (
as shown in the screenshots below
).
Test the SAML SSO Azure B2C integration.
Jump in to IC with a url in the following format:
wide
https://sso.invoicecloud.com/saml/{BillerGuid}?Deeplinkid=1&account={AccountNumber}&ViewMode=0
b. Log in to the app
c. A successful jump should look something like this:
 URL:/spaces/PE/pages/4362371073/SAML+SSO+Azure+B2C+Integration+Setup+Documentation
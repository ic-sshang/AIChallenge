Sometimes, deployments using new YAML templates don’t go perfectly. It could be an issue with the pipeline itself, or one with the version of the application deployed - either way, there are times when we run a deployment using the newer YAML pipelines, then need to run the older release pipeline. 
This causes issues, as the new YAML template updates IIS site bindings. This is a nice improvement to the process, as it allows us to have several versions of the application present on the target VM at the same, greatly reducing the time taken to roll back a deployment. It doesn’t play well with the classic releases, though, as they expect IIS to be configured to run the apps without any change in config.
We’ve needed to manually intervene to correct this several times before. Fortunately, we’ve discovered an easier way to use the legacy pipelines after a YAML deployment has run. In an ideal world, we’d never need to do this, but I’d be shocked if more cases didn’t appear.
How can we adjust the classic release pipelines to work alongside the new YAML deployments?
It’s a one line addition! All that’s needed is the following command:
Set-ItemProperty IIS:\Sites\< site name here >\< site path here > -Name "physicalPath" -Value < app file location here >
For example:
Set-ItemProperty IIS:\Sites\www2.invoicecloud.com\crm -Name "physicalPath" -Value C:\Data\WWW\CRM
This line updates the IIS binding to the value expected by the classic release pipeline. It can be added to the Powershell step that restarts the IIS app pool, which should already be present in the classic releases. For example:
 URL:/spaces/platform/pages/2754871339/Rolling+Back+to+Classic+Release+Pipelines
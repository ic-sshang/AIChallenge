Payments
Scheduled payments can be a normal schedule in this case once the invoice is presented in the IC system, The biller user typically has 4 choices to make.
Pay the invoice immediately or anytime (via pay by text, kiosk, IVR, express payments, Customer Portal, Biller on behalf of Customer, Webservices (CloudPayments, Other WebServices) 
https://app.getguru.com/card/qc77xgkc/Express-Payments
Auto Payment - The invoice amount and time of payment is determined by IC and Biller User task is only set up Auto Pay which means selectinInvoice’s Due Date
Scheduled Payment - Same as Auto Payment except for the fact that the date can be decided by the Biller User which had to be before the Invoice Due Date. 
Recurring Scheduled Payment - The Biller User is given a choice to split the invoice amount and scheduled the payment. 
Scheduled Payments
Get the InvoiceID of the invoice that the customer created a scheduled payment for   
AccountNumber or InvoiceNumber should be provided by the ticket      
sql
select * from customers with (nolock) where billerid=388 and accountnumber='re-0501800000' 
select * from invoices with (nolock) where billerid=xx and invoicenumber='whatever'
-- PaymentDate column is the date the Customer scheduled payment.  
-- DateRecAdded is when the actual record was created.  
-- DateProcessed is the date when our process picked up this record, and processed it.  
-- PaymentID is ID that was created when this scheduled payment was processed
select * from scheduledpayments where invoiceid=161135316 order by scheduledpaymentid desc
The AutoPay and SchedulePay job are run as Azure Batch and the logs are in IC storage
Recurring Scheduled Payments
Description:
 
A recurring scheduled payment allows a registered payer to set up a recurring scheduled payment once, and our system will take over the remaining payments.  The recurring scheduled payment may be scheduled for a specific day of the month or the invoice due date.  The payer may choose a specific payment amount, or allow the system to pay the balance due or the total amount on the invoice due date. The recurring scheduled payment is tracked in Invoice Cloud.  Daily, our system will re-evaluate the configurations and adjust the balances or dates as needed. 
Note:
 Invoices that have less than 30 number of days between the invoice due date and payment expiration date are not eligible for recurring scheduled payments. 
For example, a registered payer has setup a recurring scheduled payment to pay full amount on invoice due date 3/1/2023 and the payment expiration date is 3/16/2023, then this invoice is not eligible for recurring scheduled payment because the number of days between the invoice due date and payment expiration date is less than 30.
Guru Card: 
https://app.getguru.com/card/7Td5LLxT/Recurring-Scheduled-Payments
Queries and Logs
IC looks at 
CustomerRecurringScheduledPayments 
at the table during the autopayschedulepay job run and inserts the rows in the table 
scheduledpayments 
for processing. Once the payment is done the records are updated to mark the payment completion.

select * from invoices where invoicenumber='697556' -- CustomerID=100899 -- InvoiceID=1336202
select * from customers where customerid=100899

select * from payments where invoiceid=1336202
select * from tbltransactiontype
select * from tblpaymenttype
select * from tblpaymentsource

select * from changelogs where tablename='scheduledpayments' order by 1 desc  --and fkid=107682

select * from scheduledpayments where invoiceid=1336202

select * from scheduledpayments where cast(dateprocessed as date) ='2022-12-22'
select * from scheduledpayments where customerid=100899
select * from scheduledpaymenthistory where invoiceid=1336202
select * from scheduledpayments where ScheduledPaymentID=107421
select * from scheduledpaymenthistory where invoiceid=1336202
select * from Recurringscheduledpaymentconfig
select * from tblscheduledpaymenttype

select * from mcl.customerlogins where customerid=100899
select * from mcl.loginuseractivity where loginid=42224 order by 1 desc
select * from CustomerRecurringScheduledPayments where customerid=100899
select * from scheduledpaymentprocessing where customerid=100899

-- The 'Recurring Scheduled Payment Confirmation' can be used to validate when a payment was scheduled
select * from emailqueue where emailqueuetypeid = 67 and emailrecipient like 'xxxxx@gmail.com'
select * from tblemailqueuetype where emailqueuetypeid = 67 
select * from scheduledpayments where invoiceid = 1336202
The AutoPay and SchedulePay job are run as Azure Batch and the logs are in IC storage
Additional Documentation
Recurring Scheduled Payments.docx
 URL:/spaces/DS/pages/2521039111/Scheduled+Payments
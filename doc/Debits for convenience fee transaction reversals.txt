 
User Story Title
- 
EBPP-5835-Debits for convenience fee transaction reversals
Functional Understanding
problem statement
 : Consumer pays $102 ($100 as invoice amount + $2 convenience fee). IC receives the entire $102, then IC pays the merchant $100, and keeps $2. Later, consumer charges back the transaction, here, Paypal Braintree takes $102 from IC and as such IC needs to recover only the $100 from the merchant but what currently happens is that IC takes $102 from the merchant instead.
debiting the biller that they never received got
Access 
: UI, db
Test area
 : API, db, UI(crm)
Scenarios/test steps
 :
T1 :
Create a transc for total bill amount $102 ($100 as invoice amount + $2 convenience fee
As a consumer, apply for full refund to IC
Result : IC to take $100 from merchant and give it to consumer. $2 not to be included in refund to consumer
T2:
Create a transc for total bill amount $102 ($100 as invoice amount + $2 convenience fee
As a consumer, apply for full refund to IC
Consumer cancels the refund after applying for refund
Result : IC to not process the refund…
T3:
repeat T1 for PSN subscriber
T4:
repeat T1 for PSN subscriber
Env 
: devtest4 ?
Test data
 :
Create a transc for total bill amount $102 ($100 as invoice amount + $2 convenience fee.
Create a transc for total bill amount $102 ($100 as invoice amount + $2 convenience fee. Apply refund and cancel refund.
Repeat 1 and 2 for PSN subscriber.
API :
IcpaymentProcessing API methods/endpoints : RMMRefund, RMMACHRejects, RMMDisputes
DB store proc
 : spVerifyRmmFunding
Technical Understanding
 Should we verify spACHRejectfuding from db.
ACH_Sale_Request.convieninceFee ==0.0 its hardCoded. in ACH_Reject_Response don’t have any convieninceFee property.
TotalACHRejectAmount
Which database test server we are using for ICPaymentProcessingApi.PayController .
 verifyCreditRMM Funding, spVerifycreditRMMFunding need to check.
TotalcreditRmmamount but need check about convienincefee.
 Don’t have convienincefee in Credit_RMM_Payment_response.
spverifydisputefunding need know the return parameters and verify convieninceFee .
VerifyDesputeFunding have totaldisputeamout but don’t have convieninceFee. 
We need check convince fee from db as per biller or terminalID.
References
Dispute Management Diagram
API Documents
RMMRefunds
 
RMMDisputes
 
RMMACHRejects
 
Dispute Management UI
 URL:/spaces/EN/pages/2537488404/Debits+for+convenience+fee+transaction+reversals
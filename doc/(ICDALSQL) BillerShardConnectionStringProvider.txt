Namespace
IC.Net.DataAccess.MsSql
Summary
The BillerShardConnectionStringProvider class provides a connection string provider that adds the biller shard component to the connection string.
Constructors
BillerShardConnectionStringProvider(int billerId)
Initializes a new instance of the BillerShardConnectionStringProvider class with the specified biller ID.
c#
public BillerShardConnectionStringProvider(int billerId)
Parameters
billerId
 ( 
Int32
 ): The ID of the biller. Must be greater than 0.
Exceptions
ArgumentException: Thrown when billerId is less than 1.
BillerShardConnectionStringProvider(int billerId, IConnectionStringProvider connectionStringProvider)
Initializes a new instance of the BillerShardConnectionStringProvider class with the specified biller ID and connection string provider.  This constructor modifies a existing connection string provider with the biller shard components.
c#
public BillerShardConnectionStringProvider(int billerId, IConnectionStringProvider connectionStringProvider)
Parameters
billerId
 ( 
Int32
 ): The ID of the biller. Must be greater than 0.
connectionStringProvider
 ( 
IConnectionStringProvider
 ): The connection string provider to use.
Exceptions
ArgumentException: Thrown when billerId is less than 1.
Methods
GetConnectionString
Returns the a modified connection string for the biller shard.
c#
public string GetConnectionString()
Returns
String
: The connection string for the biller shard.
Example
c#
IConnectionStringProvider connectionStringProvider = new DefaultConnectionStringProvider("Server=tcp:ic-dbtest-east-server1.database.windows.net; ");
BillerShardConnectionStringProvider provider = new BillerShardConnectionStringProvider(1, connectionStringProvider);
string connectionString = provider.GetConnectionString();
Example Usage With Managed Identity And Biller ID
c#
var connectionStringProvider = new BillerShardConnectionStringProvider( 
  500,
  new ManagedIdentityConnectionStringProvider(
      "YourCID", 
	  new DefaultConnectionStringProvider("Server=tcp:ic-dbtest-east-server1.database.windows.net; Database=DBMaster_GoldAzure;")
  )
);

var database = new Database(connectionStringProvider);
.
.
.
database.Dispose();
Â 
Remarks
The BillerShardConnectionStringProvider class uses a lazy initialization pattern to construct the connection string only when it is first accessed. This ensures that the connection string is not created until it is needed.
 URL:/spaces/ED/pages/3874881643/ICDALSQL+BillerShardConnectionStringProvider
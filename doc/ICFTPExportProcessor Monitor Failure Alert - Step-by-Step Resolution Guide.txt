Alert Description
This alert notifies that an FTP export task for a biller has encountered an issue. It originates from the Skybot job 'ICFTPExportProcessorMonitor', which checks the StratusExportProcessor table in the Perf_Logging shard every hour for failed exports.
Step 1: Identify the Failed Export
Review the alert message to identify the affected biller and the type of export that failed. Use the biller ID to investigate further.
Step 2: Investigate in Azure Application Insights
Go to the Azure Portal and open Application Insights for the ICFTPExportProcessor Azure Function.
Use KQL to search for traces containing the biller ID from the last 24 hours.
Focus on the Queue Trigger event (not the Timer Trigger) to find the failure.
Expand the trace to find the OperationID (GUID).
Run the query:
   traces | where operation_Id == '[Operation_IdGUID]'
Expand the 'Queue Trigger Function Exception' trace to view the exception details.
Step 3: Determine Resolution Path
Based on the exception:
If it's a communication error with Stratus, manually export the payment and drop the file in the biller's FTP folder.
If it's a code bug, fix the bug and manually export. Then create a Jira item to address the bug in production.
Step 4: Re-run the Export
To re-run the export:
Retrieve the queue message from the StratusExportProcessor table in the PerfLogging database.
Place the message in the 'file-export-queue' Azure queue in the 'icdevappstorage' Azure storage account.
Step 5: Special Case - SSI Billers
SSI exports use advanced settings in the biller's shard/CRM. To re-run:
Revert the settings using values from the changelogs table:
 
 SELECT * FROM changelogs WHERE TableName = 'BillerAdvancedSettings' ORDER BY 1 DESC
Use the OldValue field to restore original settings before requeuing the message.
Final Notes
Once the export is successfully re-run or manually completed, close the alert. Ensure any bugs are tracked via Jira for long-term resolution.
Common Issues:
Failure Retrieving Stratus Changelog File  
Failure Retrieving Stratus Payment File  
Failure Retrieving FTP Credentials  
File not copied to FTP folder  
Bad Gateway Error (502)  
NullReferenceException in changelog generation  
Invalid account number format (expected 9 digits)  
No export tasks found or DB call failed  
Export logic failed due to empty/null data rows  
“Active” column issue in changelog export  
Export shows in portal but not in FTP  
File corrupted with NUL characters on FTP
 URL:/spaces/PE/pages/4589650045/ICFTPExportProcessor+Monitor+Failure+Alert+-+Step-by-Step+Resolution+Guide
Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira tickets
Document status
draft
 
Document owner
 
Solution engineer
 
 
Invoice Cloud Web Services
The information in the Invoice Cloud Web Services section reflects the information given to Invoice Cloud at the time of Discovery and Design. It is possible for this information to be updated at any time by a biller or CIS Vendor without notifying Invoice Cloud.
Single Sign On
Purpose/Summary: Cloud SSO Connect is Invoice Cloud’s Implementation of a Single Sign On into the Invoice Cloud portal. This feature allows Billers and/or Partners to create a seamless experience for the Customer between Partner/Biller and Invoice Cloud systems, while keeping the scope of PCI compliance at a minimum for Partners and Biller
AquaTrax Login Flow:
Configuration
SSOConnect Details
Field
Required
Comments
Partner Specification
RemoteAuthenticationToken
Yes
Token is provided from Remote Authentication Web Service.
Token is provided from Remote Authentication Web Service.
ViewMode
Yes
Value is required to identify how the Customer is accessing the Invoice Cloud pages.
Always 
1
 = iFrame
RedirectID
Yes
Value is required to be able to redirect the Customer to the requested page. See full list: 
https://invoicecloud.atlassian.net/wiki/spaces/~71202056c4663ad5de4b79a3427191304b9e60/pages/3133865991/How+to+setup+Cloud+SSO+Connect+REST#Field-Definitions
 
1
 = Customer Portal Recent Bill Listing
2
 = Customer Portal Paperless Settings
3
 = Customer Portal AutoPay Settings
5
 = Customer Portal Payment Options
9
 = Customer Portal Scheduled Payments Listing
CSSUrl
No
The value is only required if a Partner/Biller would like to customize the Invoice Cloud Pages and if the 
CSSUrl
 value was not provided in the 
RemoteAuthentication
 web method call.
https://www.invoicecloud.com/ssotest/sso-gmp.css
ReturnUrl
No
When this value is provided, the customer will be redirected to the provided url after clicking the sign out button.
N/A
CustomReturnSiteName
No
When a 
ReturnUrl
 is provided, the tooltip text of the sign out button will change to “Sign out and Return to 
<SiteName>
”. 
<SiteName>
 defaults to the Biller DBA but can be customized by providing a value for 
CustomReturnSiteName
.
N/A
SAML Configuration
Configuration
Sample
Specification
Create SSO Connect Product through the CRM under Products
Activate Cloud SSO Connect
Enter credentials provided by Software Partner/Biller. You will receive the Entity ID, Metadata URL, SSO Service URL, SAML Claims Configurations (Email, LoginType, Account Number(Optional)) and LoginType Claim Mapping. The Certificate will be uploaded when the Metadata URL is entered and saved.
Further Examples and How to acquire credentials: 
SAML SSO
 
Complete testing by signing in as a customer through a SSO Redirect Link. The redirect link is created with the BillerGUID, Account Number, View Mode and DeepLinkID.
https://sso.invoicecloud.com/saml/c09d08fb-a969-4778-bb58-b46a8e9224e7?account=101Invoice&ViewMode=0&DeepLinkID=13 
 
User Stories:
AqualTrax Portal + InvoiceCloud Single Sign-On (SSO)
Workflow
Story
Assumptions & Requirements
Steps
Web Services 
Sample 
User Registration
User navigates to AquaTrax portal and registers through the AquaTrax member portal. After registration, logged in user makes a payment. 
Assumptions:
AquaTrax does not know if a Payer is registered with InvoiceCloud
AquaTrax stores Remote Authentication Token (per session) for use in 
CloudSSO Redirect User using the pre-defined URL
Requirement:
LogintypeID (REST- Remote Authentication- Register Accounts) is always = 5
Note: Standard IC functionality will be used in the case that logintypeID 5 is passed and there is no longtypeID 1. 
Check to see if account exists in invoice cloud and if it is registered.
If account does not exist:
Create Customer Record
Register Account(s)
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is not registered:
Register Accounts
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is registered:
Authenticate Account(s)
Registered User Payments workflows
REST- Remote Authentication- Retrieve Users
If account does not exist:
REST- Customers- Create Customer Record
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
If account does exist and is not registered:
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
If account does exist and is registered:
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
Login Page
Home Dashboard
Unregistered User Payment 
An unregistered user tries to make a one-time payment
Requirement: 
Set ‘CreateCustomerRecord’ to TRUE
AquaTrax will redirect Payer to InvoiceCloud Virtual Site.
Invoice Cloud Virtual Site
Biller Virtual Site
Registered User Payment 
A registered user is logged in and makes payments on a accounts.
Assumption:
User is already registered and authenticated
AquaTrax stores Remote Authentication Token from Remote Authentication web service
AquaTrax redirects (iFrame) to Customer Portal Recent Bill Listing
CloudSSOConnect (redirect 1 = Customer Portal Recent Bill Listing)
Pay Bill
Recent Invoices and Payment History
Full Payment
Partial Payment
Successful Payment
Managed Scheduled Payments
A registered user is logged in to AquaTrax portal and navigates to IC screen to  update or cancel a scheduled payment.
Assumption:
User is already registered and authenticated
AquaTrax redirects (iFrame) to Scheduled Payments screen
CloudSSOConnect (redirect 9 = Customer Portal Scheduled Payments Listing)
Saved Payment Method
Edit Card Information
Card History
Paperless Enrollment
A registered user is logged in to AquaTrax portal and navigates to IC screen to enroll or unenroll paperless option
Assumption:
User is already registered and authenticated
AquaTrax redirects (iFrame) to Customer Portal Paperless Settings screen
CloudSSOConnect (redirect 2 = Customer Portal Paperless Settings
)
iFrame Paperless Settings
AutoPay Enrollment
A registered user is logged in to AquaTrax portal and navigates to IC screen to enroll or unenroll autopay option
Assumption:
User is already registered and authenticated
AquaTrax redirects (iFrame) to Customer Portal AutoPay Settings screen
CloudSSOConnect (redirect 3 = Customer Portal AutoPay Settings
)
iFrame Autopay Settings
Update Password
Registered user logs into the AquaTrax portal and updates their password.
Assumptions: AquaTrax has the current email address and password of the user. 
Requirement: IC should not allow user to update password to maintain password information in sync.  
AquaTrax verify if Email and Password are the same as IC. 
Yes: call IC update password API
No: register a new user in IC.
REST- Remote Authentication- Update Password
Forgot Password
Reset Password
Manage Payment Methods
A registered user is logged in to AquaTrax portal and navigates to IC screen to store, update or remove payment methods.
Assumption:
User is already registered and authenticated
AquaTrax redirects (iFrame) to Payment Methods screen
CloudSSOConnect (redirect 5 = Customer Portal Payment Options)
Manage Account
Advanced Settings
Setting ID
Required/Optional/N/A
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
Invoice Types
Invoice Types
Virtual Site
Required Options
Input required integration options below.
ID
Option Description
Details
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, On Biller Quesitonnaire - BIF customization
AllowPartialPayments
Yes
AutoPayCollectionDate
BalanceForward
CreditCardServiceFee
FirstNotifyRequestedDate
InvoiceDate
InvoiceDueDate
InvoiceFormatGuid
InvoiceTypeID
LateFeeDate
LocationReference
MinimumAmountDue
PaymentExpirationDate
PaymentExpirationMessage
PromptPayExpirationDate
RegistrationValue
SecondNotifyRequestedDate
ThirdNotifyRequestedDate
User Interaction and Design
Data Flow - Invoice
Data Flow - Adjustments
Data Flow - Invoice Updates
Data Flow - Customer Update
Data Flow - Conveyance
Data Flow - Payment
Data Flow - Void
Data Flow - ACH Reject
Data Flow - Change Log
Data Flow - Bill Presentment
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Agent Experience
Biller Experience
User Stories
Integration Sizing
Total Initial LOE (By Story Points)
In Integration?
Name
Category
Component
Initial LOE (By Story Points)




1


incomplete


Y/N




Adjustments File Split
Adjustments
Biller File Split
5




2


incomplete


Y/N




Adjustments
Adjustments
Native Web Services
0




3


incomplete


Y/N




Balance Refresh
Adjustments
Real-Time Data Refresh
5




4


incomplete


Y/N




Adjustment File Conversion
Adjustments
File Conversion
8




5


incomplete


Y/N




Bill Presentment
Bill Presentment
HTML Template
8




6


incomplete


Y/N




Bill Presentment
Bill Presentment
Native Web Services
0




7


incomplete


Y/N




Bill Presentment
Bill Presentment
PDF Extraction
3




8


incomplete


Y/N




Bill Presentment
Bill Presentment
PDF Remote Linking
2




9


incomplete


Y/N




Change Logs
Change Logs
DataPump
5




10


incomplete


Y/N




Customer Status Report
Change Logs
File Export
3




11


incomplete


Y/N




Customer Change Log
Change Logs
File Export
2




12


incomplete


Y/N




Change Logs
Change Logs
Native Web Services
0




13


incomplete


Y/N




File Size Split
Invoices
Biller File Split
2




14


incomplete


Y/N




Invoice Update File Split
Invoices
Biller File Split
3




15


incomplete


Y/N




Pre-Processing
Invoices
Biller File Split
8




16


incomplete


Y/N




Batch Invoices
Invoices
Native Web Services
0




17


incomplete


Y/N




Single Invoices
Invoices
Native Web Services
0




18


incomplete


Y/N




Invoice Update
Invoices
Real-Time Data Refresh
1




19


incomplete


Y/N




Invoice Generation
Invoices
Real-Time Data Refresh
5




20


incomplete


Y/N




Invoice On-Demand
Invoices
Real-Time Data Refresh
13




21


incomplete


Y/N




Invoice File Conversion
Invoices
File Conversion
8




22


incomplete


Y/N




Invoice Generation
Invoices
Biller API Data Import
5




23


incomplete


Y/N




ACH Rejects
Payments
DataPump
5




24


incomplete


Y/N




Chargebacks
Payments
DataPump
5




25


incomplete


Y/N




Payment Export
Payments
DataPump
5




26


incomplete


Y/N




Voids
Payments
DataPump
3




27


incomplete


Y/N




ACH Rejects
Payments
File Export
5




28


incomplete


Y/N




Chargebacks
Payments
File Export
3




29


incomplete


Y/N




Payment Export
Payments
File Export
5




30


incomplete


Y/N




Voids
Payments
File Export
3




31


incomplete


Y/N




Payment Export
Payments
Native Web Services
0




32


incomplete


Y/N




Payment File Conversion
Payments
File Conversion
8




33


incomplete


Y/N




Conveyance File Split
Customers
Biller File Split
13




34


incomplete


Y/N




Customer Update File Split
Customers
Biller File Split
3




35


incomplete


Y/N




Customer Update
Customers
Real-Time Data Refresh
1




36


incomplete


Y/N




Endpoint Authentication
Real-Time Data Refresh
5




37


incomplete


Y/N




Endpoint Authentication
DataPump
5
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case/Solution
 URL:/spaces/IM/pages/3341156355/AquaTrax+Technical+Design
1. Current Behavior
How is 
LoginTypeID = 4
 (Group Oversight) integrated via:
McLogin
The Group Oversight login type is one of several user roles available in the MCL system, designed for scenarios such as landlords or agents who need visibility and limited control over multiple accounts. When registering or updating a user, the Group Oversight login type (typically LoginTypeId = 4) can be assigned. This is done during user creation or via the user management interface in the customer or biller portal. In the customer portal, Group Oversight users see a list of accounts and users they oversee. They can perform allowed actions but are restricted from user management functions.
Mclogin 1.3 Product Guide .pptx | Powered by Box
Remote Auth
By default, the Remote authentication API does not register a customer if a group oversight user is registered to an account that has no account owner. By design, the 
API 
will create a login for the user, hence why a successful response is generated, but the account itself is never registered. However, if a biller uses biller option 122, we will create the group oversight login and register the account when the Api is called.
RegisterCustomer Function Code Link
Where is the 
account owner dependency enforced
?
The dependency is enforced in the Remote Authentication endpoint. This endpoint calls the stored procedure 
mcl.spCustomerLogin
, which only returns a record if the customer has the Active bit on AND the registered bit on. When biller option 122 is off and the user registers a group oversight login with the 
RegisterAccountsForUser
 endpoint, then the 
API 
will create a new login but will NOT flip the registered bit on. Because of this, the stored procedure will never return the group oversight login in turn never creating a remote authentication token. 
RemoteAuthentication Function Code Link
endpoint: 
https://www.invoicecloud.com/remoteauthenticationapi/user/remoteauthentication
2. Feasibility and Options
Can Safety agents register without an account owner?
Yes, we currently have the functionality for them to register without the account owner if we turn on biller option 122 in the CRM.
Biller Option 122 OFF- User gets successful response for registering a group oversight user but the registered bit in the database does not reflect the registration.
Biller Option 122 ON - User gets successful response for registering a group oversight user and the registered bit in the database does reflect the registration. The user receives a remote auth token.
3. Global Impact
What happens if this change affects all billers?
Biller options will only impact the biller it is turned on for. It will not affect all our billers.
Are there 
edge cases
 or 
security concerns
?
Registering as a group oversight will mean the 
EmailOptOut
 bit is turned on. This occurs in the stored procedure 
mcl.spCreateLogin
. This is important to note as these users will not receive invoice notifications.
The link accounts endpoint will work for Safety’s use case so long as the customer that is being linked is registered.
OUT OF SCOPE
There is currently a bug in production for the Unregister 
API 
endpoint. When unregistering a group oversight user with biller option 122 on, the Api will delete the login but does not turn off the Registered bit in the database. This user is essentially registered with no login at this point
I narrowed down the cause to the mapping of the customer login. It looks like we never set the Registered property to what is pulled from the database; this causes the registered property to be set to false by default. Because of this when we enter the condition to determine if we should unregister a group oversight user, it always returns false since it believes the user is already registered
UnregisterAccount Function code link to group oversight condition
MapDataTableToCustomerLogins Function code link to where we don’t set the registered bit
Unregister api bug
 URL:/spaces/PE/pages/4612816898/WDIL-215+SPIKE+Investigate+Group+Oversight+user+account+registration+functionality+to+determine+approach+for+Safety+SSO
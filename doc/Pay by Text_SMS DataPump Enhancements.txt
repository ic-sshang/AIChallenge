Developer:
 
 
Test Engineer: 
 
Currently, the DataPump system does not report on pay-by-text enrollment, un-enrollment, and phone number changes. Billers are requesting this information to help synchronize internal biller systems and Invoice Cloud for Pay by Text payers.
Billers can opt-in to receive DataPump updates whenever a customerâ€™s pay-by-text status changes to one of the following:
Pending Pay by Text Registration
Enrolled
Unenrolled
Phone Number Changed
Relevant Items:
EBPP-18332
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-18327
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
EBPP-18424
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
DataPump Update Expectations
Biller Portal
Customer Portal
Portal Visual
New Customer Enrollment
Biller receives one DataPump update for customer enrollment
Biller receives 
2
 DataPump updates in total
Biller receives one DataPump update for customer pending registration
After the customer confirms pay by text enrollment,
 the Biller receives another
 DataPump update for customer enrollment
Existing customer re-enrollment
Biller receives one DataPump update for customer enrollment
Biller receives 
2 
DataPump updates in total
Biller receives one DataPump update for customer pending registration
After the customer confirms pay-by-text enrollment, biller receives another DataPump update for customer enrollment
Customer unenrollment
Biller receives one DataPump update for customer unenrolling
Biller receives one DataPump update for customer unenrolling
Phone number change
Biller receives one DataPump update for customer phone number change
Biller receives 
2
 DataPump updates in total
Biller receives one DataPump update for customer pending registration
After customer confirms pay by text enrollment with the new number, biller receives another DataPump update for customer enrollment
DataPump history in the biller portal will reflect the notifications sent to the biller. (Development work on datapump history for pay by text history is currently pending as of 6/28/2024 and is tracked by 
EBPP-19204
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 )
DataPump history page
Database Changes
Updated stored procedures:
SMS.updCustomerSMSMode
SMS.insCustomerSMSMode
When inserting a new SMS customer record, a DataPump record is created with 
OptionalSetting=0
When updating an existing SMS customer record, a DataPump record is created with 
OptionalSetting=1
PayByTextChanges
 column added to 
BillerDataPumpConfig
 table
Changelogs are linked to DataPump records by 
DataPumpID
New DataPump records are created with Pending type (12)
After changelogs are created and the DataPump record is linked to the changelogs, the new datapump record is set to type Pay by Text (11)
Changelogs not related to DataPump updates will have 
DataPumpID
=0
Changelogs linked to DataPump records are queried by Integrations to create the appropriate DataPump update. When a new SMS record is created for a customer (first time enrollment), no changelogs are inserted into the database. In this case, the customer information alone is sufficient to send a DataPump update.
Example DataPump record
Example changelog record
Biller Setup
In the CRM, enable Pay By Text Changes in the DataPump configuration.
Testing
Testing involves performing the following actions in the Biller and customer portals and then verifying the created DataPump records and changelogs:
Enroll new customer in pay by test
Un enroll customer from pay by text
Re-enroll customer in pay by text
Change phone number
In the customer portal, signing up for pay by text places the customer in a pending registration status until they confirm registration through their mobile device. To circumvent this, call this stored procedure: 
sms.updCustomerSMSMode @ChangeRequestorID=2,@PendingRegistration=0,@Registered=1,@CustomerID=<CustomerID>
Please refer to the x-ray tests linked to 
EBPP-18327
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 and 
EBPP-18424
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 for in depth examples on testing each use case.
 URL:/spaces/PE/pages/3370156043/Pay+by+Text+SMS+DataPump+Enhancements
Braintree/PayPal DSDR
1
7
PayPal DSDR has all the transactions that have been completed the previous day and the total amount is sent to IC Hyperwallet Account ( Virtual Account). IC sends the fund to the biller account number from the Hyperwallet Account. 
Job Name
Start time
End time
Days the job Run
Notes
PayPalDailyProcessing
5:30 AM CT
10:00 AM CT
Sunday to Monday
Only time the job run can late is during Sunday Maintenance
HypeWalletFileProcessing
3:30 PM CT
3:31 PM CT
Sunday to Monday
Only time the job run can late is during Sunday Maintenance
Purpose
Make sure the job picks the report from the sftp site and imports it into our IC system. 
Related Topics
[Insert related Guru Card/Confluence Links]
Context
This page will provide instructions on how to check whether the job has started and been completed without any issues.
How To 
Steps
Check Manually if the job has been kicked in Automate
No news is good news, look for the Alerts in OpsGenie for this job or 
#paypal-escalation-internal
Check around 9:00 AM CT in the Database whether the file has been uploaded.
Check at 3:20 PM CT for logic apps alert in 
#settlement-funding
If there are any errors in the above steps. Follow the 
https://invoicecloud.atlassian.net/wiki/spaces/DS/pages/2507177985/Braintree+PayPal+DSDR#Engagement-and-Escalation
 
Questions to Answer 
Did the job start on time and what time ?
Did the job execute as expected and complete on time?
How many records did the job process?
Do we have enough virtual wallet balance to make the payout to Billers?
Is there any mismatch and did the mismatch been reviewed by Finance?
Alerts and Notification
OpsGenie Alerts 
Job ICGateway-PayPalDailyProcessing-DSDR with run number 97648346 on agent IC-APP5_IC-APP5 entered FAILED status.
The alert has the attached log file. 
Slack Channels
#paypal-escalation-internal
 - Internal Slack channel to report issues
#settlement-funding
 - Internal slack channel to know the funding to payout for the Biller 
Give an idea about how much money we have in Hyper Wallet and the amount to Payout to the Biller. 
When the batch didn’t process properly then we will not be able to fund all the billers. The logic right now is to funding to the amount we have in the virtual wallet and what this means is some billers will not get the money. 
The below message is to start the investigation.
The payout is done by another job (HyperWallletFileProcessing) at 3:30 PM CT, there is an 
azure logic app
 run at 3:20 PM CT which is run by DataServices which posts this message. 
The reason for the logic app running closer to 3:30 PM CT is that the batches are closing throughout the day. 
Emails
The Opsgenie alert is generated from skybot alert and there is an email with the log sent by Automate Schedule server. 
Source Code
https://dev.azure.com/invoicecloud/Src/_git/ICPaymentProcessingAPI?_a=contents&version=GBmain
Look for the jobs folder - PayPalDailyFileProcessing
Database
DB Server: 
ic-gateway-east.database.windows.net
DB Name: ICGW_Master
Table Name: dbo.DSDR_Files
Run sql - selICGW_Balance to get the balance for that time.
Look for Record Count and Match Count. When there is an unmatched entry, there is a message is posted in the 
#paypal-escalation-internal
 
Someone from finance will review and research - Sara Faied or Courtney Sprecher will investigate. 
Skybot (Automate)
Search for the job and look at the history
Known Issues/Problems
The files are not on the sftp site due to a delay at the PP end
The file sftp might fail to copy
DB Timeout - The file moved but failed to commit in the Database
After scheduled maintenance, the jobs have to be started manually
Engagement and Escalation 
Start an email conversation with the Wicked Tendies team. Look for 
who is on call
 in opsgenie and if there is no response in a reasonable time. Page the team to draw attention.
Manager escalation - 
 
Critical Metrics
Impact data and Casual data 
Impact Data determines 
who 
is being affected, Causal Data identifies 
what 
is being affected and why.
Actionable Metrics
Informational Metrics
Business Metrics
 URL:/spaces/DS/pages/2507177985/Braintree+PayPal+DSDR
Page Navigation
Jira ticket 
INT-2517
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Release Date
12/21/2021
Document status
In progress
Yellow
Document owner
 
 
Solution engineer
 
Knowledge Transfer
API Documentation
OAuth notes:
ApplicationKey: 
MiFNrRTMV13YRwHl1QFnkDMaQJCgyvKj
ApplicationSecret: 
tFsoRjFxIZE5dn3u
Authentication requires a valid access token and a valid CSRF token. 
The access token must be generated first via the GenerateToken endpoint
The CSRF token can only be obtained with a valid access token
The access token expires roughly 29 minutes after creation and will need to be regenerated, along with the CSRF token
Please use the following Postman Environment & Collection for reference
Both files need to be imported into Postman - the environment file contains the applicationKey and applicationSecret variables that are used to authenticate the collection requests
SOAP notes:
Authentication credentials
Username: 
sb-5de94005-a54e-4b5b-82b9-803211e7571e!b4009|it-rt-com-batonrougewater-integration-dev!b34
Password: 
f10897d3-ba19-4d87-bf00-3dfbcc89eba4$NqZMp2oqHmrEa5w5JbDkV10j5Rt0NpYpKvuhf4nHDkU=
Please see the following WSDL and instructions for creating a new project in SoapUI for reference 
 
 
Additional Notes:
Fields in Parameters in
 
Orange 
are
 indicative of a change in name or function
 with respect to the previous version
The 
Notes Section
 in every version will have a description of the difference between version with respect to previous version if applicable
Details
IC Use
Partner API Name
Description
Request Type:
Request
Response
Specifications
OAuth Access Token
GenerateToken
Generate an access token for use in getting a CSRF token
REST
POST OAuth Access Token EndPoint
Production:
Test:
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com:443/v1/OAuthService/GenerateToken
Request Headers:
Basic Auth
username
 = ApplicationKey (see OAuth Notes above)
password
 = ApplicationSecret (see OAuth Notes above)
grant_type
 = 
client_credentials
*Note: the access token 
expires_in
 1799 seconds (~29 minutes) and will need to be regenerated
Success:
json
{
    "refresh_token_expires_in": "0",
    "api_product_list": "[InvoiceCloudService]",
    "api_product_list_json": [
        "InvoiceCloudService"
    ],
    "organization_name": "aghxd6ogdzvu5vikzfbf",
    "developer.email": "niranjan.malwade@utegration.com",
    "token_type": "BearerToken",
    "issued_at": "1705085541895",
    "client_id": "MiFNrRTMV13YRwHl1QFnkDMaQJCgyvKj",
    "access_token": "sCA5NBmgFdFjAoLXom9Jkl08mj5Q",
    "application_name": "c4838580-42bd-4b73-ae8d-af7ff175a6b3",
    "scope": "",
    "expires_in": "1799",
    "refresh_count": "0",
    "status": "approved"
}
Code Repository
:
FileName/ClassName
:
OAuth CSRF Token
Retrieve a CSRF token
REST
GET CSRF Token EndPoint
Production:
Test:
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com/v1/api/invoicecloudservice
Request Headers:
Authorization
 = 
Bearer {access_token}
 (valid access_token required from the OAuth response above)
application_key
 = ApplicationKey (see OAuth Notes above)
x-csrf-token
 = 
fetch
Response Headers:
x-csrf-token
 = CSRF token to authenticate future REST calls
Code Repository
:
FileName/ClassName
:
RTDR: Balance Update
BalanceRetrievalSet
Send current balance
REST
GET Balance EndPoint
Production:
Test:
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com/v1/api/invoicecloudservice/BalanceRetrievalSet(`{contractAccount}`)
Parameter:
contractAccount
 = AccountNumber
Example: 
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com/v1/api/invoicecloudservice/BalanceRetrievalSet('10100000109')
*Note: Access token and CSRF token required for auth
Success:
xml
<?xml version="1.0" encoding="utf-8"?>
<entry xml:base="https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/" xmlns="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">
    <id>https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/BalanceRetrievalSet('10100000109')</id>
    <title type="text">BalanceRetrievalSet('10100000109')</title>
    <updated>2024-01-12T16:58:58Z</updated>
    <category term="ZCSS_INVOICECLOUD_SRV.BalanceRetrieval" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
    <link href="BalanceRetrievalSet('10100000109')" rel="self" title="BalanceRetrieval"/>
    <content type="application/xml">
        <m:properties>
            <d:contractAccount>10100000109</d:contractAccount>
            <d:balance>100.000</d:balance>
        </m:properties>
    </content>
</entry>
Failure:
Unable to fetch updated account balance
Code Repository
:
RTDR
FileName/ClassName
:
Data Pump: Payment
CashPointPaymentCreateNotificationMessage
Deliver Payment Data from IC to Biller
SOAP
Payments Webservice:
Production:
Test:
https://com-batonrougewater-integration-dev.it-cpi009-rt.cfapps.us20.hana.ondemand.com/cxf/ICPaymentNotification
Request XML
Parameters:
MessageHeader.ID
 = always 
TWC
 for Baton Rouge
MessageHeader.CreationDateTime
 = current datetime in format YYYY-MM-DDTHH:mm:ss
CashPointReferenceID =
IC-WEB-AC
 for customer portal CC (not AMEX) or ACH payments
IC-WEB-AX
 for customer portal AMEX payments
IC-WEB-PP
 for customer portal PayPal payments
IC-IVR-AC
 for IVR CC (not AMEX) or ACH payments
IC-IVR-AX
 for IVR AMEX payments
IC-AUT-AC
 for autopay CC (not AMEX) or ACH payments
IC-AUT-AX
 for autopay AMEX payments
IC-CSR-AC
 for CSR initiated CC (not AMEX) or ACH payments
IC-CSR-AX
 for CSR initiated AMEX payments
IC-BPY-AC
 for Online Bank Direct ACH payments
IC-POS-AC
 for POS CC (not AMEX) or ACH payments
IC-POS-AC
 for POS AMEX payments
CashPointOfficeReferenceID =
IC-WEB
for customer portal payments
IC-IVR
 for IVR payments
IC-AUT
 for autopay payments
IC-CSR
 for CSR initiated payments
IC-BPY
 for Online Bank Direct payments
IC-POS
 for POS payments
CashPointPaymentGroupReferenceID
 = current date in YYYYMMDD format
PaymentTransactionID
 = PaymentGUID
*NOTE: PaymentGUID must be stripped of hyphens; SAP cannot accept a PaymentTransactionID greater than 35 characters
PaymentAmount
 = Payment amount (not including service fees) with 
currencyCode
 always set to 
USD
ValueDate
 = 
Payment date in YYYY-MM-DD format
OnAccountIndicator
 = 
false
PayerContractAccountID
 = AccountNumber
OutgoingPayment
 = 
false
PayerParty.InternalID
 is required but can be left as 
?
ContractAccountReferenceID
 = AccountNumber
ClearingAmount
 = Payment amount (not including service fees) with 
currencyCode
 always set to 
USD
xml
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:glob="http://sap.com/xi/SAPGlobal/Global">
   <soapenv:Header/>
   <soapenv:Body>
      <glob:CashPointPaymentCreateNotificationMessage>
         <MessageHeader>
            <ID>TWC</ID>
            <CreationDateTime>2024-03-05T01:00:00</CreationDateTime>
         </MessageHeader>
         <CashPointPayment>
            <CashPointReferenceID>IC-WEB-CC</CashPointReferenceID>
            <CashPointOfficeReferenceID>IC-WEB</CashPointOfficeReferenceID>
            <CashPointPaymentGroupReferenceID>20240305</CashPointPaymentGroupReferenceID>
            <PaymentTransactionID>42e65a16ab6c4ae0b7e6d60a6040d426</PaymentTransactionID>
            <PaymentAmount currencyCode="USD">11.11</PaymentAmount>
            <ValueDate>2024-03-05</ValueDate>
            <OnAccountIndicator>false</OnAccountIndicator>
            <PayerContractAccountID>110100000370</PayerContractAccountID>
            <OutgoingPayment>false</OutgoingPayment>
            <PayerParty>
               <InternalID schemeID="?" schemeAgencyID="?">?</InternalID>
            </PayerParty>
            <PaymentExplanation>
               <ContractAccountReferenceID>110100000370</ContractAccountReferenceID>
               <ClearingAmount currencyCode="USD">11.11</ClearingAmount>
            </PaymentExplanation>
         </CashPointPayment>
      </glob:CashPointPaymentCreateNotificationMessage>
   </soapenv:Body>
</soapenv:Envelope>
*Note: username/password required for auth
*Note: ConvenienceFee should be subtracted from PaymentAmount to exclude service fees
Success:
HTTP response code = 202 Accepted
Failure:
Errors will potentially come via generic HTTP response codes but even a 202 Accepted response may result in processing errors that are not returned to IC.
Code Repository
:
DataPump
FileName/ClassName
:
Payment Code Mapping:
Credit Card = 
Visa =
Mastercard = 
Discover = 
AmericanExpress =
PayPal =
Venmo =
ACH = 
OBD = 
IVR = 
Payment Source ID - Payment Source Description: 
1 - Web Services
2 - Biller Portal 
3 - Customer Portal
4 - Express Payments
7 - Online Bank Direct 
8 - POS - Point of sale
10 - IVR
11 - Cloud Payments
12 - Cloud Store - Consumer Initiated
13 - Cloud Store - Biller Initiated
14 - Shopping Cart
15 - Auto Pay
16 - Scheduled Payment
17 - Biller Portal - Easy Pay
18 - CSR - One Time Pay
19 - Kiosk
20 - Mobile Express Payments
21 - Harris GoMobile
22 - Recurring Scheduled Payment
23 - Pay By Text
26 - Live Agent Payment
27 - Agent Connect
Data Pump: Paperless Enrollment
PaperLessSet
Deliver updates information to biller alerting them of customer enrollment
REST
POST Paperless EndPoint
Production:
Test:
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com/v1/api/invoicecloudservice/PaperLessSet
Request Body JSON:
contractAccount
 = AccountNumber
eMail
 = EmailAddress
paperLess
 = true/false
json
{
    "contractAccount": "110100000001",
    "eMail": "test@test.com",
    "paperLess": true
}
*Note: Access token and CSRF token required for auth
Success
:
xml
<?xml version="1.0" encoding="utf-8"?>
<entry xml:base="https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/" xmlns="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">
    <id>https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/PaperLessSet('110100000001')</id>
    <title type="text">PaperLessSet('110100000001')</title>
    <updated>2024-01-12T17:09:29Z</updated>
    <category term="ZCSS_INVOICECLOUD_SRV.PaperLess" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
    <link href="PaperLessSet('110100000001')" rel="self" title="PaperLess"/>
    <content type="application/xml">
        <m:properties>
            <d:contractAccount>110100000001</d:contractAccount>
            <d:eMail>test@test.com</d:email>
            <d:paperLess>true</d:paperLess>
        </m:properties>
    </content>
</entry>
Failure:
Unable to update paperless status
Code Repository
:
DataPump
FileName/ClassName
:
Data Pump: AutoPay Enrollment
AutoPaySet
Deliver updates information to biller alerting them of customer autopay enrollment
REST
POST AutoPay EndPoint
Production
:
Test:
https://com-batonrougewater-integration-dev.prod.apimanagement.us20.hana.ondemand.com/v1/api/invoicecloudservice/AutoPaySet
Request Body JSON:
contractAccount
 = AccountNumber
autoPay
 = true/false
json
{
    "contractAccount": "110100000001",
    "autoPay": true
}
*Note: Access token and CSRF token required for auth
Success:
responseCode
 = 
00
xml
<?xml version="1.0" encoding="utf-8"?>
<entry xml:base="https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/" xmlns="http://www.w3.org/2005/Atom" xmlns:m="http://schemas.microsoft.com/ado/2007/08/dataservices/metadata" xmlns:d="http://schemas.microsoft.com/ado/2007/08/dataservices">
    <id>https://ws1onsap:443/sap/opu/odata/sap/zcss_invoicecloud_srv/AutoPaySet('110100000001')</id>
    <title type="text">AutoPaySet('110100000001')</title>
    <updated>2024-01-12T17:23:39Z</updated>
    <category term="ZCSS_INVOICECLOUD_SRV.AutoPay" scheme="http://schemas.microsoft.com/ado/2007/08/dataservices/scheme"/>
    <link href="AutoPaySet('110100000001')" rel="self" title="AutoPay"/>
    <content type="application/xml">
        <m:properties>
            <d:message m:type="ZCSS_INVOICECLOUD_SRV.Response">
                <d:responseCode>00</d:responseCode>
                <d:responseMessage>Success</d:responseMessage>
            </d:message>
            <d:contractAccount>110100000001</d:contractAccount>
            <d:autoPay>true</d:autoPay>
        </m:properties>
    </content>
</entry>
Failure:
Unable to update autopay status
Code Repository
:
DataPump
FileName/ClassName
:
Data Pump: Void Payment
CashPointPaymentReverseNotificationMessage
Deliver notification of voided payments
SOAP
Void Payment Webservice 
Production
:
Test:
https://com-batonrougewater-integration-dev.it-cpi009-rt.cfapps.us20.hana.ondemand.com/cxf/ICPaymentReverseNotification
Request:
MessageHeader.ID
 = always 
TWC
 for Baton Rouge
MessageHeader.CreationDateTime
 = current datetime in format YYYY-MM-DDTHH:mm:ss
CashPointReferenceID =
IC-WEB-AC
 for customer portal CC (not AMEX) or ACH payments
IC-WEB-AX
 for customer portal AMEX payments
IC-WEB-PP
 for customer portal PayPal payments
IC-IVR-AC
 for IVR CC (not AMEX) or ACH payments
IC-IVR-AX
 for IVR AMEX payments
IC-AUT-AC
 for autopay CC (not AMEX) or ACH payments
IC-AUT-AX
 for autopay AMEX payments
IC-CSR-AX
 for CSR initiated AMEX payments
IC-BPY-AC
 for Online Bank Direct ACH payments
IC-POS-AC
 for POS CC (not AMEX) or ACH payments
IC-POS-AC
 for POS AMEX payments
CashPointOfficeReferenceID =
IC-WEB
for customer portal payments
IC-IVR
 for IVR payments
IC-AUT
 for autopay payments
IC-CSR
 for CSR initiated payments
IC-BPY
 for Online Bank Direct initiated payments
IC-POS
 for POS payments
PaymentTransactionID
 = PaymentGUID of the transaction being voided
*NOTE: PaymentGUID must be stripped of hyphens; SAP cannot accept a PaymentTransactionID greater than 35 characters
ReversalValueDate
 
= payment date of the transaction being voided
xml
<n0:CashPointPaymentReverseNotificationMessage xmlns:n0="http://sap.com/xi/SAPGlobal/Global">
 <!-- Message Headers are informational only -->
 <MessageHeader>
  <ID>TWC</ID>
  <CreationDateTime>2023-11-19T13:20:00Z</CreationDateTime>
 </MessageHeader>
 <CashPointPaymentReverse>
  <CashPointReferenceID>IC-WEB-CC</CashPointReferenceID> 
  <CashPointOfficeReferenceID>IC-WEB</CashPointOfficeReferenceID>
  <PaymentTransactionID>{PaymentGUID}</PaymentTransactionID>
  <ReversalValueDate>2023-11-19</ReversalValueDate>
 </CashPointPaymentReverse>
</n0:CashPointPaymentReverseNotificationMessage>
Success:
HTTP response code = 202 Accepted
Failure:
Errors will come via generic HTTP response codes
Code Repository
:
DataPump
FileName/ClassName
:
Payment Code Mapping:
Credit Card = 
Visa =
Mastercard = 
Discover = 
AmericanExpress =
PayPal =
Venmo =
ACH = 
OBD = 
IVR = 
Payment Source ID - Payment Source Description: 
1 - Web Services
2 - Biller Portal 
3 - Customer Portal
4 - Express Payments
7 - Online Bank Direct 
8 - POS - Point of sale
10 - IVR
11 - Cloud Payments
12 - Cloud Store - Consumer Initiated
13 - Cloud Store - Biller Initiated
14 - Shopping Cart
15 - Auto Pay
16 - Scheduled Payment
17 - Biller Portal - Easy Pay
18 - CSR - One Time Pay
19 - Kiosk
20 - Mobile Express Payments
21 - Harris GoMobile
22 - Recurring Scheduled Payment
23 - Pay By Text
26 - Live Agent Payment
27 - Agent Connect
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: .txt
File Naming Convention: N/A
File Delimiter: '|'
Specification:
Sample File: 
SFTP File Path: ToInvoiceCloud\Invoices
File Transfer Frequency: When new bills are created.
note
Note:
 Deposits will be sent through Agent Connect, creating an invoice on the fly


Note:
 Deposits will be sent through Agent Connect, creating an invoice on the fly


Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Description
Record Type
1
RowType
 N
TRUE
 Set by IC - Always 'FH”
 
File Header
2
BillerGuid
 N
TRUE
 Set by IC
 
File Header
3
ThirdPartyFileReference
 
FALSE
 
 
File Header
4
FileCreationDate
 N
TRUE
 Set by IC
 
File Header
5
InvoiceCount
 N
TRUE
 Set by IC
 
File Header
6
TotalInvoiceAmount
 N
TRUE
 Set by IC
 
File Header
7
RowType
 N
TRUE
 Set by IC - always 
IH
 
Invoice Header
8
RecordType
 N
TRUE
Always 
N
 for new
 
Invoice Header
9
InvoiceFormatGuid
 N
TRUE
 Set by IC
 
Invoice Header
10
InvoiceNumber
 Y
TRUE
 Invoice
 
Invoice Header
11
InvoiceDate
Y 
TRUE
Bill Date
 
Invoice Header
12
InvoiceDueDate
Y 
TRUE
 Bill Due Date
 
Invoice Header
13
TotalAmountDue
Y 
TRUE
 Original Bill Amount
If 
Original Bill Amount
  is empty or has a whitespace, the 
TotalAmountDue 
is set to 0.0
If 
Original Bill Amount
 ends with a hyphen, e.g. 
150.55-
, 
TotalAmountDue
 has a credit.
Invoice Header
38
Custom1
 Y
FALSE
Business Partner
 
Invoice Header
39
Custom2
Y 
FALSE
 Service Address
 
Invoice Header
40
Custom3
Y 
FALSE
 Service Address City
 
Invoice Header
41
Custom4
Y 
FALSE
 Service Address State
 
Invoice Header
42
Custom5
Y 
FALSE
 Service Address Zip
 
Invoice Header
43
Custom6
Y
FALSE
Account Type
Will be 
R
 for residential or 
B
 for business/commercial
Invoice Header
93
BalanceDue
Y 
FALSE
 Current Account Balance
If 
Current Account Balance
 is empty or has a whitespace, the 
BalanceDue 
is set to 0.0
Invoice Header
252
InvoiceTypeID
N
TRUE
 Set by IC 
1 when Account Type = R (residential)
42 when Account type = B (business/commercial)
 
Invoice Header
407
PastDue
Y 
FALSE
 Past Due Amount
If 
Past Due Amount
  is empty or has a whitespace, the 
PastDue 
is set to 0.0
Invoice Header
58
RowType
Y 
TRUE
 Set by IC - Always 'CR”
 
Customer Record
59
AccountNumber
Y 
TRUE
 Contract Account 
Customer Record
60
CustomerName
Y 
TRUE
 Customer Name
 
Customer Record
61
Address1
Y 
FALSE
 Billing Address
 
Customer Record
62
Address2
 N
FALSE
 
 
Customer Record
63
City
Y 
FALSE
 Billing Address City
 
Customer Record
64
State
Y 
FALSE
 Billing Address State
 
Customer Record
65
Zip
Y 
FALSE
 Billing Address Zip
 
Customer Record
66
Phone
Y 
FALSE
 Phone
 
Customer Record
67
EmailAddress
Y 
FALSE
 Email
 
Customer Record
68
CustomerVATNumber
Y 
FALSE
 Business Partner
 Need to store this here to make it easier to use for customer changes file
Customer Record
69
RegistrationValue
N 
FALSE
 
 
Customer Record
70
RowType
 
TRUE
 Set by IC - Always ‘ID’
 
Invoice Detail
ACH Rejects File
File Summary/Purpose: The purpose of this file is to transfer ACH rejects, refunds, and chargebacks to to the biller from IC.
File Extension: .txt
File Naming Convention: N/A
File Delimiter: Following SAP’s Return Lot File format, the data is parsed based on line breaks and character positioning. Fields are assigned a specific character count spanning a specific range of character positions. Please see the attached documentation and the sample file below for the details on file structure.
The file is structured as such:
File Header Record (one)
Return Lot Header Record (one)
Return Lot Item Record (one or more)
Field Mapping
Record Type
Field #
Field Description
Character Count
Character Position
IC Field / Value
Notes
File Header
1
Indicates the File Header Record
1
1
Always set to 
0
2
Parameter to identify testing or production
3
2-4
Testing is 
140
, production is 
tbd
Value is dynamic per biller
3
Application area
1
5
Always set to 
R
Return Lot Header
1
Indicates the Return Lot Header Record
1
1
Always set to
 1
2
Table name of the header record
30
2-31
Always set to 
BFKKRK
Must be left justified starting at position 2
3
Unique identifier for the Return Lot
12
32-43
RIC
 + YYYYMMDD + 
1
Example: 
RIC202401301
RIC
 is always fixed
YYYYMMDD is the current date
Last value is a sequential number to create uniqueness if multiple files are sent same day - we will only be sending one per day
4
Optional batch characteristic 
40
44-83
Always empty spaces
5
Reconciliation key - exact same as field #3
12
84-95
RIC
 + YYYYMMDD + 
1
Always the same as field #3
6
Bank clearing account for returns
10
96-105
0000131507
 for Baton Rouge
*Utegration said this value may change
Account number is right justified with zeros appended to fill the left-most positions
Value is dynamic per biller
7
Company code
4
106-109
1009
 for Baton Rouge
Value is dynamic per biller
8
Optional business area
4
110-113
Always empty spaces
9
Document type
2
114-115
Always set to 
RT
10
Currency key
5
116-120
Always set to 
USD
Left justified
11
Exchange rate
10
121-130
Always empty spaces
12
Posting date of the document
8
131-138
Current date in format 
YYYYMMDD
13
Document date of the return
8
139-146
Current date in format 
YYYYMMDD
14
Date return is reflected in biller’s bank file
8
147-154
Current date in format 
YYYYMMDD
15
General ledger indicator
1
155
Always set to one empty space
16
Clearing reason
2
156-157
Always set to 
10
17
Lot contains returns for incoming payments
1
158
Always set to 
X
18
Lot contains returns for outgoing payments
1
159
Always empty space
19
Bank charges include tax
1
160
Always empty space
20
Return amounts include bank charges
1
161
Always empty space
21
Bank country key
3
162-164
Always empty spaces
22
Bank keys
15
165-179
Always empty spaces
23
Bank account number
18
180-197
Always empty spaces
24
Short key for a house bank
5
198-202
UPPCH
 for Baton Rouge
*Utegration said this value may change for BR
Value is dynamic per biller
25
Bank account number in SAP
5
203-207
68447
 for Baton Rouge
*Utegration said this value may change for BR
Value is dynamic per biller
26
Calculate charges automatically
1
208
Always set to 
X
27
Accept returns over tolerance limit
1
209
Always empty space
28
Returns posting type
1
210
Always set to 
1
29
Specified debit total
15
211-225
Always set to 
000000000000000
Always 15 zeros
30
Specified credit total - total amount of returns in the batch
This total amount should NOT include service fees.
15
226-240
Example for total returns of $2525.50: 
000000000252550
Total value is right justified 
Assume two decimals in positions 239, 240 (no decimal point)
Remaining spaces to left of value should be filled with zeros
31
Total number of return item records
6
241-246
Example for 115 total returns:
000115
Total return count is right justified
Remaining spaces to left of total return count are filled with zeros
32
Enhanced returns processing
1
247
Always set to 
X
33
Profit center
10
248-256
Always empty spaces
256 is the LAST character position in this Return Lot Header row
Return Lot Item
1
Indicates Return Lot Item Record
1
1
Always set to 
2
2
Table name of the item record
30
2-31
Always set to 
BFKKRP
BFKKRP
 must be left justified
3
Selection category 1
1
32
Always set to 
B
 
4
Unique payment ID
20
33-52
Always empty spaces
Due to the length of the PaymentGUID, the PaymentGUID will be placed in field #31
5
Return amount
This return amount should NOT include service fees.
16
53-68
Payment return amount
Example for return amount of $1500.25: 
000000000150025-
This is the RejectAmount from the ACH Rejects table.
Amount must be right justified, assuming two decimal places with no decimal point.
All character positions left of the return value are zeros.
Always add a hyphen 
-
 after the last decimal place.
6
Return amount in local currency
This return amount should NOT include service fees.
16
69-84
Payment return amount
Example for return amount of $1500.25: 
000000000150025-
This is the RejectAmount from the ACH Rejects table.
Amount must be right justified, assuming two decimal places with no decimal point.
All character positions left of the return value are zeros.
Always add a hyphen 
-
 after the last decimal place.
7
Spaces
16
85-100
Always empty spaces
8
Spaces
16
101-116
Always empty spaces
9
Spaces
16
117-132
Always empty spaces
10
Spaces
16
133-148
Always empty spaces
11
Spaces
16
149-164
Always empty spaces
12
Spaces
16
165-180
Always empty spaces
13
Spaces
16
181-196
Always empty spaces
14
Spaces
16
197-212
Always empty spaces
15
Spaces
2
213-214
Always empty spaces
16
Spaces
2
215-216
Always empty spaces
17
Spaces
2
217-218
Always empty spaces
18
Spaces
2
219-220
Always empty spaces
19
Bank clearing account for the payment being returned
10
221-230
0000131507
 for Baton Rouge
*Utegration said this value may change
Account number is right justified with zeros appended to fill the left-most positions
This will need to be dynamic per biller
20
Company code
4
231-234
1009
 for Baton Rouge
Value is dynamic per biller
21
Spaces
4
235-238
Always empty spaces
22
Document type
2
239-240
Always set to 
RT
23
Currency key
5
241-245
Always set to 
USD
24
Exchange rate (empty space)
10
246-255
Always empty spaces
25
Return posting date
8
256-263
Current date in format 
YYYYMMDD
26
Return document date
8
264-271
Current date in format 
YYYYMMDD
27
Return value date
8
272-279
Current date in format 
YYYYMMDD
28
Indicator to create item in general ledger
1
280
Always one empty space
29
Return reason
3
281-283
Refunds-RFD
ACH Rejects-ACH
Chargebacks- CBK
30
House bank’s return reason (empty space)
6
284-289
Always set to spaces
31
Note to payee
80
290-369
PID: {PaymentGUID}
 + 
CA: {AccountNumber}
 
example:
PID: ca8984b478674454b65b3c   e79de67b6d   CA: 110100000307
PaymentGUID must be stripped of hyphens. PaymentGUID will be left-justified for the first 40 characters, filling unused character positions with spaces.
AccountNumber will begin at character position 41, filling remaining character positions with spaces. 
NOTE: this must be the PaymentGUID tied to the original payment being refunded, not the unique PaymentGUID generated by the refund transaction.
32
Banking country of business partner
3
370-372
Always set to 
US
US
 must be left justified with one empty space to the right
33
Routing number of customer’s bank (empty space)
15
373-387
Always set to spaces
34
Last four of customer’s bank account (empty space
18
388-405
Always set to spaces
35
International bank account number (empty spaces)
34
406-439
Always set to spaces
36
Number of returned check (empty spaces)
16
440-455
Always set to spaces
37
Accept charges over tolerance limit (empty space)
1
456
Always set to space
38
Short key for house bank
5
457-461
UPPCH
 for Baton Rouge
*Utegration said this value may change for BR
Value is dynamic per biller
39
Biller bank account # in SAP
5
462-468
68447
 for Baton Rouge
*Utegration said this value may change for BR
Value is dynamic per biller
40
Returns posting type
1
467
Always set to 
1
41
Enhanced returns processing
1
468
Always set to 
X
42
Empty space
10
469-478
Always empty spaces
43
Empty space
8
479-486
Always empty spaces
44
Empty space
5
487-491
Always empty spaces
45
Empty space
11
492-501
Always empty spaces
501 is the LAST character position in this Return Lot Item row
Advanced Settings
Setting ID
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
 
 N/A
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
 
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
on biller questionnaire - BIF customization 
AutoPayCollectionDate
on biller questionnaire - BIF customization 
BalanceForward
required - BIF customization 
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
on biller questionnaire - BIF customization  
InvoiceDate
in BIF
InvoiceDueDate
in BIF 
InvoiceFormatGuid
N/A 
InvoiceTypeID
in BIF
LateFeeDate
N/A
LocationReference
N/A 
MinimumAmountDue
N/A 
PaymentExpirationDate
N/A 
PaymentExpirationMessage
N/A 
PromptPayExpirationDate
N/A 
RegistrationValue
N/A 
SecondNotifyRequestedDate
on biller questionnaire - BIF customization  
ThirdNotifyRequestedDate
on biller questionnaire - BIF customization 
User Interaction and Design
Data Flow - Invoice
att2117173276
1967423498
1
1
IM
att2117173271
att2117500929
0
Data Flow - Adjustments
att2116943904
1967423498
1
2
IM
att2117599233
att2117369860
0
Data Flow - Payment
att2117730305
1967423498
1
3
IM
att2117468164
att2117697537
0
Data Flow - ACH Reject
att2117795841
1967423498
1
4
IM
att2117763078
att2117763073
0
Data Flow - Change Log
att2117402637
1967423498
1
5
IM
att2117894145
att2117271555
0
Data Flow - Payer Experience
Payer will use standard IC Virtual Site and Customer Portal
Data Flow - Biller Experience
Biller will use standard IC Biller Portal
Batch Close File Format
A CSV file will be sent daily to close the batch. The batch close file format will look like:
Date format: YYYYMMDD
*ReferenceID date reflects the date of the batch (date when payments were made)
Total amount format: 1000.00
ReferenceID
WEB
IVR
Autopay
CSR/AgentAssisted
Online Bank Direct
POS
CCACH
(batch date YYYYMMDD)
(total amount)
(total amount)
(total amount)
(total amount)
(total amount)
(total amount)
AMEX
(batch date YYYYMMDD)
(total amount)
(total amount)
(total amount)
(total amount)
0.00
(total amount)
PAYPAL
(batch date YYYYMMDD)
(total amount)
0.00
0.00
0.00
0.00
0.00
Date format: YYYYMMDD
Total amount format: 10528.96
Filename format: Daily_Batch_Close_YYMMDD_HHMMSS.txt
Example filename: Daily_Batch_Close_240408_051800.txt
*Date/time in the filename should be when the file is generated
Example of what the file’s data should look:
ccach,20240408,1060.12,56.45,156.75,235.15,147.45,953.49
amex,20240408,241.00,235.47,58.00,146.57,0.00,176.24
paypal,20240408,150.00,0.00,0.00,0.00,0.00,0.00
Additional Information
Baton Rouge is utilizing multi-login. Multi-login does not have any impact on the SAP integration.
Invoice Cloud Web Services
N/A
 URL:/spaces/IM/pages/1967423498/SAP+Utegration+Technical+Design
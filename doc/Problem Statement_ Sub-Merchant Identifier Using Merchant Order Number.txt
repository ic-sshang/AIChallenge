Overview
Date Created:
 August 21, 2025
Author:
 Randy Torres
Status:
 Open
Priority:
 High
Problem Description
The current proposal for constructing the Merchant Order Number (used as the unique transaction identifier by Chase) relies on a format that includes the 
BillerID
, 
InvoiceTypeID
, and a 
Unique Transaction Identifier
. While this structure works for single-invoice transactions, challenges arise when processing 
shopping cart payments
 that contain multiple invoices across different invoice types. In these scenarios, the current approach does not clearly define whether the system should generate a single consolidated Merchant Order Number (one debit for all invoices in the cart) or separate identifiers for each invoice, leading to ambiguity in downstream processing and reconciliation.
Context
InvoiceCloud, acting as the PayFac, must generate a unique Merchant Order Number for each transaction that is passed to Chase. Chase allows up to 40 characters for this identifier, while InvoiceCloud currently supports 32 characters in the 
RejectReference
 field of the payments table.
The proposed identifier format is:
BillerID
 (up to 6 digits)
InvoiceTypeID
 (3–4 digits reserved)
Unique Transaction Identifier
 (remaining characters)
This structure is sufficient for transactions tied to a single invoice type. However, in the case of 
shopping cart payments with multiple invoice types
, it is unclear how to group transactions. For example, should the PayFac create:
One consolidated debit
 covering all invoices, or
Multiple debits
 for each invoice type?
This ambiguity directly impacts how payments are represented in Chase files, reconciled by InvoiceCloud, and ultimately recognized in Biller CIS systems.
Impact
If the Merchant Order Number structure is not designed to account for shopping cart payments containing multiple invoice types, two significant issues emerge:
Payer Experience
 – Instead of seeing a single consolidated charge on their bank account or credit card statement, payers may see multiple individual debits corresponding to each invoice type in the cart. This creates confusion, reduces trust in the payment process, and can increase disputes or support inquiries.
Funding Complexity for Billers
 – Since funding rules can vary by invoice type, grouping multiple invoices into a single transaction introduces reconciliation challenges. Billers may expect funding to be allocated differently based on invoice type configurations, but a consolidated charge obscures this detail. Conversely, if multiple charges are used, InvoiceCloud must reconcile those separately and ensure they map accurately to the Biller’s funding instructions.
Together, these issues complicate both 
customer-facing transparency
 and 
back-office reconciliation accuracy
.
Stakeholders
Product Team
 – Responsible for determining the business approach to handling shopping cart payments, including whether funding configurations should be tied to payment source, invoice type, or a combination of both.
Engineering Team
 – Accountable for implementing the Merchant Order Number logic, ensuring compatibility across invoice types, and making any necessary database or system changes to support shopping cart scenarios.
Billers
 – Require accurate and timely funding into the correct bank accounts. They depend on InvoiceCloud’s system to allocate funds correctly across potentially mixed invoice types within shopping cart payments.
Customer Support
 – Will be responsible for addressing payer concerns if multiple charges appear on their statements instead of a single consolidated debit, and for handling related escalations.
Reconciliation Team
 – Supports Billers by helping resolve discrepancies that may arise between the Biller Portal reports, CIS records, and actual funding outcomes in shopping cart scenarios.
Constraints or Considerations
Identifier Mapping Challenge
 – If the Merchant Order Number is mapped at the invoice type level, shopping cart payments containing multiple invoice types create ambiguity. The system must either consolidate these into a single identifier (impacting funding accuracy) or split them into multiple identifiers (impacting payer experience).
Payer vs. Biller Needs
 – There is an inherent trade-off between the payer’s expectation of seeing a single consolidated charge and the Biller’s requirement to receive funding allocations by invoice type. Any solution must balance these competing needs.
Terminal Configuration Dependency
 – The payment engine relies on terminals being configured, with invoice types and payment sources mapped to those terminals. This dependency constrains flexibility and may limit options for how invoice type-based identifiers can be implemented without major rework of existing payment engine logic.
Success Criteria
The business has made a clear decision on how the Merchant Order Number should be structured and managed in shopping cart scenarios, including how it ties to funding rules (by invoice type, payment source, or a combination).
The chosen approach balances payer expectations (single vs. multiple charges) with Biller requirements for accurate funding allocations.
A defined strategy is documented and agreed upon by Product, Engineering, and Reconciliation teams, ensuring consistent implementation across systems.
Once the decision is finalized, Engineering can proceed with designing and implementing the identifier logic in alignment with funding and reconciliation needs.
Related Documentation
SubMerchant_Payment_Funding_WorkFlow.docx
 
Option 1
Option 2
Option 3
Description
No redesign of funding configuration. We utilize the existing system and manage an internal MID at a terminal level. 
Minor updates to the Terminals page in CRM that allow for easier configuration of funding details. 
Complete redesign of funding configuration. No longer relying on the terminals page to configure funding. 
Compared to Current
Same as current
New
New
LOE
N/A
Medium
Large
Risks
None, this is how IC works today. 
Cass & Braintree also utilize this model. 
Increased Engineering effort, manage backwards compatibility for the non-payfac model. 
Increased Engineering effort, will require code changes in high risk areas such as payment route & fee calculations. 
Benefits & Value
 
Improves the UX for those who manage funding configuration while offering the flexibility to expand on funding management. 
Increase options for funding configurations + service fee configurations. 
Workaround(s)
None 
The terminal area will get updated to support an easier way to manage Banks, Invoice Types, and Payment Sources.
Provide a new UX to configure funding but still tie to terminals in the back end. Allows us to maintain the back end for payment route and fee calculations. 
 URL:/spaces/EA/pages/4596138054/Problem+Statement+Sub-Merchant+Identifier+Using+Merchant+Order+Number
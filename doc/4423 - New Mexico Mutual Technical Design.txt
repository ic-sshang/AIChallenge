Page Navigation:
Jira tickets
Document status
draft
 
Document owner
 
Solution engineer
 
New Mexico Mutual uses Out of the box Guidewire Cloud Native Accelerator. This page documents only their SSO integration.
Invoice Cloud Web Services
The information in the Invoice Cloud Web Services section reflects the information provided to Invoice Cloud at the time of Discovery and Design. It is possible for this information to be updated at any time by a biller or CIS Vendor without notifying Invoice Cloud.
Single Sign On
Purpose/Summary: Cloud SSO Connect is Invoice Cloud’s Implementation of a Single Sign-On into the Invoice Cloud portal. This feature allows Billers and/or Partners to create a seamless experience for the Customer between Partner/Biller and Invoice Cloud systems while keeping the scope of PCI compliance at a minimum for Partners and Billers.
Configuration
SSOConnect Details
Field
Required
Comments
Partner Specification
RemoteAuthenticationToken
Yes
Token is provided from Remote Authentication Web Service.
Token is provided from Remote Authentication Web Service.
ViewMode
Yes
Value is required to identify how the Customer is accessing the Invoice Cloud pages.
Always 
0
RedirectID
Yes
Value is required to be able to redirect the Customer to the requested page. 
19 = Customer Welcome
CSSUrl
No
New Mexico Mutual displays Invoice Cloud in an   and has created a custom CSS URL.
ReturnUrl
No
When this value is provided, the customer will be redirected to the provided URL after clicking the sign out button.
CustomReturnSiteName
No
When a 
ReturnUrl
 is provided, the tooltip text of the sign out button will change to “Sign out and Return to 
<SiteName>
”. 
<SiteName>
 defaults to the Biller DBA but can be customized by providing a value for 
CustomReturnSiteName
.
User Stories: 
https://invoicecloud.app.box.com/file/1845435614397
 
InHance Portal + InvoiceCloud Single Sign-On (SSO)
Workflow
Story
Assumptions & Requirements
Steps
Web Services 
Sample
User Access
User navigates to New Mexico Mutual portal and try to log in the account. 
Assumptions:
The user knows their login credentials
Check to see if login successful:
If login successfully:
Authenticate Account(s)
Acquire Remote Authentication Token
Retrieve CustomerGUID
Retrieve User Accounts
Sync all accounts of Invoice Cloud
If login failed:
Register Account(s)
Authenticate Account(s)
Acquire Remote Authentication Token
REST- Remote Authentication- Retrieve Users
If login successfully: 
REST- Remote Authentication- Remote Authentication
REST - Customer Portal-Retrieve CustomerGUID
REST- Remote Authentication- Retrieve User Accounts
If login failed:
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO  
Login Page
User Registration
User navigates to New Mexico Mutual portal and registers through the member portal. After registration 
Assumptions:
New Mexico Mutual does not know if a Payer is registered with InvoiceCloud.
New Mexico Mutual stores Remote Authentication Token (per session) for use in 
CloudSSO Redirect User using the pre-defined URL.
Requirement:
LoginTypeID (REST- Remote Authentication- Register Accounts) is always = 1
Check to see if account exists in invoice cloud and if it is registered.
If account does not exist:
Create Customer Record
Register Account(s)
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is not registered:
Register Accounts
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is registered:
Authenticate Account(s)
Registered User Payments workflows
REST- Remote Authentication- Retrieve Users
If account does not exist:
REST- Customers- Create Customer Record
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO  
If account does exist and is not registered:
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO  
If account does exist and is registered:
REST- Remote Authentication- Remote Authentication
CloudSSO  
User Registration
Registered User Payment 
A registered user is logged in and makes payments on a account.
Assumption:
User is already registered and authenticated
New Mexico Mutual stores Remote Authentication Token from Remote Authentication web service
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
Managed Scheduled Payments
A registered user is logged in to New Mexico Mutual portal and navigates to IC screen to  update or cancel a scheduled payment.
Assumption:
User is already registered and authenticated
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
Paperless Enrollment
A registered user is logged in to New Mexico Mutual portal and navigates to IC screen to enroll or unenroll paperless option
Assumption:
User is already registered and authenticated
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
Paperless
AutoPay Enrollment
A registered user is logged in to New Mexico Mutual portal and navigates to IC screen to enroll or unenroll autopay option
Assumption:
User is already registered and authenticated
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
AutoPay
Pay By Text Enrollment
A registered user is logged in to New Mexico Mutual portal and navigates to IC screen to enroll or unenroll Pay By Text 
Assumption:
User is already registered and authenticated
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
Pay By Text
Update Email and Password
Registered user logs into the New Mexico Mutual portal and updates their password.
Assumptions: 
Neptune has the current email address and password of the user.
Requirement: 
IC should not allow user to update password to maintain password information in sync.
New Mexico will verify if Email and Password are the same as IC.
Yes: call IC update password and email API
No: Send verification email to stored account user email address. Once it’s approved, then call IC updated password and email API.
REST- Remote Authentication- Update Password
Update Email Address
Manage Payment Methods
A registered user is logged in to New Mexico Mutual portal and navigates to IC screen to store, update or remove payment methods.
Assumption:
User is already registered and authenticated
New Mexico Mutual redirects to Welcome Page screen where the user will navigate accordingly
CloudSSOConnect (redirect 19 = Welcome Page)
Saved Payment Methods
Required Options
Setting ID
Description
Value
Is value unique per biller? (Y/N)
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case/Solution
 URL:/spaces/IM/pages/4519624733/4423+-+New+Mexico+Mutual+Technical+Design
Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira tickets
Document status
complete
Green
 
Document owner
 
 
Solution engineer
 
 
API Documentation
Details
Version
IC Use
Partner API Name
Description
Request
Response
Specifications
San Gabriel Valley Water
RTDR: balance update with disconnect data
GetAccountWithDisconnectData
Used to get an account’s balance with amount to avoid disconnect and disconnect date
xml
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:tem="http://tempuri.org/">
   <soap:Header/>
   <soap:Body>
      <tem:GetAccountWithDisconnectData>
         <tem:PortalID>?</tem:PortalID>
         <!--Optional:-->
         <tem:Key>?</tem:Key>
         <!--Optional:-->
         <tem:Customer>?</tem:Customer>
         <!--Optional:-->
         <tem:Account>?</tem:Account>
      </tem:GetAccountWithDisconnectData>
   </soap:Body>
</soap:Envelope>
<soap:Envelope xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
   <soap:Body>
      <GetAccountWithDisconnectDataResponse xmlns="http://tempuri.org/">
         <GetAccountWithDisconnectDataResult>
            <ResponseCode>-2</ResponseCode>
            <CurrentBalance>0</CurrentBalance>
            <IVRStatus>0</IVRStatus>
            <BillNumber>0</BillNumber>
            <BillDate>0001-01-01T00:00:00</BillDate>
            <BillDueDate>0001-01-01T00:00:00</BillDueDate>
            <BillAmount>0</BillAmount>
            <PastDueAmount>0</PastDueAmount>
            <PaymentAmount>0</PaymentAmount>
            <PaymentDate>0001-01-01T00:00:00</PaymentDate>
            <CashOnly>false</CashOnly>
            <DisconnectDate>0001-01-01T00:00:00</DisconnectDate>
            <PendingPayment>0</PendingPayment>
            <PaymentPlanType>0</PaymentPlanType>
            <DrawPayment>false</DrawPayment>
            <ArrangementAmount>0</ArrangementAmount>
            <ArrangementDate>0001-01-01T00:00:00</ArrangementDate>
            <ArrangementStatus>0</ArrangementStatus>
            <ServiceOrder>false</ServiceOrder>
            <PastDueDate>0001-01-01T00:00:00</PastDueDate>
            <AmountDueBeforeDueDate>0</AmountDueBeforeDueDate>
            <EnabledPaymentMethods>None</EnabledPaymentMethods>
            <DisconnectAmount>0</DisconnectAmount>
            <NDaysPastDueBalance>0</NDaysPastDueBalance>
         </GetAccountWithDisconnectDataResult>
      </GetAccountWithDisconnectDataResponse>
   </soap:Body>
</soap:Envelope>
If DisconnectAmount and DisconnectDate exist, DisconnectAmount will be mapped to minimum amount due on IC payment pages
The minimum amount must be paid
For AUS moving forward:
The minimum amount to avoid disconnect is CA state law and may be required for other billers
This should be configurable by biller in an advanced setting
Requires a new AUS service version
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: .bif
File Delimiter: Pipe
Specification: BIF
Sample File: 
https://invoicecloud.box.com/s/u7inway637di5s05b0l51mg9enxun0nd
 
SFTP File Path:
File Transfer Frequency: Daily
Notes: San Gabriel will use “R” type invoices until their integration goes live with AUS. WE will not receive a balance/Adjustment file and San Gabriel will replace invoices daily.
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
YES
TRUE
 
Char
 
FH'
File Header
2
BillerGuid
YES
TRUE
 
 
 
See Specs
File Header
3
ThirdPartyFileReference
NO
FALSE
 
 
 
 
File Header
4
FileCreationDate
YES
TRUE
 
DATE
System date
Date
File Header
5
InvoiceCount
YES
TRUE
 
Integer
Calculated count on accounts 
 
File Header
6
TotalInvoiceAmount
YES
TRUE
Calculated amount
Decimal(11,2)
Sum of TotalAmountDue
 
File Header
7
RowType
YES
TRUE
 
 Char
 
 
Invoice Header
8
RecordType
YES
TRUE
 
 
 
 
Invoice Header
9
InvoiceFormatGuid
YES
TRUE
 
 
 
 
Invoice Header
10
InvoiceNumber
YES
TRUE
customerBillPresentationDate
varchar(50)
account number-Presentation Date no forward slash on date
 
Invoice Header
11
InvoiceDate
YES
TRUE
customerBillPresentationDate
DATE
Latest Presentation Date
 
Invoice Header
12
InvoiceDueDate
YES
TRUE
customerBillPresentationDate
DATE
Presentation Date + 19 days
 
Invoice Header
13
TotalAmountDue
YES
TRUE
CustAmtDue_AR
Decimal(11,2) 
Total Amount due Balance
 
Invoice Header
407
PastDue
YES
FALSE
CustAmtPastDue_AR
 
Amount past due
 
Invoice Header
58
RowType
YES
TRUE
 
 
 
 
Customer Record
59
AccountNumber
YES
TRUE
 
 
 
 
Customer Record
60
CustomerName
YES
TRUE
getCustName
 
 
 
Customer Record
61
Address1
YES
FALSE
Table: BLPSA. Fields: SADN1S,
SADS1S
 
Service Address
 
Customer Record
62
Address2
YES
FALSE
N/A
 
 
 
Customer Record
356
BlockPaymentsCC
 
FALSE
 
 
 
 
Customer Record
357
BlockPaymentsEFT
YES
FALSE
 
 
YES if in hot file
 
Customer Record
70
RowType
YES
TRUE
 
 
 
 
Invoice Detail
Payment/Lockbox File
File Summary/Purpose: The purpose of this file is transfer payment data from IC to the biller
File Extension: .Txt
File Naming Convention: Date.Payments.txt
File Delimiter: FIxed Length
Specification: 
https://invoicecloud.app.box.com/file/1207038706153
Included Payment Types:
Only Approved Payments
Sample File:
https://invoicecloud.app.box.com/file/1207040383448
 
SFTP File Path:
File Transfer Frequency: Daily, If no payments send blank.
Notes: Left Justified, 0 padded for dollar values
Field Mapping
Column Name
Data Type
Length
Nullable
Default Value
Text
IC FieldName
RECTYPHDR
CHARACTER
1
No
'H' 
REC TYPE
RowType
NBRPMTHDR
NUMERIC
7,0
No
Payment Count
TOTAL NUMBER OF PAYMENTS
PaymentCount
AMTPMTHDR
NUMERIC
12,0
No
TotalPaymentAmount
TOTAL AMOUNT OF PAYMENTS
TotalPaymentAmount
TIMESTMPHDR
NUMERIC
6
No
Current timestamp HH:MM:SS
TIME STAMPO FOR FILE CREATION
FileCreationTime
RECTYPDTL
CHARACTER
1
No
'D'
REC TYPE
RowType
REFERENCE_NUMBER
NUMERIC
11,0
No
PaymentGUID
Unique payment reference number
PaymentReference
ACCOUNT_NUMBER
CHARACTER
32
YES
Account Number
Customer account Number entered as past of payment
AccountNumber
PAYMENT_FIRSTNAME
CHARACTER
64
YES
Payer First Name
Customer's first name entered as part of payment, Middle included with First Name
CustomerName
PAYMENT_LASTNAME
CHARACTER
64
YES
Payer Last Name
Customer's last name entered as part of payment- LAST NAME ONLY
CustomerName
PAYMENT_AMOUNT
NUMERIC
10,2
YES
Payment Amount
Payment amount in format ###.00
PaymentAmount
PAYMENT_STATUS
CHARACTER
32
YES
Accepted
Payment status = ACCEPTED,CANCELED,RETURNED
PAYMENT_CHANNEL
CHARACTER
32
YES
Payment Method
Visa, MasterCard, Disc, AmEx, PayPal, Venmo, EFT
Payment method used for this payment
PAYMENT_METHOD_TYPE
CHARACTER
32
YES
Payment Type ID
Payment Method Type
PaymentTypeID
CUSTOMER_DAY_PHONE
NUMERIC
10,0
YES
+0
Customer Day Phone
Phone
CUSTOMER_EMAIL
CHARACTER
256
YES
LEAVE BLANK
Customer e_Mail
LEAVE BLANK
PMTDTEDTL
TIMESTAMP
6
No
Current timestamp MM:DD:YYYY
PAYMENT DATE/TIME
PaymentDate
RECTYPTRL
CHARACTER
1
No
'T'
RECORD TYPE, DEFAULT TO 'T'
NBRPMTTRL
NUMERIC
7,0
No
Payment Count
TOTAL NUMBER OF PAYMENTS
PaymentCount
AMTPMTTRL
NUMERIC
12,2
No
TotalPaymentAmount
TOTAL AMOUNT OF PAYMENTS
TotalPaymentAmount
TMESTMPTRL
TIMESTAMP
6
No
Current timestamp HH:MM:SS
TIME STAMPO FOR FILE CREATION
FileCreationTime
Advanced Settings
Setting ID
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
Invoice Types
Invoice Types
Virtual Site
Required Options
Input required integration options below.
ID
Option Description
Details
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, On Biller Quesitonnaire - BIF customization
AllowPartialPayments
AutoPayCollectionDate
BalanceForward
CreditCardServiceFee
FirstNotifyRequestedDate
InvoiceDate
InvoiceDueDate
InvoiceFormatGuid
InvoiceTypeID
LateFeeDate
LocationReference
MinimumAmountDue
PaymentExpirationDate
PaymentExpirationMessage
PromptPayExpirationDate
RegistrationValue
SecondNotifyRequestedDate
ThirdNotifyRequestedDate
User Interaction and Design
Data Flow - Invoice
Data Flow - Adjustments
Data Flow - Invoice Updates
Data Flow - Customer Update
Data Flow - Conveyance
Data Flow - Payment
Data Flow - Void
Data Flow - ACH Reject
Data Flow - Change Log
Data Flow - Bill Presentment
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Agent Experience
Biller Experience
User Stories
Invoice Cloud Web Services
API Name
API Use/Purpose
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case/Solution
 URL:/spaces/IM/pages/2714993368/BID+3715+San+Gabriel+Technical+Design
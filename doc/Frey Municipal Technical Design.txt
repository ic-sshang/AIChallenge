Page Navigation
Jira ticket 
Release Date
Document status
Done
Green
Document owner
 
Solution engineer
 
Salesforce SOW
Knowledge Transfer
https://us-21061.app.gong.io/call?id=6516424589130894514
 
API Documentation
API will just be used for bill linking.
Sample Bills:
Sample Request:
Details
IC Use
Partner API Name
Description
Request
Response
Specifications
Bill Presentment
Bill Presentment
The values needed for PDF linking are sent to InvoiceCloud in invoice file.  Necessary values are used to retrieve the images.
The invoice URL is located in Custom 13 (example) 
https://www.cubicutilitybilling.com/cgi/CustomerViewBill.acu
VBSessionID = “InvoiceCloud” located in Custom 14
VBKey= Custom15
VBCompanyCode = Custom16
Bill Presentment
Bill Presentment
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: .csv
File Naming Convention: NA
File Delimiter: ','
Specification: 
Sample File: 
SFTP File Path: ToInvoiceCloud/Invoices
File Transfer Frequency: When billing occurs
File is split into three record types, customer, detail and usage records. Each new account will start with the tag ‘Customer’ in first column
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
N
TRUE
N/A Set by IC - Always 'FH'
File Header
2
BillerGuid
N
TRUE
N/A Set by IC
File Header
4
FileCreationDate
N
TRUE
N/A Set by IC
File Header
5
InvoiceCount
N
TRUE
N/A Set by IC
File Header
6
TotalInvoiceAmount
N
TRUE
N/A Set by IC
File Header
7
RowType
N
TRUE
N/A Set by IC Always ‘IH’
Invoice Header
8
RecordType
N
TRUE
N/A Set by IC - Always 'N'
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A Set by IC
Invoice Header
10
InvoiceNumber
Y
TRUE
Invoice Number (Customer Level, Position 68)
Numeric
9
Invoice Header
11
InvoiceDate
Y
TRUE
Billing Date (Customer Level, Column 12)
Alphanumeric
10
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due Date Customer Level, column 9
Alphanumeric
10
Invoice Header
13
TotalAmountDue
Y
TRUE
Total New Charges (Customer level, column 72)
Amount
13
Invoice Header
38
Custom1
Y
FALSE
Service Address 1 (Customer Level, Column 31)
39
Custom2
Y
FALSE
Service Address 2 (Customer Level, Column 32)
40
Custom3
Y
FALSE
Service Address City (Customer Level, Column 33)
41
Custom4
Y
FALSE
Service Address State (Customer Level, Column 34)
42
Custom5
Y
FALSE
Service Address Zip (Customer level, column 35)
43
Custom6
Y
FALSE
Book (Customer Level, column 3) 
Alphanumeric
This field has leading 0s
5
Invoice Header
44
Custom7
Y
FALSE
Account (Customer level, column 4)
Alphanumeric
This field has leading 0s
10
Invoice Header
45
Custom8
Y
FALSE
Book (Customer Level, column 3)  - Account (Customer level, column 4)
Numeric
46
Custom9
Y
FALSE
Display Book (Customer level, column 5)
Numeric
10
Invoice Header
47
Custom10
Y
FALSE
Display Account (Customer level, column 6)
Numeric
10
Invoice Header
94
Custom11
Y
FALSE
Display Book (Customer level, column 5) - Display Account (Customer level, column 6)
Numeric
5
Invoice Header
95
Custom12
Y
FALSE
Customer Number (there is a 1:1 relationship between customer numbers and accounts, not one to many) (Customer Level, column 75)
Alphanumeric
Invoice Header
96
Custom13
Y
FALSE
Invoice URL (Customer Level, column 77)
Alphanumeric
Invoice Header
97
Custom14
Y
FALSE
VBSessionID (Customer Level, column 78)
Numeric
Invoice Header
98
Custom15
Y
FALSE
VBKey (Customer level, column 79)
Alphanumeric
Invoice Header
99
Custom16
Y
FALSE
VB Company Code (Customer level, column 80)
Alphanumeric
Invoice Header
100
Custom17
Y
FALSE
International Address Flag (Customer level, column 29)
Invoice Header
101
Custom 18
Y
FALSE
Previous Balance (Customer level, column 37)
Invoice Header
102
Custom 19
Y
FALSE
Past Due Amount (Customer level, column 67)
Invoice Header
103
Custom20
Y
FALSE
Level Bill Description (Customer level, column 62)
Invoice Header
104
Custom21
Y
FALSE
Net Previous Balance (Customer level column 46)
Invoice Header
93
BalanceDue
FALSE
IF 
Level bill Description (Customer level, column 62) = “BUDGET PAYMENT”:
Set to Level Bill Amount (Customer level, column 63)
Else
 (other cases)
:
Bill Total (Customer Level, column 47)
12
Invoice Header
194
BalanceForward
FALSE
BIF Customization, always set to yes
Invoice Header
407
PastDue
FALSE
Net Previous Balance (Customer level column 46)
Amount
13
Invoice Header
58
RowType
TRUE
Set by IC, Always ‘CR’
Customer Record
59
AccountNumber
TRUE
Customer Number
(Customer level, column 75)
Alphanumeric
10
Customer Record
60
CustomerName
TRUE
Bill Name (Customer Level, Column 20)
Alphanumeric
45
Customer Record
61
Address1
FALSE
Bill Address 1 + Bill Address 2 + Bill Address 3 + Bill Address 4 (Customer Level, Column 21-24)
If any bill address field is blank do not include in concatenation
bill address 3 and bill address 4 are used for international addresses only
45 for each bill address field
Customer Record
63
City
FALSE
Bill City (Customer Level, Column 25)
20
Customer Record
64
State
FALSE
Bill State (Customer Level, Column 26)
2
Customer Record
65
Zip
FALSE
Bill Zip Code (Customer Level, Column 27)
12
Customer Record
373
DisplayAccountNumber
FALSE
Display Book - Display Account
Customer Record
70
RowType
TRUE
Set by IC, Always ‘ID’
Invoice Detail
Adjustment File
File Summary/Purpose: The purpose of this file is transfer bill/invoice updated balance data to IC from the biller
File Extension:  .csv
File Naming Convention: 
File Delimiter:  ',' (comma delimited)
Specification: 
Sample File: 
SFTP File Path:
File Transfer Frequency: Daily
Adjustment file will contain a list of all accounts, not just accounts that have changed, this may require file processor.
Field Mapping
IC FileSpecID
IC Field Name
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
305
RowType
N
TRUE
Set by IC, Always ‘AH’
File Header
306
BillerGuid
N
TRUE
Set by IC
File Header
308
FileCreationDate
N
TRUE
Set by IC
File Header
309
AdjustmentCount
N
TRUE
Set by IC
File Header
310
TotalAdjustmentAmount
N
TRUE
Set by IC
File Header
311
RowType
N
TRUE
Set by IC, always ‘AR’
Adjustment Record
312
InvoiceNumber
N
FALSE
Not needed (balance forward)
Adjustment Record
313
AccountNumber
Y
TRUE
CustomerNumber 
(Field 1)
Numeric
10
Adjustment Record
314
AdjustmentAmount
Y
TRUE
Balance (Field 4) 
(This field will be the budget billing amount for budget billing accounts)
Amount
13
Adjustment Record
316
AdjustmentTypeID
N
TRUE
2 = Balance differential
Adjustment Record
Customer Update File
File Summary/Purpose: IC is taking daily adjustment file and splitting it into an adjustment file, a customer update file, and an invoice update file. The purpose of the customer update file is to update the blocked status of accounts
File Extension:  .csv
File Naming Convention:  N/A
File Delimiter:  ',' (comma delimited)
Specification: 
Sample:
IC FileSpecID
IC Field Name
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
58
RowType
N
Y
Set by IC, Always CR
59
AccountNumber
Y
Y
CustomerNumber (Field 1)
Numeric
10
409
Active
Y
Y
Blocked Status (Y = Deactivate N = Active)
Alphanumeric
1
Invoice Update File
File Summary/Purpose: 
IC is taking daily adjustment file and splitting it into an adjustment file, a customer update file, and an invoice update file. 
Update file is being used to keep past due up to date.
File Extension: .csv
File Naming Convention: N/A
Specification: 
Sample:
Account Number: 
CustomerNumber 
(Field 1)
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Character Limit
Record Type
10
InvoiceNumber
Y
T
Invoice number is not in the adjustment file, since they are balance forward this will have to be pulled as the most recent invoice on the account
Invoice Header
59
AccountNumber
Y
Y
CustomerNumber (Field 1)
Numeric
10
Customer Record
407
Past Due
Y
T
Past Due
13
Invoice Header
Payment/Lockbox File
File Summary/Purpose: The purpose of this file is transfer payment data from IC to the biller
File Extension:  .txt
File Naming Convention:  ICPayments_YYYYMMDD.txt
File Delimiter: Fixed position
Specification: 
ACH Reject Requirements:
 No
C-Code Rejects included? 
No
I
nclude Credits & Chargebacks?
 NO
Credits? 
No
Chargebacks? 
No
Sent a Negative value, using dash indicator? 
No
Sample File: 
SFTP File Path: FromInvoiceCloud/Payments
File Transfer Frequency: Daily
Field Mapping
Field
Character Limits
Format
Values
Customer Account
Length 10
Position 1 
Custom7 from bill
Filler / Blank
Length 15
Position 11
Space filled
Customer Book
Length 5
Position 26
Custom6 from bill
Payment Number
Length 20
Position 31
PaymentGUID (the first 20 characters, no dash)
Customer Number
Length 10
Position 51
AccountNumber
Filler / Blank
Length 5
Position 61
Space filled
Payment Date
Length 8
Position 66
YYYYMMDD
Payment Time
Length 6
Position 74
HHMMSS
Payment Amount
Length 12
Position 80
DDDDDDDDDDCC (service fee not included)
Convenience Fee
Length 7
Position 92
DDDDDCC (service fee) (Can set to 0 for absorbed billers)
Total Charge
Length 12
Position 99
DDDDDDDDDDCC (payment amount + service fee)
 (service fee not included for absorbed billers)
THIS NEEDS TO BE SUBMITTER + SINGLE TRANSACTION FOR THIS TO WORK
For absorbed billers can send as 0
Account Type
Length 1
Position 111
V = Visa
M = Master Card
A = American Express
D = Discover
E = 
E Checks
O = Other
Authorization Code
Length 10
Position 112
Code from Chase
Receipt Number
Length 15
Position 122
Payment Reference
Filler / Blank
Length 13
Position 137
Space filled
Change Log File
File Summary/Purpose: The purpose of this file is transfer change log data from IC to the biller
File Extension: .txt
File Naming Convention:  
IC_Changelogs_Date 
OLD format: ICChangeLogs_20221214034523.txt 
New format: IChangeLogs_20221214.txt (if month or day is one digit should be 03 for consistent length)
File Delimiter:  Pipe delimited
Specification: standard changelog format
Sample File: (note this was generated manually)
SFTP File Path:
File Transfer Frequency: Daily
Frey working to incorporate process to automatically import these changes into their system
Field Mapping
Field
Data Type
Character Limits
Format
Values
Account Number
Varchar 
30 
Account Number from IC database
AP Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in AutoPay
AP Un-Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed un - enrollment in AutoPay
Email
Varchar
100
Customer email address
Email Address change date
Datetime
MMDDYYYYHHMMSS
Date email address was change on IC
Phone Number
Varchar 
15
Phone number of the customer
Phone Number change date
Datetime
MMDDYYYYHHMMSS
Date phone number was changed on IC
Paperless Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in paperless
Paperless Un-enrollment
Datetime
MMDDYYYYHHMMSS
Date customer un-enrolled in paperless
Advanced Settings
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
BIF Customization
AutoPayCollectionDate
BIF Customization
BalanceForward
Always set to yes, BIF customization
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
BIF Customization
InvoiceDate
In BIF
InvoiceDueDate
In BIF
InvoiceFormatGuid
In BIF
InvoiceTypeID
In BIF
LateFeeDate
BIF Customization
LocationReference
BIF Customization
MinimumAmountDue
BIF Customization
PaymentExpirationDate
BIF Customization
PaymentExpirationMessage
BIF Customization
PromptPayExpirationDate
BIF Customization
RegistrationValue
N/A
SecondNotifyRequestedDate
BIF Customization
ThirdNotifyRequestedDate
BIF Customization
User Interaction and Design
Data Flow - Invoice
att2498920516
2342191107
1
Chart1
IM
att2499575834
att2499313679
0
Data Flow - Adjustments
att2499870781
2342191107
1
Chart2
IM
att2499706925
att2499280940
0
Data Flow - Payment
att2499772439
2342191107
1
Chart3
IM
att2499870786
att2499936277
0
Data Flow - Change Log
att2499969042
2342191107
1
Chart4
IM
att2498887709
att2499215380
0
Data Flow - Bill Presentment
att2499477529
2342191107
1
Chart5
IM
att2499969047
att2499149893
0
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
Biller Portal
User Stories
User can click make a guest payment on login screen to bring them to IC virtual site.
Invoice Cloud Web Services
API Name
API Use/Purpose
Cloud Pay v2
Redirect user from Frey to Invoice Cloud, only for linking to existing invoices
Integration Modifications
Previous Behavior
Desired Behavior
Business Case / Solution
Remove timestamp from change log name
INT-5361
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
Update file conversion to account for special characters
INT-5977
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
 URL:/spaces/IM/pages/2342191107/Frey+Municipal+Technical+Design
Concept
This section is to visualize the real-time health dashboard based on Tier and Application type.
Dashboard
Main View
Tier 1  - VALET
Web
Service 1 
Volume,
Availability
Latency
Errors
 Tickets
Service 1 
Volume,
Availability
Latency
Errors
Tickets
API
Batch
Tier 2 - VALET
Web
Service 1 
Volume,
Availability
Latency
Errors
 Tickets
Service 1 
Volume,
Availability
Latency
Errors
Tickets
API
Batch
Service Level View
Service - Performance
Overview
Volume
Availability
Latency
Errors
Tickets
 Service
Crypto
Database 
Business 
SQL Connection - Service
SQL Connection - Hostname
Alerts
Service Level
RTDR
APM - ICRTDRService
Volume 
SELECT rate(count(apm.service.transaction.duration), 1 minute) as 'Web throughput' FROM Metric WHERE (entity.guid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA') AND (transactionType = 'Web') LIMIT MAX SINCE 1800 seconds AGO TIMESERIES 
Availability in terms of service uptime based on What It Should Be (WISB)
SELECT uniqueCount(host) from Transaction where appName = 'Azure - ICRedirect - McLogin - production' since 1 days ago TIMESERIES 1 hour limit max 

SELECT (uniqueCount(host) / 10) * 100 as 'Availabilty as %' FROM Transaction where appName = 'Azure - ICRedirect - McLogin - production' since 1 days ago TIMESERIES 1 hour limit max

SELECT count(`apm.service.transaction.duration`) FROM Metric FACET host WHERE (entity.guid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA') LIMIT MAX SINCE 1800 seconds AGO TIMESERIES
Availability in terms of Failed Customer Interactions (FCIs)
--Good Ones
FROM Transaction SELECT count(*) as 'Valid' WHERE entityGuid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA' TIMESERIES 2 HOUR SINCE 15 DAYS AGO
--Bad Ones
FROM TransactionError SELECT count(*) as 'Bad' WHERE entityGuid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA' AND error.expected IS FALSE TIMESERIES 2 HOUR SINCE 15 DAYS AGO
Latency
SELECT average(apm.service.transaction.duration * 1000) AS 'Response time' FROM Metric WHERE (entity.guid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA') AND (transactionType = 'Web') LIMIT MAX SINCE 1800 seconds AGO TIMESERIES 
Errors
SELECT count(apm.service.error.count) / count(apm.service.transaction.duration) AS 'All errors' FROM Metric WHERE (entity.guid = 'MTQ5OTcwNHxBUE18QVBQTElDQVRJT058NDQyMzUzNzA') LIMIT MAX SINCE 1800 seconds AGO TIMESERIES 
Tickets
Research how anomalies and incident are making it to this table and next is why incidents are missing entity guid for threshold 
sql
-- Let's track the new relic alerts in realtime
select * from NrAiIncident since 1 day ago limit max order by timestamp desc 

Drill Down
The drill-down metric will cover transaction levels
/IC.Wcf.RTDR.IRealTimeDataRefresh.RefreshCustomerByCustomerIDV2
/IC.Wcf.RTDR.IRealTimeDataRefresh.RefreshCustomerByCustomerID
/IC.Wcf.RTDR.IRealTimeDataRefresh.RetrievePDFByInvoiceID
/IC.Wcf.RTDR.IRealTimeDataRefresh.RefreshCustomerLinks
/IC.Wcf.RTDR.IRealTimeDataRefresh.GetServiceVersion
/IC.Wcf.RTDR.IRealTimeDataRefresh.SelectronFultonConveyCustomer
/IC.Wcf.RTDR.IRealTimeDataRefresh.UpdateVendorToken
Custom Events and Metrics
RTDRTransactions
select keyset() from RTDRTransactions

          "BillerAPIEndTime",
          "BillerAPIStartTime",
          "BillerID",
          "InitialCustomerID",
          "Machine",
          "MethodName",
          "ProcessEndTime",
          "ProcessMetricGUID",
          "ProcessStartTime",
          "RTDRRequestLogID",
          "RequestSource",
          "SoftwarePartner",
          "Success",
          "TotalBillerAPIProcessTime",
          "TotalProcessTime",
          "timestamp"
Other KeyMetrics
Load Balance
Total Process time by method name
Number of requests by software partner
Response time by software partner
BillerAPI Response Times by software partner
RTDR RefreshCustomerbyCustomerID
RefreshCustomerbyCustomerID - AVG Biller API Times
RTDR by Machine
RTDR  RefreshCustomerbyCustomerIDV2
RTDR RefreshCustomerbyCustomerIDV2 - AVG Biller API times
RTDR - RefreshbyCustomerIDV2-MAX
Largest Deviation between Biller API and Process Time
Largest Deviation between Biller API and Process Time - Aggregated
Number of failed requests - by software partner
Number of failed requests - by biller 5 mins
Number of failed requests by Biller - Aggregated
Key questions:
Is the measure for each of the SLIs right?
Do we need any other key SLIs specifically for the service?
what should be the duration to trigger an alert?
NR Dashboard 
https://onenr.io/0VRV58LW1wa
 URL:/spaces/DS/pages/2590244877/Service+Health+Dashboard
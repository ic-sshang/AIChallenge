Page Navigation
1
7
Jira ticket 
n/a
ITR
15588 (Real Time Full Integration)
15446 (Cloud Store Lockbox file)
Document status
complete
Green
Document owner
 
 
Solution engineer
 
 
API Documentation
Link to Caselle API Documentation
Caselle Sandbox Access Credentials 
API URL:
 
https://xpress.caselleranch.com/tp/api/cr0/graphql
Subdomain: 
psndemo
Client ID: 
e6b2efd0-974d-4861-8906-3040ebcff9cf
Client Secret: 
Xt3REcuLEK6y0r58ayQbuZO.K9fYpFdtUfv
OAuth Token 
(Expires 04/14/2021)
:
 jrvwy2HvG28jkv2QnKcj/26iHw/6o3YKvRJID7BQRhnKTZ4wg3JEEQ== 
When this expires, see attached steps below on how to access the sandbox and create a new OAuth token:
Field Mapping
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
Customer
Using the "customer" query:
 The "customer" query can take one of four different parameters. You can query by customer number, customer ID, master contact or customer name. 
Parameters:
customerNumber 
- AccountNumber
balance 
- The customer's current balance. Causes extra database reads when used in a query.
query Schema { 
  customer(customerNumber: 101) { 
    id, 
    customerNumber, 
    customerType, 
    name { 
      fullName 
    },
    balance
  }
}
https://dev.azure.com/Caselle-Development/ConnectAPIDocs/_git/ConnectAPIDocs?path=%2FAccountsReceivableGraphQLInterface.md&version=GBmaster&_a=preview&anchor=<a-name%3D"customertype"><%2Fa>customer-type
Data Pump: Payment
create_receipt
The 
create_receipt
 mutation can be used to create a receipt. You can send objects to the 
create_receipt
 mutation.
Parameters:
receiptDate - this is the transaction date
distributionCode - the code that ties to their Utility module. 
This is an advance setting within IC for cases that the code varies by biller
. This indicated what type of payment it is and where to distribute. This translates to the invoice types in IC.
paymentCode - 
These code tell client if it was a check or credit card payment. 
This must become an advance setting within IC for cases that the code varies by biller.
 The most common is 98 & 99
amount - principle transaction amount
accountNumber - AccountNumber
accountName - CustomerName 
glActivityNumber - send 0 as the default
allocateTo - send NullString
allocateTo - set to InvoiceNumber (since a post is made for each bill that is paid if someone pays multiple bills only one will send for each)
confirmationNumber - PaymentGUID
receiptNumber - we may want to store this in the data pump response table. This will be required to execute the void_receipt method (refunds, reject, etc.)
https://dev.azure.com/Caselle-Development/ConnectAPIDocs/_git/ConnectAPIDocs?version=GBmaster&path=%2FCashReceiptingGraphQLInterface.md&_a=preview&anchor=create_receipt
Data Pump: Void
void_receipt
The 
void_receipt
 mutation can be used to void an existing receipt. You can send objects to the 
void_receipt
 mutation.
Parameters:
receiptNumber - this value will be stored in the IC payment record 
date - Current Date
https://dev.azure.com/Caselle-Development/ConnectAPIDocs/_git/ConnectAPIDocs?version=GBmaster&path=%2FCashReceiptingGraphQLInterface.md&_a=preview&anchor=void_receipt
Data Pump: Paperless Enrollment
customer_send_paper_invoice_update
Use to update customer record for paperless enrollment
Parameters:
customerNumber - AccountNumber
sendPaperStatement - this is a boolean value (True=Paper,False=Paperless)
mutation M { 
  customer_send_paper_invoice_update(customerNumber: 101, sendPaperStatement: true) { 
    id, 
    customerNumber,
    sendPaperStatement
  } 
}

https://dev.azure.com/Caselle-Development/ConnectAPIDocs/_git/ConnectAPIDocs?path=%2FAccountsReceivableGraphQLInterface.md&version=GBmaster&anchor=update-customer-send-paper-statement&_a=preview
File Mapping
Invoice File
File Extension: .TXT
File Naming Convention: INVCLD_CSLSTMT101_{Date}{Time}.txt
File Delimiter: Pipe Delimited, Value enclosed in quotation marks 
Specification: 
Sample File: 
*Files may need to be reviewed with first biller implementation 
File Frequency:
 Monthly
File Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
N
TRUE
N/A - Always “FH”
File Header
2
BillerGuid
N
TRUE
N/A - BillerGuid
File Header
4
FileCreationDate
Y
TRUE
System Date
File Header
5
InvoiceCount
N
TRUE
N/A - Invoice Count on File
File Header
6
TotalInvoiceAmount
N
TRUE
N/A - total invoice amount in file
File Header
7
RowType
N
TRUE
N/A - Always “IH”
Invoice Header
8
RecordType
N
TRUE
N/A - Map to “R”
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - field generated by IC
Invoice Header
10
InvoiceNumber
Y
TRUE
Invoice/Ref No
This can be used for Invoice Numbers and Payment Reference number. Use Invoice Number from first Invoice in Current Activity to create statement. For Payments, use reference number and append - Date(CustomField3) example: 1-1/1/2021
Invoice Header
11
InvoiceDate
Y
TRUE
Invoice Date
Date Invoice was created.
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due Date
Invoice Header
13
TotalAmountDue
Y
TRUE
Customer Balance
Total Balance Due as of the current cycle
Invoice Header
38
Custom1
Y
FALSE
Last Statement Date
Invoice Header
39
Custom2
Y
FALSE
Last Payment Amount
Invoice Header
40
Custom3
Y
FALSE
Last Statement Balance
Invoice Header
41
Custom4
Y
FALSE
Statement Begin Date
Invoice Header
42
Custom5
Y
FALSE
Statement End Date
Invoice Header
43
Custom6
Y
FALSE
Current Period Payments
Invoice Header
44
Custom7
Y
FALSE
Current Period Payment Adjustments
Invoice Header
45
Custom8
Y
FALSE
General Message
Invoice Header
46
Custom9
Y
FALSE
General Message
(continued-extra space)
Extra space if Custom8 field size limit is met
Invoice Header
47
Custom10
Y
FALSE
General Message
(continued-extra space)
Extra space if Custom9 field size limit is met
Invoice Header
93
BalanceDue
Y
FALSE
Balance Due
Total Balance Due as of the current cycle. 
Invoice Header
94
Custom11
Y
FALSE
General Message
(continued-extra space)
Extra space if Custom10 field size limit is met
Invoice Header
95
Custom12
Y
FALSE
General Message
(continued-extra space)
Extra space if Custom11 field size limit is met
Invoice Header
96
Custom13
Y
FALSE
Bill-to User-defined Field
Invoice Header
97
Custom14
Y
FALSE
Customer User-defined Field
Invoice Header
98
Custom15
Y
FALSE
Invoice detail User-defined Field
Invoice Header
99
Custom16
Y
FALSE
Invoice User-defined Field
Invoice Header
100
Custom17
Y
FALSE
Customer Statement Type
Will always be Open Items
Invoice Header
252
InvoiceTypeID
Y
TRUE
Invoice Category Code
This can be used for Invoices and Payment information. If used for Payments, this field will be blank.
Invoice Header
407
PastDue
Y
FALSE
Past Due
Invoice Header
58
RowType
N
TRUE
N/A - Always “CR”
 
 
Customer Record
59
AccountNumber
Y
TRUE
Customer Number
Number
 Please strip out any special characters (Periods, hyphens, spaces - letters and numbers only)
Customer Record
60
CustomerName
Y
TRUE
Bill-to Name
AlphaNumeric
 
Customer Record
61
Address1
Y
FALSE
Bill-to Mailing Line 1
AlphaNumeric
 
Customer Record
62
Address2
Y
FALSE
Bill-to Mailing Line 2
AlphaNumeric
 
Customer Record
63
City
Y
FALSE
Bill-to City, State, Zip Code
AlphaNumeric
 
Customer Record
64
State
Y
FALSE
Bill-to City, State, Zip Code
AlphaNumeric
 
Customer Record
65
Zip
Y
FALSE
Bill-to City, State, Zip Code
AlphaNumeric
Customer Record
66
Phone
Y
FALSE
Customer Telephone Number 1
Number
Customer Record
67
EmailAddress
Y
FALSE
Customer email
AlphaNumeric
Customer Record
371
CustomerName2
Y
FALSE
Bill-to Attention
AlphaNumeric
Customer Record
70
RowType
N
TRUE
N/A - Always “ID”
Invoice Detail
72
Description
Y
FALSE
Description
AlphaNumeric
Invoice Detail
73
Quantity
Y
FALSE
Quantity
Invoice Detail
79
LineItemTotal
Y
FALSE
Charge Amount
Number
This can be used for invoice charges or payment made.
Invoice Detail
83
CustomField1
Y
FALSE
Credit Amount
Number
Invoice Detail
84
CustomField2
Y
FALSE
Running Balance
Number
This is the calculated amount for all invoices and payments.
Invoice Detail
85
CustomField3
Y
FALSE
Date
Number
Statement Date
Invoice Detail
86
CustomField4
Y
FALSE
Invoice Category Code
AlphaNumeric
This can be used for Invoices and Payment information. If used for Payment information, this field will be blank and can be skipped.
Invoice Detail
87
CustomField5
Y
FALSE
Invoice Payment Due Date
Number
Invoice Detail
88
CustomField6
Y
FALSE
Invoice/Ref No
Number
Invoice Detail
Payment/Lockbox File (Cloud Store Misc AR)
File Extension: CSV
File Naming Convention: DC#_PYMT_YYYYMMDD.TXT (DC# = Distribution Code)
File Delimiter: Comma Delimited - Data containing commas must be enclosed in quotes
Specification:
Sample File:
File Frequency: Daily, as payments are made
Note: 
If a Biller has more than one Cloud Store that we are producing a payment file for, we can create one file which contains the payments across all Cloud Stores. I.e. The Caselle file can support multiple combinations of Distribution Code and Payment Code in a single file, as seen in the Sample File above.
File Mapping
Field
Data Type
Character Limits
Format
Comments
Date
Date
10
mm/dd/yyyy
Required
Distribution Code
Numeric
4
9999
Required. This value will be provided to IC Integrations team as part of the ITR submitted by Implementations
Payment Code
Numeric
2
99
Required. This value will be provided to IC Integrations team as part of the ITR submitted by Implementations
Amount
Currency
14
999,999,999.99
Required. Enclosed in quotes if commas are present
Customer No
Alpha-numeric
15
15 characters
This is the Customer Account Number. Enclosed in quotes if commas are present
Customer Name
Alpha-numeric
30
30 characters
JSON Configurations for Payment Codes
Overview
Advanced Setting 131 set to a valid 
Caselle Json Format
 is required
Summary
: Use a JSON string to set payment codes based on payment type and invoice type.
Structure of Caselle JSON Format:
The JSON string contains a main property for payment codes:
PaymentSettings
 (contains inner properties for codes to be set)
PaymentTypeID
 
 
Required in JSON
PayPal
 = 
15
 
Default all PayPal(credit/venmo) here when only 
15
 are provided.
PayPal Credit
 = 
16
Venmo 
= 
17
CC 
= 
1
ACH 
= 
2
OBD 
= 
11
CardVender
 
Valid Values
VISA
 
DISCOVER
 
MASTERCARD
AMEX
Default to all when not provided.
PaymentCode
 
Default to 
advanced setting 64/65
 when not provided.
OBDVender
 
 
Currently supports default all (same code for FISERV and RPPS)
PostingMethod
 
Default to
 
DataPump
 
when not provided.
InvoiceTypeID
 
Default to all when not provided.
DistributionCode
 
Default to 
advanced setting 64/65
 when not provided.
Sample Structure
:
VISA Payment Code 
(InvoiceType 42)
PaymentCode: 4
DistributionCode: 111
Default CC Code 
(InvoiceType 42)
PaymentCode: 4
DistributionCode: 444
OBD Code 
(InvoiceType 42)
PaymentCode: 777
DistributionCode: 555
Paypal/Default Code 
(InvoiceType 42)
PaymentCode: 777
DistributionCode: 555
ACH Code 
(InvoiceType 42)
PaymentCode: 777
DistributionCode: 555
Default CC Code 
(all other invoice types/ all other card vendors)
PaymentCode: 123
DistributionCode: 456
{
    "PaymentSettings": [
        {
            "PaymentTypeID": 1,
            "PaymentCode": 4,
            "InvoiceTypeID": 42,
            "CardVender": ["VISA"],
            "DistributionCode":"111"
        }, 
        {
            "PaymentTypeID": 1,
            "PaymentCode": 7,
            "InvoiceTypeID": 42,
            "DistributionCode":"444"
        },
        {
            "PaymentTypeID": 11,
            "PaymentCode": 777,
            "InvoiceTypeID": 42,
            "DistributionCode":"555"
         },
         {
            "PaymentTypeID": 15,
            "PaymentCode": 777,
            "InvoiceTypeID": 42,
            "DistributionCode":"555"
         },
         {
            "PaymentTypeID": 2,
            "PaymentCode": 777,
            "InvoiceTypeID": 42,
            "DistributionCode":"555"
         },
         {
            "PaymentTypeID": 1,
            "PaymentCode": 123,
            "DistributionCode":"456"
         }
    ]
}
Distribution Code is currently dependent on the payment code in JSON. If there is no distribution code, it will default into advanced settings 64/65, otherwise it will get the payment code to match with its distributionCode.
Card vender can be grouped by omitting 
CardVender
or separated into different PaymentSettings
Invalid JSON or missing codes defaults into advanced setting 64/65
Advanced Settings
Setting ID
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
8
RTDR EndPoint/WebService URL
9
RTDR Username 
10
RTDR Key or Password
11
DataPump Payments EndPoint/WebService URL
12
DataPump Payments EndPoint/WebService Username
13
DataPump Payments EndPoint/WebService Password
14
DataPump Paperless EndPoint/WebService URL
15
DataPump Paperless EndPoint/WebService Username
16
DataPump Paperless EndPoint/WebService Password
17
DataPump AutoPay EndPoint/WebService URL
18
DataPump AutoPay EndPoint/WebService Username
19
DataPump AutoPay EndPoint/WebService Password
35
Service Version
Billers need this set so that the allocateto field is set to the invoice number for Data Pump Payments. This is so that they know which bill to apply the payment to.
ALLOCATEAR
N
64
DataPump Payments CC Code
ex: 101|99|0
65
DataPump Payments ACH Code
ex: 101|98|99
88
Secondary RTDR EndPoint/WebService URL
101
DataPump ACH Rejects EndPoint/WebService URL
102
DataPump ACH Rejects EndPoint/WebService Username
103
DataPump ACH Rejects EndPoint/WebService Password
111
Secondary DP Paperless EndPoint URL
112
Secondary DP Paperless EndPoint Username
113
Secondary DP Paperless EndPoint Password
126
OAuth Refresh URL
127
OAuth Refresh Password
128
OAuth Token Expiration Date
131
JSON Configuration
Valid JSON String based on format - 
https://invoicecloud.atlassian.net/wiki/spaces/IM/pages/183042217/Caselle+Real-Time+Utility+Technical+Design#JSON-Configurations-for-Payment-Codes
 
Go-forward payment code configuration should be the following:
95: ACH/EFT
96: OBD
97: Visa/MC/Discover
98: Amex
99: PayPal Brands (Please note - In CRM, PayPal brands Alias must be changed from "Credit Card" to "None")
NOTE: On the Caselle side, each payment code should be assigned a unique "Combined GL deposit" letter, shown below.
This will allow payment type totals to import to the Caselle separately and assist billers to more quickly identify discrepancies and improve the reconciliation process.
If needed, IMs may ask the biller to verify payment codes/GL letters in Caselle by asking them to navigate to CR > Org > Payment Types > binoculars icon and select each payment type
json
{
    "PaymentSettings": [
        {
            "PaymentTypeID": 1,
            "PaymentCode": 4,
            "InvoiceTypeID": 42,
            "CardVender": ["VISA"],
            "DistributionCode":"111"
        } 
    ]
}
Y
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
BIF Customization
AutoPayCollectionDate
Default = Due date unless otherwise specified by BIF Customization
BalanceForward
Required, BIF Customization
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
BIF Customization
InvoiceDate
N/A
InvoiceDueDate
N/A
InvoiceFormatGuid
BIF customization
InvoiceTypeID
BIF customization
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
N/A
PaymentExpirationDate
BIF customization
PaymentExpirationMessage
BIF customization
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
BIF Customization
ThirdNotifyRequestedDate
BIF Customization
User Interaction and Design
Data Flow - Invoice
att1791885397
716406819
1
INVOICES
IM
att1792245899
att1792245894
0
Data Flow - Adjustments
att1792245904
716406819
1
adj
IM
att1791787098
att1791787093
0
Data Flow - Payment
att1791787108
716406819
1
pymt
IM
att1791885404
att1791787103
0
Data Flow - Paperless Change Log
att1791787113
716406819
1
paperless
IM
att1791852602
att1792245909
0
Payer Experience
Payer uses standard IC virtual site and customer portal. Users are redirected to the IC site from the billers website.
Biller Experience
Billers use the standard IC biller portal.
Invoice Cloud Web Services
API Name
API Use/ Purpose
N/A
N/A
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-5243
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Est. Dec 2022
Payment posting only split the ‘paymentCode' or payment type by CC and ACH.
Payment posting to be split by all IC payment types (OBD Fiserv, OBD RPPS, Amex, Paypal, etc.)
Caselle billers have the ability to configure multiple payment codes and use them for reconciliation. They’d like to align the payment code with the batches the payments in IC.
 URL:/spaces/IM/pages/716406819/Caselle+Real-Time+AR+Technical+Design
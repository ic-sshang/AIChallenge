Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira ticket 
n/a
ITR
15388
Document status
COMPLETE
Green
Document owner
 
Solution engineer
 
Knowledge Transfer
Gong URL
API Documentation
Host URL: 
https://msp.tccs-inspro.com/invoicecloudapi
/PARTNERAPINAME
 
(will vary per biller)
Consumer GUID and EntryKey will vary per biller - for TCCS test site:
consumerGUID: IC-FMM
entryKey: o7wLUeHXAPRjtsyuQmNf
Details
IC Use
Partner API Name
Request
Response
RTDR: Balance Update
Balance Update
Used for host URL: /api/ARState_Output
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/api/ARState_Output
 
Service Specification:
body: consumerGUID=[valid GUID]&
entryKey=[Valid entryKey]&
contentInfo=InvoiceNumber
Example:
consumerGUID = provided by TCCS
entryKey = provided by TCCS
Invoice Number = 454100010-06/16/2020
Field Mapping:
Record bal = BalanceDue
Total Balance = TotalAmountDue
Data Pump: Payment
Pay Input
Used for host URL: /api/Pay_Input
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/api/Pay_input
Pay Input:
Service Specification (all payment channels including Cloud Payments, except invoice numbers that begin with 'Q'):
body: consumerGUID=[valid GUID]&
entryKey=[Valid entryKey]&
contentInfo= [Invoice Number] | [Amount Paid : Payment Type]
Payment Types: CC for Credit/Debit, ACH for ACH/EFT and OBD
Example (all payment channels including Cloud Payments, except invoice numbers that begin with 'Q'):
consumerGUID = provided by TCCS
entryKey = provided by TCCS
Invoice Number = Invoice Number (i.e. 454100010-03/01/2019)
Amount Paid = Payment Amount (does not include service fee)
Quote Deposit: 
Service Specification (only for Invoice numbers that begin with 'Q'):
body: consumerGUID=[valid GUID]&
entryKey=[Valid entryKey]&
contentInfo= [Invoice Number] | [Insured Name] | [Amount Paid]
Example (Invoice numbers that begin with 'Q'):
consumerGUID = provided by TCCS
entryKey = provided by TCCS
Invoice Number = Invoice Number (i.e. Q454100010-03/01/2019)
Insured Name = Name entered by customer during payment route
Amount Paid = Payment Amount (does not include service fee)
Version 1 - PaymentGUID 
Pay Input 
(with pmtGUID parameter):
paymentGUID value must be in this format:
* It can be any combination of numbers and letters
* Separated by hyphens
* Under 100 characters
* Contains no special characters (other than hyphens)
* Spaces are not allowed
https://quoting.farmersofmarble.com/InvCloudService_PROD/api/Pay_input
contentInfo =[Invoice Number] | [ Amount Paid : Payment Type]
@[paymentGUID-value]
Example: 
306-12/11/2019|24.00:CC@e99fc166-9d990-4a99-bb16-99fe155ebf99
ITG-1473
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
Version 1 - PaymentGUID
Quote Deposit 
(with pmtGUID parameter):
paymentGUID value must be in this format:
* It can be any combination of numbers and letters
* Separated by hyphens
* Under 100 characters
* Contains no special characters (other than hyphens)
* Spaces are not allowed
https://agentportal.cpins.com/InvCloudAPI_PROD/Pay_input
contentInfo =[Q + Invoice Number] | [ Insured Name ]|[ Amount Paid ]
@[paymentGUID-value]
Example:
Q3272-12/11/2019|Test Name|24.00@e99fc166-9d990-4a99-bb16-99fe155ebf99
ITG-1473
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
Data Pump: ACH Reject
Insufficient Funds Report
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/api/Insufficient_Pay_Report
Service Specification:
body: consumerGUID =[valid GUID]&
entryKey=[Valid entryKey]&
contentInfo =[InvoiceNumber]: [Date of transaction] | [Amount of payment] | IFR
Example:
consumerGUID = provided by TCCS
entryKey = provided by TCCS
contentInfo is 454100010 -03/01/2019 : 06/22/2020 | 25.00 | IFR
Data Pump: Paperless Enrollment
Paperless Billing
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/api/Paperless_Bill
Service Specification:
body: consumerGUID =[ valid GUID ]&
entryKey=[ Valid entryKey ]&
contentInfo = [Invoice Number] : [Y or N} | [PB] 
Example = 454100010-03/01/2019:Y|PB
Example:
consumerGUID = provided by TCCS
entryKey = provided by TCCS
Invoice Number = Invoice Number (i.e. 454100010-03/01/2019)
Data Pump: AutoPay Enrollment
Recurring Payments
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/api/Recurring_Pay
Service Specification:
body: consumerGUID =[ valid GUID ]&
entryKey=[ Valid entryKey ]&
contentInfo = [Invoice Number] : [Y or N} | R
Example = 454100010-03/01/2019:Y|R
Example:
consumerGUID = provided by TCCS
entryKey = provided by TCCS
Invoice Number = Invoice Number (i.e. 454100010-03/01/2019)
PDF Linking
Retrieve Bill Image
Endpoint URL: 
https://msp.tccs-inspro.com/invoicecloudapi/Retrieve_Bill_Image
 
Service Specification:
body: consumerGUID =[valid GUID]&
entryKey = [Valid entryKey]&
contentInfo = [Invoice Number]
Example
consumerGUID = provided by TCCS
entryKey = provided by TCCS
contentInfo = Invoice Number
File Mapping
Invoice File
File Extension: .BIF
File Naming Convention: N/A
File Delimiter: pipe
Specification: N/A
Frequency: Sent multiple times throughout the day based on when policies are generated. 
Sample File: 
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Description
Record Type
1
RowType
Y
TRUE
N/A - always FH
File Header
2
BillerGuid
Y
TRUE
Use Config File to get value assigned by IC
File Header
4
FileCreationDate
Y
TRUE
Current date program run
File Header
5
InvoiceCount
Y
TRUE
Total number of IH records to be sent
File Header
6
TotalInvoiceAmount
Y
TRUE
Sum of all TotalAmountDue fields in the IH records (Total Outstanding of all Policies in file)
File Header
7
RowType
Y
TRUE
N/A - always IH
Invoice Header
8
RecordType
Y
TRUE
Use Rewrite (N) 
Invoice Header
9
InvoiceFormatGuid
Y
TRUE
Use Config File to get value assigned by IC
Invoice Header
10
InvoiceNumber
Y
TRUE
Policy Number-Expiration Date of Policy Term
Invoice Header
11
InvoiceDate
Y
TRUE
Newest Bill Date of Policy (If no records billed, use the Effective Date of the records)
Invoice Header
12
InvoiceDueDate
Y
TRUE
Oldest Due Date of Policy (If no records billed, use the Effective Date of the records)
Invoice Header
13
TotalAmountDue
Y
TRUE
Total Outstanding amount of the Policy
Invoice Header
20
AllowPartialPayments
Y
FALSE
Always allow
Invoice Header
21
MinimumAmountDue
Y
FALSE
Current amount Billed on the Policy
Invoice Header
186
LateFeeAmount
Y
FALSE
Get string from TBLCOMPANYMASTER0 and parse
Invoice Header
187
LateFeeDate
Y
FALSE
Use InvoiceDueDate
Invoice Header
191
ApplyLateFeeIfNoPaymentsOnly
Y
FALSE
Set to no
Invoice Header
252
InvoiceTypeID
Y
TRUE
Use Config File to get value assigned by IC
Invoice Header
58
RowType
Y
TRUE
N/A - always CR
Customer Record
59
AccountNumber
Y
TRUE
Policy Number
Customer Record
60
CustomerName
Y
TRUE
Reference Policy_Name view fields
Customer Record
61
Address1
Y
FALSE
Reference Policy_Name view fields
Customer Record
62
Address2
Y
FALSE
Reference Policy_Name view fields
Customer Record
63
City
Y
FALSE
Reference Policy_Name view fields
Customer Record
64
State
Y
FALSE
Reference Policy_Name view fields
Customer Record
65
Zip
Y
FALSE
Reference Policy_Name view fields
Customer Record
66
Phone
Y
FALSE
Reference Policy_Name view fields
Customer Record
70
RowType
Y
TRUE
N/A - always ID
Invoice Detail
72
Description
Y
FALSE
String together "Total amount outstanding:" [sum of AROPEN]
Being used to store the full Outstanding amount for policy term
Invoice Detail
Advanced Settings
Setting ID
Description
Details and Logic
Value
Is value unique per biller? (Y/N)
 8
 RTDR EndPoint/WebService URL
 
See Farmers of Marble (BID: 1844) as example
 Y
 9
 RTDR Username if Applicable
 
See Farmers of Marble (BID: 1844) as example
 Y
 10
 RTDR Key or Password if Applicable
 
See Farmers of Marble (BID: 1844) as example
 Y
 11
DataPump Payments EndPoint/WebService URL
 
See Farmers of Marble (BID: 1844) as example
 Y
 12
 DataPump Payments EndPoint/WebService Username
 
See Farmers of Marble (BID: 1844) as example
 Y
13
DataPump Payments EndPoint/WebService Password
See Farmers of Marble (BID: 1844) as example
 Y
14
DataPump Paperless EndPoint/WebService URL
See Farmers of Marble (BID: 1844) as example
 Y
15
DataPump Paperless EndPoint/WebService Username
See Farmers of Marble (BID: 1844) as example
 Y
16
DataPump Paperless EndPoint/WebService Password
See Farmers of Marble (BID: 1844) as example
 Y
17
DataPump AutoPay EndPoint/WebService URL
See Farmers of Marble (BID: 1844) as example
 Y
18
DataPump AutoPay EndPoint/WebService Username
See Farmers of Marble (BID: 1844) as example
 Y
19
DataPump AutoPay EndPoint/WebService Password
See Farmers of Marble (BID: 1844) as example
 Y
20
Remote PDF EndPoint/WebService URL
See Farmers of Marble (BID: 1844) as example
 Y
21
Remote PDF EndPoint/WebService Username
See Farmers of Marble (BID: 1844) as example
 Y
22
Remote PDF EndPoint/WebService Password
See Farmers of Marble (BID: 1844) as example
 Y
101
DataPump ACH Rejects EndPoint/WebService URL
See Farmers of Marble (BID: 1844) as example
 Y
102
DataPump ACH Rejects EndPoint/WebService Username
See Farmers of Marble (BID: 1844) as example
 Y
103
DataPump ACH Rejects EndPoint/WebService Password
See Farmers of Marble (BID: 1844) as example
 Y
35
Service Version	
INT-6870
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
  - Version 2 includes the Payment GUID for Biller’s that will need this field through Data Pump
2
N
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
in BIF
AutoPayCollectionDate
on biller questionnaire 
BalanceForward
N/A
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
on biller questionnaire 
InvoiceDate
in BIF
InvoiceDueDate
in BIF
InvoiceFormatGuid
in BIF
InvoiceTypeID
in BIF
LateFeeDate
in BIF
LocationReference
N/A
MinimumAmountDue
in BIF
PaymentExpirationDate
N/A
PaymentExpirationMessage
N/A
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
on biller questionnaire 
ThirdNotifyRequestedDate
on biller questionnaire 
User Interaction and Design
Data Flow - Invoice
att563118122
293109764
1
TCCS Invoice Data Flow
IM
att563085371
att563118117
0
Data Flow - Adjustments
att563085376
293109764
1
TCCS RTDR Flow
IM
att562462736
att562462731
0
Data Flow - Payment
att563085383
293109764
1
TCCS DataPump Payment
IM
att562495529
att562495524
0
Data Flow - ACH Reject
att562462745
293109764
1
TCCS ACH Reject
IM
att563118156
att563118151
0
Data Flow - Change Log
att562462752
293109764
1
TCCS Customer Updates
IM
att563118161
att563085388
0
Data Flow - Bill Presentment
PDF Linking
Payer Experience - Agent (New Policy)
Agent will complete a web insured application (quote) and once application is reviewed/accepted, a payment (deposit) on the quote is due. TCCS has integrated with Invoice Cloud’s CloudPayments (forms) product to facilitate these transactions and will transfer the agent to our UI upon selection of the Make Payment button. 
Successful Application Page Jump to Invoice Cloud via Make Payment:
Completed Application Page Jump to Invoice Cloud via Make Payment:
Jump to Invoice Cloud Page:
Payer Experience - Agent (Existing Policy)
Agents have the ability to pay against policies that already exist within TCCS via the Billing Inquiry search page. Once “Make Payment” has been selected, TCCS will make a request to CloudPayments (forms) to initiate the payment:
Biller Experience
Biller will use IC biller portal to manage customer accounts.
Invoice Cloud Web Services
API Name
API Use/Purpose
UploadInvoiceFile
Invoice data transmission 
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
ITG-1853
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
Currently no retry in place for data pump.
Implement retry logic for data pump with an advanced setting configured to have the ability to disable/enable the retry.
Retry logic in order to ensure data is transferred as expected with data pump.
INT-3698
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
TBD
IC is missing the payment type value when posting payments. All payments much contain either "CC" or "ACH".
Update payment posting to include the payment type. Credit Card payments will be passed as “CC”, while ALL other payment types (including OBD) will be passed as “ACH”.
Posting CC and/or ACH for all payments.
INT-6870
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
8/31/2023
IC did not provide the PaymentGUID for payments sent via Data Pump. Due to this, TCCS is unable to confirm if a payment has already been received. Resulting with duplicated payments. 
IC to add PaymentGUID in the Data Pump request to provide unique value to identify each payment, avoiding duplications in TCCS system. 
Add IC PaymentGUID as a field to the Request. 
 URL:/spaces/IM/pages/293109764/TCCS+Technical+Design
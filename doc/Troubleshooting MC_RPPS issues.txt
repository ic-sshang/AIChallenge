1
7
  
** 
Ensure you have access to Skybot and can remote into 10.0.6.4 (IC-APP1) from one of the term servers.
 **  
Known Issues for MC_RPPS_Import
Issue
: Mastercard file fails to download .
 
Resolution
: Remote login into 10.0.6.4 from one of the term servers.  
      Go to RPPS downloads folder: E:\Data\AppData\RPPS\downloads.  
       If there is an empty file (0 B) outside of the processed folder, delete it and restart STAGING-MC_RPPS from the first command.  
      
Temporary issue – item pending review to resolve
  
The Mastercard file download fails but succeeds on a subsequent retry. Restart STAGING-MC_RPPS from the second command.  
  
Known Issues for MC_RPPS
Issue: 
Deadlock Exception  - If the RTDR deadlocked occurred on the same BillerID then let's wait 5-10 minutes to restart the job from the second command. We created a new item to handle this issue and haven’t completed it yet.  
     Resolution: 
Restart STAGING-MC_RPPS from second command.  
2.
 Issue: 
spRppsMarkAllImportingAsPending failed to run 
This is the sp 
Example of Failed Job  
 
Resolution: 
First using SSMS on DBMaster_GoldAzure Shard run SP 
select * from rppsentries where RPPSStatusID=0
and check if there are any values that come up. If there are none then it completed but failed somewhere. If not, then all is good. Now sometimes this SP really fails to run, since it is at the end of the MC_RPPS run it usually occurs during normal hours. You can either have Data Services run the SP or use a unit test that executes the stored procedure. Below is an example of the unit test. 
3. 
Issue: 
System.InvalidOperationException: Collection was modified after the enumerator was instantiated.   
Example of exception. Since it's related to updating the value of the modifiedindividualid of a single record, this can be ignored.
 Resolution: 
 Even though it throws an exception, the process continues. Consequences of this exception is that auto match was not able to match one or two records and the biller will have to manually match the payment in the pending payments on the biller portal.
BMS Team is currently working on an item related to this exception.
4.
 Issue: 
If Number of Billers and Entries Don’t Match with the Imported Data  
  
   Resolution: 
Ask Data Services to provide the list of billers with RPPSEntries added that day and the list of billers retrieved from selRPPSEntries with the startdate of that day and compare both lists.   
We can safely ignore if test biller.
5.
 Issue: 
No RPPSBillerID could be matched with the incoming data line
  
@EmailSubject='*** ATTENTION *** MC_RPPS EXCEPTION *** DO NOT IGNORE *** BILLER NOT FOUND',@SystemOutput='Exception captured in GetBillerIDFromRPPSBillerID(). No RPPSBillerID could be matched with the incoming data line; Data Line received: 7867860000',@DomainTypeID=2  
   This issue happens if, setup is done on Mastercard and Fiserv side but not on our system OR incorrect RPPSBillerID.
   
Resolution: 
Reach out to the Implementation Manager(for the biller) for further information.  
 
6.
 Issue: 
SpOnlineBankDirectAutoMatchBillers Semaphore timeout 
    In this scenario, the semaphore timeout occurred on the start of allocation but the file was processed.  This means, the RPPSEntries was inserted into our system but we still need to do the auto matching because there is no OBDMatchData. In this case, it’s      
    ok to rerun the job without causing any duplicates because the file was already processed. (see notes below before doing anything) 
  
Run fails during allocation/matching 
Contact Randy Torres or Sean Concannon! The possibility of inserting duplicates is very high, so please contact them before attempting the following. The idea is that if the job fails in the middle of allocation or matching, there is a way to kick it off again without any problems. However that will require removing the entries/records from the in files that have already been processed. Then kicking it off again.
Known Issues for MC_RPPS_CASSRUN
Issue:
 System.ComponentModel.Win32Exception: The semaphore timeout period has expired net.tcp://icservices:1000/ICDatabaseService did not receive a reply within the configured timeout 
     Resolution: 
If the error occurred stopping it from running any part of the job, then attempt a re-run. This process runs at 10:30AM so it is advised that the Team Lead or Manager to take the next steps. We don’t want to accidentally run something twice that shouldn’t. 
Known Issues for Biller Report Generator 
Issue: 
Report Causing Failure 
      A report can cause failure because a report has too much data, the biller probably requested multiple years' worth of data.  
      Another reason could be that a change was made to the biller portal and a report record is now inserted without a recipient or other data field that is required by the biller report generator. 
      Resolution: 
Regardless of the issue, most of the time the resolution is the same. We want to mark the report as processed and have it move on to the next report. Look within the exception and it will most likely contain the report SP that was called. Below is an example of an SP called requesting 2 years’ worth of data. 
exec dbo.selPaymentsBP @BillerID=146, @StartDate='4/26/2020', @EndDate='4/27/2022', @Approved=1, @PaymentTypeID='1', @IncludeServiceFee=0, @RowCount = 0
  
If outside of working hours and data services is unavailable take the following steps to resolve this issue.
 
*** If the exception log contains the ReportGeneratorQueueID skip to step 2 *** 
 
1.Using Microsoft SQL Server Management Studio (SSMS) on DBMaster_GoldAzure Shard, get the ReportGeneratorQueuID (RGID) for the record containing the same SQL from the error log by calling SP:  
 
exec RPT.selReportGeneratorQueue
 
2. Add the RGQID from step 1 and ‘’ for the @GeneratedReportURL to the following SP: 
 
exec RPT.spMarkQueueReportProcessed @ReportGeneratorQueueID=(RGQID), @GeneratedReportUrl=''
 
3. Log onto the Bastion Term Server and create a unit test in a repo (used MC_RPPS) and run only that test. EXECUTE_COMMAND_NONQUERY takes a string for the SQL command and an integer for the BillerID. The BillerID is for the biller that requested the report.  
clsDatabase.EXECUTE_COMMAND_NONQUERY(SP string, billerId integer)
 Below is an example of a unit test calling the SP. 
 4. Run step 1 again and verify that the record is no longer in the queue. 
Known Issues for Biller Report Scheduler
Issue: 
System.Data.SqlClient.SqlException: Login failed for user '<token-identified principal>' 
System.Data.SqlClient.SqlException: A severe error occurred on the current command. 
net.tcp://icservices:1000/ICDatabaseService did not receive a reply within the configured timeout (00:01:00) 
     Resolution: 
Re-running the BillerReportGenerator Job will most likely result in a successful run for these common errors. Sometimes it may require an extra run but if after 3 attempts, there may be a more serious problem. Escalate to next level if that is the case. 
Navigating Skybot  
 Filter Jobs  
Hover over a column header, click the arrow that appears, select 
Filters
, and enter text.  
  
Restart Job  
From the Skybot menu, go to 
Jobs
 → 
Individual Jobs
.  
  
  Find the job requiring restart, right click on it, and select 
Job Control
 → 
Run Job Now
.  
 
  Select appropriate starting command and click 
Run Job Now
.  
 
  
 Retrieve Job Logs  
From the Skybot menu, go to 
History
 → 
Job History
.   
  
Find an instance of the job, right click on it, and select 
Download Job Log
.  
  
 
  
  
 
 URL:/spaces/DS/pages/2663219201/Troubleshooting+MC_RPPS+issues
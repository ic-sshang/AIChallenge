none
File Decryption
note
File retrieval can only be done directly via the Azure blob within the Production AVD, or Biller File Search > Secure Upload within the CSTerm.


File retrieval can only be done directly via the Azure blob within the Production AVD, or Biller File Search > Secure Upload within the CSTerm.


Decrypting the files depends on the means of how it’s been encrypted.
If the file has been encrypted via 
file.invoicecloud.com
 then retrieving the files/decrypting should be done in your production AVD environment.
If it was encrypted via PGP key, then you’ll need to go into the CSTerm to decrypt the file.
All decrypted files will have to be uploaded to the secure upload to be able to be processed via the CRM Import tool.
Reviewing Files
note
If column names aren’t easily identifiable, 
always make sure to confirm the column mapping with the biller.
 We do not want to risk making the wrong selection for the data.


If column names aren’t easily identifiable, 
always make sure to confirm the column mapping with the biller.
 We do not want to risk making the wrong selection for the data.


Autopay/Payment Method Conversions
Things to lookout for:
All of these files should be encrypted. We are not allowed to continue work on a data conversion if the file hasn’t been encrypted.
If the file is present in “Other” in the Azure blob and isn’t encrypted, then it needs to be deleted from the blob. Raise the issue to the team.
Account Numbers
The account numbers do not match with what’s present in our system, there could be a few reasons why this is the case:
note
If it isn’t easily able to be spot-checked, this can be covered by checking if they exist on the DB by retrieving a list of account numbers and merging the files. This can easily be done via using 
pandas
 with Python.


If it isn’t easily able to be spot-checked, this can be covered by checking if they exist on the DB by retrieving a list of account numbers and merging the files. This can easily be done via using 
pandas
 with Python.


The account numbers in the file could be display account numbers
Confirm with the reporter
Make sure to verify the display account number is unique in our system
The account numbers could require a mapping file
Make sure to confirm if the mapping file is only for TEST or also PROD.
The account numbers could require the addition of a prefix/postfix value.
e.g. WTR- could be prefixed in front of the account number.
Routing Numbers
Routing Numbers are 9-digits long.
Keep an eye out on the routing numbers, i
f the routing numbers are missing leading zeroes, then we should be requesting a new file.
Bank Account Numbers
Bank Account numbers can have a few issues present:
They can similarly be affected by the removal of leading zeroes. 
If the routing numbers have had their leading zeroes removed and there doesn’t appear to be any for the bank account numbers, then you should be requesting a new file.
The file could’ve been autoformatted by mistake in Excel, either by whoever sent the file, or during your review of the file. 
One way to tell if it’s been auto formatted is if there are scientific notation values (e.g. “E+11”) present in the data.
Only open it in Excel when it needs to be converted to a CSV, otherwise always open the file as a text file.
Bank Account Types for ACH
Bank account type exists that is not ‘Checking’, ‘Savings’, ‘Commercial’
It might be split up into Personal Checking and Commercial Checking, same thing with Personal Savings and Commercial Savings.
If there are any other values beyond that, then it needs to be discussed how those records should be handled (e.g. record removed, or field edited to match Checking/Savings/Commercial)
Billing Information
If the biller hasn’t provided billing name/address/city/state/zip information, then we’re dependent on whatever data is on the database.
Paperless Conversions
Things to lookout for:
Even though the amount of data required for this conversion is very minimal, there are a few things to keep an eye out for.
Similarly to an Autopay conversion, you will need to validate the account number formatting that’s in the file.
Inspect the email addresses to confirm that there is only one valid email present
Sometimes a biller will have a delimiter present in the field (e.g. a semicolon ';') and include multiple email addresses. We can only support one email for Paperless.
Sample Scripts
Pandas
This is a script you can use with pandas to merge two csv files together. You have three options on how to retrieve the data, 
'both'
, 
'left_only'
, and 
'right_only'
 after the merge.
It is helpful for both non-MCL and MCL, as you can use this to also retrieve data from the DB and merge it with the file you’re merging with as well.
Merge Data Script
py
import pandas as pd

origFile = pd.read_csv(r"FILE1",
                       dtype=str, keep_default_na=False)
customerGuidFile = pd.read_csv(r"FILE2",
                               dtype=str, keep_default_na=False)

df = pd.DataFrame(data=origFile)
df2 = pd.DataFrame(data=customerGuidFile)

#you can merge based on multiple columns. useful.
res = df.merge(df2, left_on=["AccountNumber"], right_on=["AccountNumber"], 
                              how="left", indicator=True, sort=False)
#res = res.drop_duplicates(keep="first", subset=['AccountNumber']) #drops all but first copy; not always needed but on request by the biller

dfs = {k: v for k, v in res.groupby("_merge")}
res2 = dfs['both'].drop(['_merge'], axis=1)
res2.to_csv(r"OUTPUTFILE", index=False)
Login Creation Script
py
import pandas as pd
import uuid
file = pd.read_csv(r"INPUT_FILE",
                          dtype=str, keep_default_na=False)
df = pd.DataFrame(columns=['AccountNumber', 'UserName', 'Password'])
madeDict = {}

for ind ifile. Indexex:
    accountNumber = str(file['AccountNumber'][ind])
    userName = str(file['Username/Email Address'][ind])

    if not userName or userName.isspace():
        userName = 'AutoPay_' + accountNumber

    if userName in madeDict.keys():
        password = madeDict[userName]
    else:
        password = uuid.uuid4()
        madeDict[userName] = password
    new_row = {'AccountNumber': accountNumber, 'UserName': userName, 'Password': password}
    df.loc[len(df)] = new_row
print(df['AccountNumber'].duplicated().any())
df.to_csv(r"OUTPUT_FILE", index=False)
File Splitter Script
py
import pandas as pd

file= pd.read_csv(rf"INPUT_FILE",
                  dtype=str, keep_default_na=False, encoding='mac_roman')

df = pd.DataFrame(data=file)

for i, g in df.groupby(df.index // 1000):
    g.to_csv(rf"OUTPUT_FILE_{i}", index=False)
 URL:/spaces/IM/pages/4248240220/Guidance+for+Reviewing+Data+Conversion+Files
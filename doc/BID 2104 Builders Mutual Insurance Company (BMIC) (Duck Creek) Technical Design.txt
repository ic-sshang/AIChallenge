Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation
Jira ticket 
INT-4723
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
ITR
Release Date
Document status
Done
Green
Document owner
 
Solution engineer
 
Salesforce SOW
Knowledge Transfer
API Documentation
Unique Biller Integration Values (will be provided on the Integration Coding Form):
X
X
DEV BASE URL (for all integrations): 
https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud
PROD BASE URL (for all integrations): 
API Authentication Method: API Key (Header API Key) - Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72
Renewal process: Subscription key will be changed for one time in future but there is no expiration time.
Details
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
BalanceRefresh
Used to pull the most recent balance for a customer using the accountNumber.
POST: https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud/BalanceRefresh

Headers

Content-Type: application/json
Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72

Sample Request

{
  "AccountNumber": "DB0000002496"
}
Sample Response
{
    "pastDue": "2289.0000",
    "currentInvoiceAmount": "432",
    "totalAmountDue": 2289,
    "balanceDue": "2289.0000"
}


Bad Request (Response Status Code: 400)
{
    "pastDue": "",
    "currentInvoiceAmount": "",
    "totalAmountDue": 0,
    "balanceDue": ""
}

Bad Request (Response Status Code: 400)
{{Exception message}}
Update Balance Due with “balanceDue” field. 
Update Past Due with “pastDue” field. If past due is negative, set it as $0.00.
Uses Balance Forward for Invoices
They do not have a requirement for blocking payment methods.
currentInvoiceAmount = IC BalanceDue
balanceDue = IC TotalAmount
Data Pump: Payment
ProcessPayment
Used to post payments
POST: https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud/ProcessPayment
Headers

Content-Type: application/json
Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72

Sample Request

{
    "AccountNumber": "DB0000002511",
    "PaymentAmount": "3432",
    "PaymentMethod": "Check",
    "IcPaymentId": "IC3235"
}
Sample Response

Successful
{
    "statusCode": "200",
    "message": "Success"
}

Bad Request
{
    "statusCode": "400",
    "message": "DC API call process failed"
}

Internal Server Error
{
    "statusCode": "500",
    "message": "Exception occured at InvoiceCloudController.SendPaymentRequestToDC.Error-{{Exception Details}}"
}
PaymentAmount is without the service fee.
Uses Balance Forward for Invoices
ICPaymentID will be set to our IC Payment GUID.
ICPaymentID Accepted:
1IVB (Invoice Cloud eCheck)
1IVC (Invoice Cloud Debit Card/Credit Card)
1IVD (Invoice Cloud Debit Card)
1IVB (Invoice Cloud eCheck: Check, Online Bank Direct)
1IVC (Invoice Cloud Credit Card: All Others (Credit card, Venmo, PayPal, Apple Pay, etc))
1VCC (Invoice Cloud Recurring Credit Card: AutoPay signed up with Credit Card)
1VCB (Invoice Cloud Recurring Bank: AutoPay signed up with Check)
We will need to use the strings below to be sent for their PaymentMethod.
Check    
Invoice Cloud eCheck (includes OBD)    
Invoice Cloud Credit Card (includes all other payment methods)  
Invoice Cloud Debit Card    
Invoice Cloud Recurring Credit Card    
Invoice Cloud Recurring Bank    
if PASTDUE is NULL, it will be set to 0 on IC. 
Debit Card + Credit Card will be combined.
Include Credits & Chargebacks?
Credits?
No
Chargebacks?
No
Sent a Negative value, using dash indicator?
No
Data Pump: Void
 N/A
Data Pump: ACH Reject 
Payment Reversal
Used to reverse a payment 
POST: https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud/PaymentReversal

Headers

Content-Type: application/json
Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72

Sample Request

{
  "AccountNumber": "DB0000002511",
  "ICPaymentId": "EI9380",
  "ReasonCode": "A02"
}
Sample Response

{
    "statusCode": "200",
    "message": "Success"
}


Bad Request
{
    "statusCode": "400",
    "message": "DC API call process failed"
}

Internal Server Error
{
    "statusCode": "500",
    "message": "Exception occured at InvoiceCloudController.PaymentReversal.Error-{{Exception Details}}"
}
ACH Reject Requirements:
C-Code Rejects included? No
DCT cannot process partial rejects or chargebacks. If these are allowed, then the original payment needs to be reversed completely and another payment needs to be posted.
IcPaymentId: DCT is expecting IC to send its unique payment identifier when payment is made and for the same unique identifier to be provided when a payment is reversed. The only purpose DCT has for this value is to identify the payment to be reversed. We will be using Payment GUID for this request. This can accept up to 32 characters. If data provided is longer, it will cut it down to 32 character and store it in DC table.
ReasonCode: This will be the same code provided by Chase Paymentech due to a reject
Data Pump: Paperless Enrollment
GoGreenPreferences
Used to update paperless settings and update email
Endpoint: https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud/GoGreenPreferences

Headers

Content-Type: application/json
Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72

Sample Request

{
    "AccountNumber": "DB0000001645",
    "GoGreenIndicator": "1",
    "Email": "pradeep@abc.com"
}
Sample Response
{
    "statusCode": "200",
    "message": "Success"
}

Bad Request
{
    "statusCode": "400",
    "message": "DC API call process failed"
}

Internal Server Error
{
    "statusCode": "500",
    "message": "Exception occured at InvoiceCloudController.GoGreenPreferences.Error-{{Exception Details}}"
}
GoGreenIndicator: 1 = Paperless
GoGreenIndicator: 0 = Not Paperless
"Email": null
 for when the customer is being removed from paperless
When GoGreen is set to ‘0’, Email address is set to blank value in DC. Any value in email address will be ignored.
Data Pump: AutoPay Enrollment
AutoPayPreferences
Used to update autopay settings
POST: https://apilow.bmico.com/dev/invoicecloudconnect/api/v1/InvoiceCloud/AutoPayPreferences

Headers

Content-Type: application/json
Ocp-Apim-Subscription-Key: fadfc3df8296450db0633e1eefd0fe72

Sample Request

{
  "AccountNumber": "DB0000001645",
  "IsRecurring": "1"
}
Sample Response
{
    "statusCode": "200",
    "message": "Success"
}

Bad Request
{
    "statusCode": "400",
    "message": "DC API call process failed"
}

Internal Server Error
{
    "statusCode": "500",
    "message": "Exception occured at InvoiceCloudController.AutoPayPreferences.Error-{{Exception Details}}"
}
IsRecurring: 1 = Auto Pay
IsRecurring: 0 = Not AutoPay
This is for Autopay only. Recurring scheduled payments are not included. 
Bill Presentment
BalanceRefresh
The same endpoint as RTDR will be used for presenting Bill Images. 
POST: 
https://{baseUrl}/invoicecloudconnect/api/v1/InvoiceCloud/BalanceRefresh
Sample Request : 
The request body should contain the invoice number and the account number.
 
{
  "AccountNumber": "DB0000003346",
  "InvoiceNumber": "0000207953"
}
Sample Response :
 
The response body should contain the invoice PDF in base64 string format as well as other relevant information such as the status code, pastDue, currentInvoiceAmount, totalAmountDue and the balanceDue.
 
200: Successful
{
    "pastDue": "2289.0000",
    "currentInvoiceAmount": "432",
    "totalAmountDue": 2289,
    "balanceDue": "2289.0000",
    "invoicePdf": "{base64 string}"
}
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller
File Extension: BIF
File Naming Convention: BID_MMDDYYYY075312.BIF
File Delimiter: 
Specification: 
Sample File: 
File Transfer Frequency: Hourly
Exact IC naming convention is used for all Fields. 
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
Y
TRUE
File Header
2
BillerGuid
Y
TRUE
File Header
3
ThirdPartyFileReference
Y
FALSE
File Header
4
FileCreationDate
Y
TRUE
File Header
5
InvoiceCount
Y
TRUE
File Header
6
TotalInvoiceAmount
Y
TRUE
File Header
7
RowType
Y
TRUE
Invoice Header
8
RecordType
Y
TRUE
Invoice Header
9
InvoiceFormatGuid
Y
TRUE
Invoice Header
10
InvoiceNumber
Y
TRUE
Invoice Header
11
InvoiceDate
Y
TRUE
Invoice Header
12
InvoiceDueDate
Y
TRUE
Invoice Header
13
TotalAmountDue
Y
TRUE
Invoice Header
93
BalanceDue
Y
FALSE
Invoice Header
58
RowType
Y
TRUE
RowType
Customer Record
59
AccountNumber
Y
TRUE
Customer Record
60
CustomerName
Y
TRUE
Customer Record
61
Address1
Y
FALSE
Customer Record
63
City
Y
FALSE
Customer Record
64
State
Y
FALSE
Customer Record
65
Zip
Y
FALSE
Customer Record
67
EmailAddress
Y
FALSE
EmailAddress
Customer Record
70
RowType
Y
RowType
71
ProductID
Y
FALSE
Invoice Detail
252
InvoiceTypeID
Y
FALSE
Invoice Detail
407
PastDue
Y
FALSE
Invoice Detail
Advanced Settings
Setting ID
Description
Value
Is value unique per biller? (Y/N)
8
RTDR EndPoint/WebService URL
Y
10
RTDR Key or Password if Applicable	
Y
11
DataPump Payments EndPoint/WebService URL	
Y
13
DataPump Payments EndPoint/WebService Password	
Y
14
DataPump Paperless EndPoint/WebService URL	
Y
17
DataPump AutoPay EndPoint/WebService URL	
Y
20
Remote PDF EndPoint/WebService URL	
Y
64
DataPump Payments CC Code	
1(1IVC)|2(1IVB)|11(1IVB)|0(1IVC)
Y
65
DataPump Payments ACH Code	
1(1VCC)|2(1VCB)|0(NA)
Y
101
DataPump ACH Rejects EndPoint/WebService URL	
Y
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
IC CRM
AllowPartialPayments
BIF Customization
AutoPayCollectionDate
BIF Customization
BalanceForward
BIF Customization
CreditCardServiceFee
IC CRM
FirstNotifyRequestedDate
BIF Customization
InvoiceDate
BIF
InvoiceDueDate
BIF
InvoiceFormatGuid
BIF
InvoiceTypeID
BIF
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
BIF Customization - If requested
PaymentExpirationDate
BIF Customization - If requested
PaymentExpirationMessage
BIF Customization - If requested
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
BIF Customization
ThirdNotifyRequestedDate
BIF Customization
User Interaction and Design
Data Flow - Invoice
Data Flow - Adjustments
Data Flow - Payment
Data Flow - Void
Data Flow - ACH Reject
Data Flow - Change Log
Data Flow - Bill Presentment
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
User Stories
Invoice Cloud Web Services
API Name
API Use/Purpose
UploadInvoiceFile
Upload Invoices to Invoice Cloud
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
 URL:/spaces/IM/pages/2394914832/BID+2104+Builders+Mutual+Insurance+Company+BMIC+Duck+Creek+Technical+Design
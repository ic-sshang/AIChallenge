Payer Portal:
This is the Repo for the Payer NextGen Payer Portal UI which is a React based SPA UI hosted in a container in the Payer AKS Cluster.
Integrate new MFE with Payer Portal
Decide & Document
Remote name: 
NewFeatureUI
Remote (MFE) Setup
Configure MF (remote):
name: 'NewFeatureUI'
filename: 'remoteEntry.js'
exposes: { './App': './src/App' }
shared
: 
react
, 
react-dom
 as singletons (also set as 
peerDependencies
)
Export a 
default
 React component at 
./src/App
Do 
not
 call 
createRoot
Consume host contexts; avoid side effects at module eval
Remote Build & Hosting
Dev: serve on a fixed port (e.g., 
http://localhost:3000/remoteEntry.js
) with CORS (
Access-Control-Allow-Origin: *
)
Prod: publish to CDN/static hosting with hashed filenames (immutable); set cache headers
Host Runtime Config
Add env var: 
REACT_APP_NEWFEATURE_REMOTE_URL
Dev: 
http://localhost:3000/remoteEntry.js
Prod: 
https://cdn.example.com/newfeature/remoteEntry.js
In 
Configuration.ts
, map to runtime:
configuration.newFeatureRemoteUrl = process.env.REACT_APP_NEWFEATURE_REMOTE_URL;
Host Webpack (Module Federation)
In 
webpack.dev.js
 and 
webpack.prod.js
, add dynamic remote using a promise loader:
remotes.NewFeatureUI
 loads 
window.invoiceCloud.configuration.newFeatureRemoteUrl + '?v=' + Date.now()
Do 
not
 mark remote as 
eager
TypeScript Declarations (Host)
Add: 
declare module 'NewFeatureUI/App';
Host Container Component
Create 
NewFeatureContainer.tsx
:
const RemoteApp = React.lazy(() => import('NewFeatureUI/App'));
Wrap with 
ErrorBoundary
Render within 
<Suspense fallback={...}>
Routing Integration
In 
Routes.tsx
, under 
:sessionId
 branch:
<Route path="newfeature/*" element={<NewFeatureContainer />} />
(Use 
/*
 only if the remote owns nested routes; otherwise omit)
Permission / Feature Gating (Optional)
In 
NewFeatureContainer
, read 
UserPermissionContext
 / 
BrandingContext
If not allowed: render controlled message or 
<Navigate to="../notfound" replace />
Error Handling
ErrorBoundary should:
Show fallback UI
Log remote name, URL, and stack
Offer 
Retry
 (re-trigger dynamic import; optionally add a new cache-busting param)
Local Dev Workflow
Start remote: 
npm start
 (port 3001)
Start host with 
REACT_APP_NEWFEATURE_REMOTE_URL=http://localhost:3000/remoteEntry.js
Navigate to 
http://localhost:<hostPort>/<sessionId>/newfeature?...
Verify 
remoteEntry.js
 loads and component renders
Smoke Test (Before PR/Merge)
Remote loads without “Invalid hook call” (React singletons match)
Context data displays; anonymous mode handled
Route works under 
/:sessionId
ErrorBoundary captures failures; retry works
 URL:/spaces/PE/pages/4585685352/Integration+of+MFE+with+Payer+Portal
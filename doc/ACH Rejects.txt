ACH payment gets processed through payment flow (Virtual Site, Customer Portal, Autopay, etc) 
ACH payment is approved
1-3 days later (could be longer) ACH payment is rejected by the bank. 
Payment Processor sends ACH Reject details to Invoice Cloud. (Varies by processor. Paya: SOAP API Call, Chase: DFR Files, Braintree/PayPal: DSDR files) 
A process on the Invoice Cloud side imports the Ach Reject into “achrejects” table (biller shard)
Payers may get an email depending on the scenario 
Biller may also get an email depending on the scenario as well. 
Biller also receives a daily email summary of the imported rejects. Includes total count of rejects and volume. 
ACH Reject details are sent via data pump when insACHRejects is used. 
Note: The original approved payment stays as approved and whenever a Biller reviews the payment in the biller portal under Search Payments it will show additional details that the payment was rejected. 
There is a column in ACHRejects called “MerchantOrderNumber”/”RejectReference” that maps to the Payments table “RejectReference” 
Create Test Rejects
Use the CRM tool if you only want to create a reject that ties to a payment. This tool would not handle any of the scenarios of sending an email or inserting it into the Data Pump. 
a possible solution for Data Pump - createTestACHReject - update it to have an optional param or add support for checking Data Pump. 
A second option is to use createTestACHReject as is and then if the Integrations team has a test process to insert into Data Pump provide a reject that already exists.
Test E2E for Data Pump:
Create an ACH Payment that is approved with a unique reject reference
Close the batch for that ACH Payment
Locate the reject reference and details of the payment. Use insACHRejects to simulate the ach reject flow for the insert and the data pump logic. 
 URL:/spaces/ED/pages/3168862258/ACH+Rejects
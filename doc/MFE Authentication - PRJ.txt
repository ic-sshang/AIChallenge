1. Biller JWT (Long-Lived)
Issued to the biller (e.g., via a biller portal).
Contains claims like:
iss
: api.invicecloud.com/payer 
sub
: Biller GUID
aud
: api.invicecloud.com/payer
domain
: 
biller-site.com
jti
: Guid(Unique Identifier to identify JWT token in db)
Signed with IC private key, stored in Azure Key Vault.
Dev
Azure Key Vault: icappsettingsdevtest
Secret Key: JwtSigningCertificate
Prod
Azure Key Vault: icappsettings
Secret Key: JwtSigningCertificate
2. 
Web Component Loads on Biller Site
The Web Component includes the 
biller JWT
 (e.g., embedded in the page).
The Web Component sends this JWT to 
Payer Auth API
.
3. 
Payer Auth API
Validates the biller JWT:
Signature (use public key from Key Vault)
Domain claim matches
Biller GUID claim
Queries Master DB for BillerID by Biller GUID (selAzureBillers)
Queries Biller Shard for JWT Value, active status
Issues a 
short-lived anonymous JWT
:
sub
: anonymous UUID
aud
: api.invoicecloud.com
iss
: api.invicecloud.com/payer
urn:invoicecloud:billerguid
: value from biller JWT
urn:invoicecloud:usertype
: payer
exp
: short-lived (TBD)
Optionally includes a 
session ID
 or 
rate limit token
.
4. 
Web Component Uses Anonymous JWT
All API calls from the Web Component use this short-lived token (or session cookie).
Your backend validates it and applies appropriate access controls.
Less Secure (JWT value exposed to React)
The below diagram outlines the exchange of the biller JWT for a short lived JWT.  React will use this value when communicating with the backend.
2
1
0
0
4530438295
4529717581
1
Untitled Diagram-1753727980345.drawio
3
3
https://invoicecloud.atlassian.net/wiki
Untitled Diagram-1753727980345.drawio
0
880.5
621
More Secure (JWT Value HTTP Only Cookie)
The below diagram outlines the exchange of the biller JWT for a short lived JWT stored in a session cookie.   The short lived JWT value is delivered via a cookie and is not exposed to React.
2
1
0
0
4532895866
4529717581
1
Untitled Diagram-1753797416209.drawio
3
3
https://invoicecloud.atlassian.net/wiki
Untitled Diagram-1753797416209.drawio
0
950.5
1012
More Secure (JWT Value HTTP Only Cookie) + Network Optimized
The below diagram combines the exchange of the biller JWT for a session cookie and a data 
request. 
2
1
0
0
4532699327
4529717581
1
Untitled Diagram-1753798586796.drawio
4
4
https://invoicecloud.atlassian.net/wiki
Untitled Diagram-1753798586796.drawio
0
930.5
1012
Authentication Flow-Diagram
2
0
1
0
4529717581
4539842571
Authentication_MFE.drawio
1
1
1
https://invoicecloud.atlassian.net/wiki
Authentication_MFE.drawio
0
791
311
 URL:/spaces/EA/pages/4529717581/MFE+Authentication+-+PRJ
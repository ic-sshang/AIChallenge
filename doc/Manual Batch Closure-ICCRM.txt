Terminals provide an option to 
manually close
 the batch when needed.
In order to close the batch manually go to terminals menu and click on the button as shown above. Then upon successful batch close confirmation message will be displayed as below.
¬†
There is another class file is there clsBatchOperations
This is having the method called closeterminal below is the signature of the method
CloseTerminal(ByVal TerminalID As Integer, ByVal sendBatchCloseNotice As Boolean, ByVal BillerGUID As String)
üìå Terminal & Batch Lookup
selAzureBillers
Use Case
:
Retrieves 
biller configuration
 and details based on a unique BillerGUID.
Purpose
:
Helps validate that the biller is active and correctly configured before proceeding to batch operations.
selTerminals
Use Case
:
Fetches detailed information about the specified terminal, including:
TerminalID
, 
BillerID
PaymentTypeID
CurrentBatchCount
 and 
CurrentBatchVolume
TerminalDesc
, 
ModuleID
, 
ModuleDesc
ModuleParameters
 (e.g., MID, TID, BIN, industry type, etc.)
Purpose
:
Confirms which module (e.g., 
ChasePaymentech
) the terminal is using and what batch activity (volume & count) currently exists.
By this we are getting the terminal and batch count related details
TerminalID
BillerID
PaymentTypeID
CurrentBatchCount
CurrentBatchVolume
TerminalDesc
ModuleID
ModuleDesc
ModuleParameters
402749
2002
1
10
106
CHASE TEST
3
ChasePaymentech
mid=407225&tid=001&bin=000001&industrytype=EC&live=0&pinlessdebit=0
¬†
Based on payment type id and module id plays key role for which type of terminal it is like chase, pay pal,bridge pay etc.below Enum is for module ids. And 
tblModules
 is the table in database.
üîÑ Terminal & Batch Initialization
selTerminals
Use Case
: Fetches terminal configuration data based on BillerID, PaymentTypeID, and module parameters.
Example
:
selTerminals @BillerID=2002, @ModuleParameters='...', @PaymentTypeID=1
spBundleBillerCreditCardBatch
Use Case
: Creates a 
credit card
 batch by bundling all approved credit card payments for the given terminal.
Example
:
spBundleBillerCreditCardBatch @BillerID=2002, @TerminalID=402749
spBundleBillerAchBatch
Use Case
: Bundles all approved 
ACH payments
 for the specified terminal into a batch.
Example
:
spBundleBillerAchBatch @BillerID=2002, @TerminalID=402752
üì¶ Batch Insertion & Tracking
insSettledBatches
Use Case
: Inserts a new settled batch record for tracking settlement of payments.
Input
: Includes BillerID, SettledBatchGUID, PaymentTypeID, ItemCount, NetVolume, and more.
Example
:
insSettledBatches @BillerID=2002, ..., @NetVolume=116
updSettledBatchDepositDate
Use Case
: Updates the 
deposit date
 for a settled batch after batch settlement is complete.
Example
:
exec updSettledBatchDepositDate @SettledBatchID=80352, @BillerID=2002
üìä Post-Batch Processing
tps.spComputeBatchVolumeBreakDown
Use Case
: Calculates the 
volume breakdown
 (Visa, MC, ACH, etc.) for the specified SettledBatchID.
Result
: Used to update volume metrics post settlement.
Example
:
exec tps.spComputeBatchVolumeBreakDown @SettledBatchID=80352
üìß Email Notification
selBillerEmailProcessList
Use Case
: Retrieves biller-specific email configurations for batch settlement notifications.
Example
:
selBillerEmailProcessList @BillerEmailProcessID=2, @BillerID=2002
üåê External Integrations (API URLs)
Chase PaymentTech SOAP & REST APIs
:
Used for actual settlement submission, reconciliation, or EOD (End of Day) reporting.
https://wsvar.paymentech.net/PaymentechGateway
https://ws.paymentech.net/PaymentechGateway/wsdl/PaymentechGateway.wsdl
https://nsp.invoicecloud.com/tunnelapi/v1/chase/endofday
¬†
¬†
¬†
 URL:/spaces/PE/pages/4351459398/Manual+Batch+Closure-ICCRM
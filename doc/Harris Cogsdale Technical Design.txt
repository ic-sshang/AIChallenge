Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation
1
7
Jira ticket 
N/A
Release Date
N/A
Document status
complete
Green
Document owner
 
 
Solution engineer
 
Knowledge Transfer
N/A
API Documentation
Unique Biller Integration Values (will be provided on the Integration Coding Form):
Example Test BID: Cogsdale Test Dev Portal - BID 565
RTDR/Datapump URL, Username and Password will be provided to add to the advanced settings for every Cogsdale biller during Integration. 
Additional Detail
Version 1 is no longer supported or implemented
Version 2 is supported for legacy/existing customers but is no longer implemented
Version 4 is supported sending donation payments through Data Pump with the Origin property defined per invoice type
Service Version (Adv Setting 35) applies to Data Pump, and only applies to RTDR if RTDR Service Version (Adv Setting 81) is not set.
RTDR Service Version is now tied to Adv Setting 81 - RTDR Service Version (valid options are 1, 2, and 3). If RTDR Service Version is not set, RTDR will use Service Version (Adv Setting 35) instead.
If a biller wants to upgrade the Service Version to 4, they first need to set RTDR Service Version to the desired version (1, 2, or 3), because RTDR Service Version 4 does not exist.
Version
IC Use
Partner API Name
Description
Request
Response
Specifications
2 
RTDR: Balance Update
GetAccountBalance
Use to get the balance on an account.
Properties are set as follows:
Client Properties:
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
LocationID
: Depending on option 50; if On then we set the value for 
LocationID
 = first part of Acc# (before the -). If Off then we set the second part (after the -). 
CustomerNumber
: Depending on option 50
If On then we set the value for 
CustomerNumber
= second part of AccountNumber (after the -)
If Off then we set the first part (before the -)
We expect to get back information on the most recent bill on the partner’s side. 
Uses svcCogsdaleCore2016.CsmCoreWSClient using the Endpoint Configuration and EndpointAddress to send a request to update balances. 
Endpoint Configuration = NetHttpBinding_CsmCoreWS3
Endpoint Address =
1b51988d-5ec0-4d59-bca5-ec56a8ebb1e0
f018d91f-0d90-48d2-aef6-6543c61ddb4e
DECIDED
 IF InvoiceTypeID = 2, then we pull Biller Advanced Setting 88 to set the Endpoint Address
39ae9cff-a2bf-465d-ac05-a9b5f7d83f4e
DECIDED
Else we use Biller Advanced Setting 8
 IF InvoiceTypeID = 2, then we pull Biller Advanced Setting 88 to set the Endpoint Address
Else we use Biller Advanced Setting 8
Check 
StatementNumber
 from the response to confirm that 
BillerInvoiceNumber
 matches. 
eefdd614-2c5c-49bb-916e-4121fe55bf19
193183fd-8b52-42b4-a92d-f0fa95a98641
DECIDED
IF YES: Update the Balance Due (using the 
BalanceDue
 value in the respond).
a12a9719-eb98-4a3b-9bcb-72d1a37d59af
DECIDED
IF NO: Do not update the 
Balance Due
. IC will display an error message "unable to update balance, new bill has been generated"
IF YES: Update the Balance Due (using the 
BalanceDue
 value in the respond).
IF NO: Do not update the 
Balance Due
. IC will display an error message "unable to update balance, new bill has been generated"
Balance Due for Notifications - clsCogsdale.vb and clsCogsdaleWithCashPmnts.vb:  comparison between IC’s 
BalanceDue 
and 
resp.Balancedue 
needs to be made in order to keep the balance due consistent between IC, Cogsdale and Email Notification Balances
 - 
Currently in progress INT-3636
 
3
RTDR: Balance Update
GetAccountBalance
Use to get the balance on an account.
Properties are set as follows:
Client Properties:
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
AccountNumber
: 
LocationID
: Depending on option 50; if On then we set the value for 
LocationID
 = first part of Acc# (before the -). If Off then we set the second part (after the -).
CustomerNumber
: Depending on option 50
If On then we set the value for 
CustomerNumber
= second part of AccountNumber (after the -)
If Off then we set the first part (before the -)
We expect to get back information on the most recent bill on the partner’s side. 
Uses svcCogsdaleCoreV3.CsmCoreWSClient using the Endpoint Configuration and EndpointAddress to send a request to update balances. 
Endpoint Configuration = NetHttpBinding_CsmCoreWS4
Endpoint Address =
f36cfbee-d397-4ea3-9e12-e08cc85ec2fb
7ec2ca15-eed3-4d26-b7e4-3df22bf9da8f
DECIDED
 IF InvoiceTypeID = 2, then we pull Biller Advanced Setting 88 to set the Endpoint Address
c1333090-836b-439a-941a-05dd957ccb41
DECIDED
Else we use Biller Advanced Setting 8
 IF InvoiceTypeID = 2, then we pull Biller Advanced Setting 88 to set the Endpoint Address
Else we use Biller Advanced Setting 8
InvoiceCloud uses logic to determine whether or not to update the balance:
Check 
StatementNumber
 from the response to confirm that 
BillerInvoiceNumber
 matches. 
89829d20-61fe-4bc6-8ccd-b4928afc2cd2
0eb07bb2-efa2-4227-861d-695ca5884cbf
DECIDED
IF YES: Update the Balance Due (using the 
BalanceDue
 value in the respond) and update 
Past Due
 (using the 
BalancePastDue field
).  
a14e088a-038c-4bb8-b211-836ac276727f
DECIDED
IF NO: Do not update the 
Balance Due
 or 
Past Due
. IC will display an error message "unable to update balance, new bill has been generated"
IF YES: Update the Balance Due (using the 
BalanceDue
 value in the respond) and update 
Past Due
 (using the 
BalancePastDue field
).  
IF NO: Do not update the 
Balance Due
 or 
Past Due
. IC will display an error message "unable to update balance, new bill has been generated"
Balance Due for Notifications - clsCogsdaleV3.vb: comparison between IC’s 
BalanceDue 
and 
resp.Balancedue 
needs to be made in order to keep the balance due consistent between IC, Cogsdale and Email Notification Balances
 - 
Currently in progress INT-3636
 
3
RTDR: Balance Blocked Payment Methods
GetPaymentRestriction
Use to get the status of blocked payment methods on an account and update the balance on the IC side in real-time.
Properties are set as follows:
Client Properties:
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
CustomerRequest: 
CustomerNumber
: Depending on option 50; if On then we set the value for 
CustomerNumber
= second part of Acc# (after the -). If Off then we set the first part (before the -).
We expect to get back information on the account date set on the partner’s side. 
Update the IC customer record 
BlockPaymentsCC
 field based on the bit value we get for the 
BlockCreditCard
 field in the response.
We should do the same using the 
BlockEFT
 field value we receive in the response.
2 & 3
Data Pump: Payment
Depending on Payment Type:
CC: 
SubmitCreditCardPayment
Cash/Kiosk: 
SubmitCashPayment
EFT: 
SubmitECheckPayment
These methods are used to post payment data to the client’s system in near-real-time.
Properties are set as follows:
Client Properties for Sewer:
Endpoint = AdvancedSetting 88
UserName
 = AdvancedSetting 89
Password
 = AdvancedSetting 90
Client Properties for Utility/Other:
Endpoint = AdvancedSetting 8
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
AccountNumber
: 
LocationID
: Depending on option 50; if On then we set the value for 
LocationID
 = first part of Acc# (before the -). If Off then we set the second part (after the -).
CustomerNumber
: Depending on option 50; if On then we set the value for 
CustomerNumber
= second part of Acc# (after the -). If Off then we set the first part (before the -).
AuthorizationCode
:  PaymentGUID | Payment Type (Amex, MC, Disc, Visa)
TotalAmount
: PaymentAmount
FeeAmount
: ConvenienceFee
BaseAmount
: 
TotalAmount
 - 
FeeAmount
Donations (Only):
Payment Code: 
1:Miscellaneous Payments
Payment Source: 
1:Donations
Active donation fund invoice type
Donation-1-ID: 188
Donation-2-ID: 189
The Origin property is defined per invoice type according to this JSON config:
{
  "Cogsdale": {
    "DataPumpConfig": {
      "DonationOriginConfig": [
        {
            "InvoiceTypeID": 188,
            "OriginText": "ST-SUSANS"
        },
        {
            "InvoiceTypeID": 189,
            "OriginText": "GNF"
        }
      ]
    }
  }
}
If no errors occur after transmission, we expect to get nothing back. Otherwise, we will get a message set in the 
Errors
 field in the response.
2 & 3
Data Pump: Paperless Enrollment
SetEBillingStatus
Used to update/sync the customer account’s Paperless status on the client’s system.
Properties are set as follows:
Client Properties for Sewer:
Endpoint = AdvancedSetting 88
UserName
 = AdvancedSetting 89
Password
 = AdvancedSetting 90
Client Properties for Utility/Other:
Endpoint = AdvancedSetting 8
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
AccountNumber
: 
LocationID
: Depending on option 50; if On then we set the value for 
LocationID
 = first part of Acc# (before the -). If Off then we set the second part (after the -).
CustomerNumber
: Depending on option 50; if On then we set the value for 
CustomerNumber
= second part of Acc# (after the -). If Off then we set the first part (before the -).
EBillingFormat
: 1 for Paperless, 0 for Paper.
If no errors occur after transmission, we expect to get nothing back. Otherwise, we will get a message set in the 
Errors
 field in the response.
2 & 3
Data Pump: AutoPay Enrollment
SetAutoPayStatus
Used to update/sync the customer account’s Autopay status on the client’s system.
Properties are set as follows:
Client Properties for Sewer:
Endpoint = AdvancedSetting 88
UserName
 = AdvancedSetting 89
Password
 = AdvancedSetting 90
Client Properties for Utility/Other:
Endpoint = AdvancedSetting 8
UserName
 = AdvancedSetting 9
Password
 = AdvancedSetting 10
Request Properties:
AccountNumber
: 
LocationID
: Depending on option 50; if On then we set the value for 
LocationID
 = first part of Acc# (before the -). If Off then we set the second part (after the -).
CustomerNumber
: Depending on option 50; if On then we set the value for 
CustomerNumber
= second part of Acc# (after the -). If Off then we set the first part (before the -).
IsEnabled
: True for customer on autopay, False for not on autopay.
If no errors occur after transmission, we expect to get nothing back. Otherwise, we will get a message set in the 
Errors
 field in the response.
2 & 3
PDF Linking
StatementRequest
Used to retrieve invoice images for display
Uses svcCogsdaleCore2016.StatementRequest as the request object that holds the StatementNumber. 
Request Properties: 
StatementNumber = BillerInvoiceNumber
Uses serviceProxy2.GetPdfStatement as the response object that holds the request. 
Once the response get’s sent, we check if the response has contents in it, if it does, then we got a successful PDF image response from Cogsdale and are ready to write in the web page.  
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is transfer bill/invoice data to IC from the biller. Files are transferred to IC raw via a 
custom webservice that’s baked into StratusWebServices called HarrisCogsdale.vb
 that uses 
https://www.invoicecloud.com/stratuswebservices/HarrisCogsdale
 to send over WebService contents that is then converted into a pipe delimited file. 
File Extension: CSV
File Naming Convention: Cogs-ICBillerInvoices-yyyyMMddhhmmss
File Delimiter: Pipe ( | )
Specification: Pipe-Delimited CSV with header: 
CustomerNumber|LocationId|CustomerName|InvoiceDate|DueDate|TotalAmountDue|BalanceDue|CustomerAddress|CustomerCity|CustomerState|CustomerZipCode|ServiceAddress|StatementNumber|BlockCC|BlockEft|InvoiceTypeID|BalancePastDue
Sample File: 
SFTP File Path: NA, Biller imports a raw file via webservices.
File Transfer Frequency: Once per day
Field Mapping
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Details
Record Type
1
RowType
N
TRUE
N/A - Always FH
N/A
File Header
2
BillerGuid
N
TRUE
N/A- Value generated by IC
N/A
File Header
3
ThirdPartyFileReference
N
FALSE
N/A
N/A
File Header
4
FileCreationDate
N
TRUE
N/A
N/A
File Header
5
InvoiceCount
N
TRUE
N/A
N/A
File Header
6
TotalInvoiceAmount
N
TRUE
N/A
N/A
File Header
7
RowType
N
TRUE
N/A
N/A
Invoice Header
8
RecordType
N
TRUE
N/A- Hardcode to “R”
N/A
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A - Value generated by IC
From BIF Customizations
Invoice Header
10
InvoiceNumber
Y
TRUE
LocationID-StatementNumber
Invoice Header
11
InvoiceDate
Y
TRUE
InvoiceDate
If value is “NULL” use today’s date.
Invoice Header
12
InvoiceDueDate
Y
TRUE
DueDate
If value is “NULL” use today’s date.
Invoice Header
13
TotalAmountDue
Y
TRUE
TotalAmountDue
Invoice Header
38
Custom1
Y
FALSE
ServiceAddress
Invoice Header
93
BalanceDue
Y
FALSE
BalanceDue
Invoice Header
252
InvoiceTypeID
F
TRUE
InvoiceTypeID
Acceptable InvoiceTypeID’s from file: 1, 2, 42. Otherwise, default to 42.
Invoice Header
347
BillerInvoiceNumber
Y
FALSE
StatementNumber
Invoice Header
375
Active
N
FALSE
Always 1
Invoice Header
407
PastDue
Sometimes
FALSE
BalancePastDue
If the field is not in the file, set to 0.
Invoice Header
58
RowType
N
TRUE
N/A - Always CR
Customer Record
59
AccountNumber
Y
TRUE
CustomerNumber-LocationID
Or
LocationID-CustomerNumber
Depending on Biller Option 50 in the CRM:
a745daad-3681-4198-b9e4-738617766780
ecf926ac-c01f-4be4-9c3c-9abe859372a5
DECIDED
Option 50 - On: LocationID-CustomerNumber 
c89b37ce-6319-41cf-bf3e-c41bd9740da3
DECIDED
Option 50 - Off: CustomerNumber-LocationID
Option 50 - On: LocationID-CustomerNumber 
Option 50 - Off: CustomerNumber-LocationID
Customer Record
60
CustomerName
Y
TRUE
CustomerName
Customer Record
61
Address1
Y
FALSE
CustomerAddress
Customer Record
63
City
Y
FALSE
CustomerCity
Customer Record
64
State
Y
FALSE
CustomerState
Customer Record
65
Zip
Y
FALSE
CustomerZipCode
Customer Record
356
BlockPaymentsCC
Y
FALSE
BlockCC
Value can be either 1 or 0. (Set as-is)
Customer Record
357
BlockPaymentsEFT
Y
FALSE
BlockEFT
Value can be either 1 or 0. (Set as-is)
Customer Record
409
Active
N
FALSE
Always 1
Customer Record
70
RowType
N
TRUE
N/A - Always ID
Invoice Detail
72
Description
N
FALSE
N/A- Hardcode to “pdf”
N/A
Invoice Detail
Advanced Settings
Specification:
If Advanced Settings 116, 117, and 118 are set 
and
 aliasing is turned off in the CRM, we will send PayPal brands payments (PayPal, PayPal Credit, Venmo) through Data Pump with the code from the Advanced Setting set as the payment type name in the auth code and post the payments as Credit Card payments. 
If the Advanced Settings are not set and aliasing is turned off, PayPal payments will send as E-Check payments, which do not use the auth code.
If aliasing is turned on, PayPal payments will post as Credit Card payments, with “Visa” as the payment type name.
Setting ID
Description
Value
Is value unique per biller? (Y/N)
29
RemoteAuthenticationWs - Create Customer
1
 or 
0
Y
31
Customer Portal - Sync Customer Group Links
1
 or 
0
Y
32
Customer Profile - Set Block ACH/CC as ReadOnly
1
 
N
35
Service Version
1
, 
2
, 
3
 or 
4
Y
81
RTDR Service Version
1
, 
2
, or 
3
Y
116
DataPump Payments Paypal Code
PayPal
Y
117
DataPump Payments Paypal Credit Code
PayPal Credit
Y
118
DataPump Payments Venmo Code
Venmo
Y
131
JSON Configuration
{ "Cogsdale": { "DataPumpConfig": { "DonationOriginConfig": [ { "InvoiceTypeID": 188, "OriginText": "ST-SUSANS" }, { "InvoiceTypeID": 189, "OriginText": "GNF" } ] } } }
Y
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A
AllowPartialPayments
On BIller Questionnaire - BIF customization
AutoPayCollectionDate
On BIller Questionnaire - BIF customization
BalanceForward
On BIller Questionnaire - BIF customization
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
On BIller Questionnaire - BIF customization
InvoiceDate
in BIF
InvoiceDueDate
in BIF
InvoiceFormatGuid
BIF Customizations
InvoiceTypeID
N/A
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
N/A
PaymentExpirationDate
N/A
PaymentExpirationMessage
N/A
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
On BIller Questionnaire - BIF customization
ThirdNotifyRequestedDate
On BIller Questionnaire - BIF customization
User Interaction and Design
Data Flow - Invoices
att2300772357
1956446286
1
Cogsdale Invoice Flow
IM
att2300346420
att2300542985
0
Data Flow - Adjustments
att2299527221
1956446286
1
Cogsdale Adjustment Flow
IM
att2300837897
att2299527216
0
Data Flow - Payment
att2301100040
1956446286
1
Cogsdale Payment Flow
IM
att2299723802
att2300739593
0
Data Flow - Change Log
att2299723807
1956446286
1
Cogsdale Customer Changes Flow
IM
att2300870668
att2301329424
0
Data Flow - Bill Presentment
att2311946255
1956446286
1
cogsdale23
IM
att2310701130
att2311422015
0
Payer Experience
Varies per biller. Billers will have SSO with Cogsdale CustomerWeb, SilverBlaze, or their own custom integration. Few billers will use the Standard Invoice Cloud customer portal as-is.
Biller Experience
Billers will access Invoice Cloud from the standard Biller Portal on the Invoice Cloud website.
Invoice Cloud Web Services
API Name
Endpoint
API Use/Purpose
Harris Cogsdale - Invoice Upload (Custom)
https://www.invoicecloud.com/stratuswebservices/HarrisCogsdale
Cogsdale billers use a custom Web Service Method in StratusWebService that allows Cogsdale billers to send WebService requests thats converts their WebService contents into invoices for the biller. 
If the biller’s 
Advanced Setting 29 - RemoteAuthenticationWS - Create Customer
 is toggled ON, then we create a customer record with the WebService contents the biller sends over. 
Advanced Setting 29 - RemoteAutehnticationWS is turned on
To ensure Cogsdale billers can use our WebService to send over invoices, they must have a 
StratusGUID
 setup.  In the CRM, the biller must have a 
Stratus Config 
setup under Stratus Management. 
Stratus GUID is created when the Stratus Config is created in Stratus Management 
CloudCSRConnect
https://www.invoicecloud.com/integrations/redirect/Csr?
If the biller uses CloudCSRConnect to send invoices, we check if the biller’s partnerID is either Cogsdale (55) or Harris Cogsdale (77). If it is, we then create an invoice like a BIF for this BID using either the 
CurrentInvoiceNumber 
in the request OR creating a new InvoiceNumber by concatenating 
"INV-" & AccountNumber
 together to make up an Invoice Number. We then check if the Apply BIF Customization is turned on in Invoicing -> Advanced Configurations and apply them to the Invoice Header.
RemoteAuthentication
https://www.invoicecloud.com/webservices/remoteauthentication/wsremoteauthentication.asmx
 
This allows Cogsdale billers to Create Customers on the fly if the account does exist. If the account does not exist and Biller Advanced Setting 29 is set to 1, we Creates Customers on the fly for the Biller. If the value is set to 0 or not set at all, we still check if the Account Number is exists. If it the account number doe snot exist, we return the Account Number that was not found. 
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
INT-3636
TBA
When updating the data refresh history, we use the RTDR response's "BalanceDue" field. However, when comparing invoice balances to verify if we need to create a record in the adjustments table, and when sending out email notifications, we compare the RTDR response's "CurrentBalance" field against InvoiceCloud's "BalanceDue" field for each invoice.
Keep RTDR balance due consistent with IC and Adjustment Table records in order to show the balance due consistent on Biller Portal, Email Notifications and Cogsdale.
Change the comparison between IC’s current 
BalanceDue 
and 
resp.CurrentBalance
 to a comparison between IC’s 
BalanceDue 
and 
resp.Balancedue
INT-1054
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
11/8/2020
Donations are being picked up as with the same Origin ID as payments.
Biller would like their inline donations to be sent via data pump to Cogsdale as Miscellaneous Payments
Add Payment Code 1:Miscellaneous Payments,
Payment Source 1:Donations
Use the configuration in CRM:
Donation - 1 - ID: 188
Donation - 2 - ID: 189
INT-7067
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System JIRA
 
TBD
Not support donation payments.
Biller would like their inline donations to be sent via data pump to Cogsdale as Miscellaneous Payments. This is added in service version 4.
supports sending donation payments through Data Pump with the Origin property defined per invoice type. Service Version (Adv Setting 35) applies to Data Pump, and only applies to RTDR if RTDR Service Version (Adv Setting 81) is not set.
 URL:/spaces/IM/pages/1956446286/Harris+Cogsdale+Technical+Design
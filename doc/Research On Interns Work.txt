This article contains documentation on the work the interns did in the effort to make templates dynamic and allow for the templates to be dynamically updated instead of hard coded.
Repo: 
ICTemplates
Branch: 
PROJ-editableTemplates
Tech used: jQuery, Ajax
Files of Interest:
/ICTemplates/Scripts/editableTemplatesRead.js
/ICTemplates/Scripts/editTextRevised.js
/ICTemplates/CirrusUtilities/Utilities.aspx.vb
/ICTemplates/CirrusUtilities/Utilities.aspx
/ICTemplates/web.config
Overview
This project is responsible for managing the editing and displaying of invoice templates. It provides functionality to load, edit, and save templates with version control. Below is a summary of the key features and workflow:
Loading the Template:
Edit mode
Enter edit mode by appending 
edit=1
 at the end of the query string
The invoice is fetched using 
invoiceFormatGuid
, 
billerGUID
, and 
version
ex: 
https://localhost:44373/api/template?invoiceformatguid=${invoiceFormatGuid}&billerguid=${billerGUID}&version=${version}
When the template is loaded, a UI bar is created with options to edit the template.
Editable fields are marked and can be modified through dynamically created modals.
Read only mode
Grabs the template version with the 
effectivedate
 closest to the 
InvoiceDate
The invoice is fetched using the 
invoiceFormatGuid
, 
billerGUID
, and 
invoiceDate
 (
invoiceDate
 is the 
effectivedate
)
ex: 
https://localhost:44373/api/template?invoiceformatguid=${invoiceFormatGuid}&billerguid=${billerGUID}&effectivedate=${invoiceDate}
Both Edit and Read modes
The 
invoiceFormatGuid
was hardcoded into the API calls as the interns were unable to find a way to retrieve this
The html is then injected to the templates html given the field id (field id is being used to reference the editable field in the template)
all editable fields are given the class 
.editableText
 which is used to loop through in the back end and inject the html given the 
fieldid
 for that editable field
Version Control:
If a version number is specified in the query string, an AJAX call is made to fetch the corresponding version of the invoice.
If no version is specified, the original invoice is displayed.
Edit and Read-Only Modes:
The script checks the query string for an "edit" parameter.
If edit=1, the script loads the edit mode with jQuery scripts for editing the editable fields.
Otherwise, it enters read-only mode and loads the appropriate jQuery script for displaying the invoice.
Saving Changes:
Depending on the version and date being edited, the script either updates the existing version or creates a new version.
The logic for determining whether to update or create a new version is based on the current and latest version numbers.
Each editable field has a 
customfieldid
 that is used to map the 
fieldtext
which contains the html for that particular field
Mapping example of saved data:
{
  fieldtext: "html string",
  customfieldid: 1
}
AJAX Calls:
AJAX calls are used to fetch and save invoice data.
The script supports both creating new versions and updating existing ones.
Dynamic UI Elements:
The UI bar and modals for editing are dynamically created and styled.
Buttons for editing, saving, and previewing changes are included in the UI bar.
Edit Mode UI Workflow
When the page is loaded in edit mode you are greeted with the UI bar. To start editing you click on the Edit button.
In edit mode you are able to select an editable field to start editing the field, click the undo button to remove all edits that have been made, or click the preview button to review the changes made.
When an editable field is selected a pop-up modal is displayed where you can edit the html contents of the field.
After saving any changes done to an editable field the editable field will be blue to indicate a change has been made.
After clicking on preview, you will be able to view the invoice as it will be displayed with the changes included. You can also now click on Done to proceed with the completion of the changes.
After clicking on Done a confirmation pop up modal will be displayed to confirm your changes. It displays the version number and gives you the ability to select an effective date.
Conclusion
While the project is incomplete it gives insight to a possible approach for making editable templates a reality. This approach makes use of jQuery and Ajax to manipulate the elements on the page and retrieve/post changes to/from the database via API calls. In the front-end pages certain fields can be made “editable” which allows for the use of an edit mode to manipulate the html contents of that field and save the html in the database, which is then retrieved and injected into the page when viewing the invoices.
 URL:/spaces/IM/pages/3970957335/Research+On+Interns+Work
In the development of the Braintree software some of the changes may require a review by Finance, Boarding, etc. prior to going to production.  In addition, some other changes may require a series of integration tests by a partner or integrator (sometimes referred to as certification).   Due to these situations, it is necessary to introduce a UAT process to the development life cycle.
The goal of this document is to outline the process in such a manner that all parties can understand and agree on it going forward.  Once accepted it will be treated as project process documentation. 
Early Identification of Targeted Items
During scoping ideally, but certainly prior to a story being pulled into an in-progress state, the story needs to be flagged if it is going to go to the UAT environment.  This will allow proper release planning later and help smooth out any issues with branching and merging to the correct locations.  Specifically, the items identified as needing UAT will be merged into a release candidate branch while other items will be merged into main.
The items identified as UAT will need to target a single release as the release candidate repos will be the source of the merge to main, not the individual story branches.  In other words, stories not going to the UAT environment will continue the same continuous deployment model that IC utilizes for other projects today.  However, for those going to UAT they will follow a new process with formalized release plans.  Knowing what needs to go to UAT early will minimize the risk of a rushed certification or rushed development leading into certification.  Ideally these items are defined ahead of estimations.
For items that are going to be subjected to a pre-production UAT test shall have the 
Requires UAT
 field in Jira set to 
Yes
.  Items that are deemed lower risk, but still need a post-production validation test have 
Requires UAT
 set to 
No
 and will be labeled as 
UATinPROD
.  Any other items shall have 
Requires UAT
 set to 
No
 and will be deployed to production once approved by TLR and will only be smoke tested post-deployment.  
In Jira the items which have the 
Requires UAT
 field set to 
Yes
 will appear in a separate swim lane for UAT items.  These items will be labeled with a fix version for the UAT test period in which they have been targeted for delivery.  
note
Temporarily, we want to restrict UAT contents too only consist of around 10-12 items.  We will evaluate this and adjust as we see quality gains and risk mitigation evolve.


Temporarily, we want to restrict UAT contents too only consist of around 10-12 items.  We will evaluate this and adjust as we see quality gains and risk mitigation evolve.


Kanban Board showing the Requires UAT Swimlane and Release Version Labels
As work is pulled in, if the release candidate branch does not exist for a given repo it will be created.  No other aggregate branches shall be created as this can lead to missed items when it’s time to merge the release candidate into main.
Beginning with Milestone 3 these branches will be named using the following convention in all of the repos, if a branch doesn’t exist following this naming convention, then one shall be created using this naming convention:  
Milestone{x}_Candidate
 where {x} represents the sequential milestone being considered.  For example, 
Milestone3_Candidate
.  If the milestone is broken up into phases - allowing for multiple releases within a milestone - then the naming convention will account for that.  
Milestone{x}_Candidate{y}
 where {y} represents the phase.  Assuming Milestone 3 is broken up into 3 phases, the second phase would look like this: 
Milestone3_Candidate2
If there is a need for an additional integration branch then this will be discussed with, and approved by, the engineering manager if deemed appropriate.
Planning for the Release
Assume a new delivery is being planned.  Let’s call it Milestone X.  For Milestone X there are 10 user stories.  Of those 10 stories, 4 of them have a need to go through the certification / UAT process.  Now, let's assume the target date for full delivery of this new milestone is 1/23/2024.  During scoping and grooming we would identify the 4 items that need to go through the certification process.   We would then create a release in Jira with those 4 items included and that release would be ‘2024-01-23 - Milestone X' (prior to release the name may be changed to adhere with current standards).   Working backwards we would plan the release to ensure that all 4 of those items make it into the certification environment by a certain date - at least 3 weeks prior to the release date plus a few days for housekeeping activities related to release readiness.  
If the release is set for 1/23 the UAT should end no later than the Friday prior which is 1/19/2024.  From there we walk it back 3 weeks and the subsequent Monday is the UAT start date (12/26/2023).
note
Note: 
This is just an example.  We would not likely schedule a release around the holidays!


Note: 
This is just an example.  We would not likely schedule a release around the holidays!


From there the estimates provided by the development team should help determine the start date.  For the sake of argument, we will assume the development team said this would take 6 weeks.  So, our milestone start date would be 6 weeks prior to the UAT start date or 11/13/2023.  While the UAT start date is set for 12/26/2023, actual UAT environment testing can begin when the story is delivered to that environment.  However, it is important to realize the official start is where it’s considered to be fully stable and a true production release candidate.  
Branching and Merging
The branching strategy doesn’t currently include the concept of a UAT environment.  This must be addressed in order to support the activity properly.  The infographic below visualizes what the release of Milestone X may look like from the perspective of the source control library.
UAT Branching / Merging Infographic
The critical points to take away from this is to understand that the RC-Milestone X branch only lives until the UAT is complete.  Afterwards that code will move into main and get deployed to production.  The RC branch is always kept in synch with main, all those changes coming into main from external sources and from the CD stories in the release set will get merged into the RC branch and any active branches derived from it. In contrast, the RC Branch goes into main only once at the end.  The CD stories are delivered to main when they are complete.  The UAT stories only go to main when the entire UAT is complete.
This approach allows for continuous deployment, while also isolating the code which needs the extra attention of the UAT process.
This is effectively following the 
Microsoft Git Branching Guidance for Managing Releases
Adjusting The Plan
In the event that priorities change, and a story is needed to go directly to production after work has begun assuming it would need a UAT (or Vice-versa), this can be accommodated however it does introduce additional risk.  If the user story was created from the RC branch and the changes were made, then it needs to be switched to point to main, it will require the developer to extract the changes using a diff and cherry pick them into main.  This is always a risky process as it relies on manual intervention and is thus subject to human error.  
 URL:/spaces/ED/pages/2808053792/The+Braintree+Certification+UAT+process
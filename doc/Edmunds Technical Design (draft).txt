Page Navigation
Jira ticket 
ITR
Release Date
Document status
DRAFT
Document owner
 
 
Solution engineer
 
Salesforce SOW
Knowledge Transfer
File Mapping
Invoice File
File Summary/Purpose: The purpose of this file is to transfer bill/invoice data to IC from the biller
File Extension: .exp
File Naming Convention: <filename>.exp
File Delimiter: Fixed Length
Specification: 
Sample File: 
SFTP File Path: 
File Transfer Frequency: Daily
IMPORTANT NOTES:
BEFORE READING: 
This file mapping contains Tax and Utility data with different mapping. Edmund billers must have their raw files split into invoices, adjustments, and customer update files using Biller File Split to generate a processed file (below): 
To have an organized integration process, Invoice Cloud will have to receive a full raw file with Tax and Utility data every day with all of their customer’s records. Invoices, Adjustments, and Customer Blocking files can be split out using BillerFileSplit. Taxes and Utility data can be split out upon the biller’s request using Advanced Setting 40. Below is a checklist of items that need to be asked for every Edmunds biller to complete the integration:




224


complete


Edmund Billers 
must 
be able to send us their Tax-Utility file daily through FTP to process their file through BillerFileSplit. This automation allows for adjustments to be applied 24 hours after the payment file has been generated to give proper time for the biller to send a new raw file to adjust the invoice balance on our side.  
Q1: Will they be able to provide these files through an automated process?






225


complete


Billers can choose to have customers blocked if the customer has a lien on their account. This is 
optional 
for billers who want to block customers by using Advanced Setting 40. 
Q2: Will the biller want to block customers with a lien record?






226


complete


Billers can choose to split out only Tax or Utility data This allows Integrations to 
configure 
what data to process and split up when processing their Tax-Utility file using Advanced Setting 40.
Q3: Will the biller want to process Tax and/or Utility? 






227


complete


Billers can choose to have all or some Utility data (Water, Sewer, Fire, etc) split into their own invoice type or joined into one invoice type like Utility (InvoiceTypeID = 42). This allows Integrations to 
configure 
the proper invoice types to their Utility data on Invoice Cloud’s side by using Advanced Setting 40.
Q4: Will the biller want us to process their Utility bills together in one Invoice Type  (ex. Fire and Water are billed together in InvoiceTypeID = 42) or would they want their Utility bills to be processed with their own Invoice Type (ex. Water bills are set to InvoiceTypeID=1)? Must be one or the other.






228


complete


Billers can choose to have their split Utility data (Water Sewer, Fire, etc) joined together with Multi-Invoicing by using an InvoiceGroupGUID. This is 
optional 
and 
configurable 
which allows the biller to have separate invoice types but bill their customers using invoice group guids in the Customer Payment Portal with Advanced Setting 40.
Q5: Will the biller want their split Utility invoices joined together by using Multi-Invoicing?






229


complete


Edmund billers have a WIPP for their customers to pay their bills. This helps the Integration team by checking the current data versus the latest raw file the biller sends us since the WIPP contains up-to-date data for the customer.
Q6: Can the biller provide their biller’s Edmunds WIPP? Note: Edmunds WIPP can be found also by Googling “<biller name> WIPP”. (ex. BID 3373 Borough of Hopatcong Edmunds WIPP is this 
https://wipp.edmundsassoc.com/Wipp/?wippid=1912
 
). It’s their version of a payment portal. 




These answers help us determine how we are going to process and configure the biller’s data accordingly. 
For Q1, we want to 
INTEGRATION NOTES
Understanding the Edmunds Raw File
The Edmunds TaxUB File contains all of their customer’s bills for Taxes and Utility. The file contains blocks of customer data that can be determined by finding the start and end of a customer’s block. We can determine the start of a customer block by finding the Tax Customer Block Record
 
Line Type.
 The start of a new customer block is when the 
Line Type
 starts with 00. The 
Line Type
 can be determined by the first 2 digits on each line in the raw file at the location Start 33, End 35, Length 2
. 
A 
Line Type
 can be either 
00, 01, 02, 04, or 05
 each having its own purpose (As of 12/20/2022). 
Below is a list of Line Types that IC recognizes in code (BillerFileSplit) with a description:
00 - Tax Customer Block Record - Contains customer data for the Tax Customer only.
01 - Tax Invoice Record - Contains invoice data for that Tax Customer’s Tax Year and Quarters (4 quarters each year).
02 - Lien Invoice Record - Contains the Lien Record for the Tax and Utility Customer
04 - UB Invoice and Customer Record Part 1 - Contains 
Utility Customer Info
, 
Sum of the Current and Previous Utility
 bills, and 
Current Billing Period Cycle Bill
 data.
05 - UB Invoice and Customer Record Part 2 - Contains Utility invoice data for the 
Past 3 Bills ONLY!
Below is a Sample Edmunds Customer Block with Tax and Utility Data with an arrow pointing to the different Line Types:
none
191210906    00028 -IC:00 here-->0000001193102 BROOKLYN MOUNTAIN RD      BROOKLYN MOUNTAIN        RD        HEFELE, JUDITH ANN                 102 BROOKLYN MOUNTAIN RD                                    HOPATCONG, NJ            07843     2 0000708000001378000000000000000020860000N00000000000+20221224                                                    00000000000+00000000000+00000000000+00000000000+00000000000+NNY20230117        2023011705
191210906    00028 -IC:01 here-->01202300000178875+00000178874+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000178875+00000178874+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+20230201202305011000010110000101NNNNNNNNN 1000010100000000000+1000010100000000000+                                                                                                                                 
191210906    00028               01202200000175850+00000175850+00000181899+00000181899+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+20220201202205012022080120221101NNNNNNNNN 1000010100000000000+1000010100000000000+1000010100000000000+1000010100000000000+                                                                                         
191210906    00028               01202100000174025+00000174024+00000177675+00000177675+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+20210201202105012021080120211101NNNNNNNNN 1000010100000000000+1000010100000000000+1000010100000000000+1000010100000000000+                                                                                         
191210906    00028 -IC:02 here-->022021                2022102022-0000200000858363+00001132209+00000006200+00001990572+TRYSTONE CAPITAL ASSETS, LLC  00002044301+Tax,Water,Sewer                                                                                00000034335+                                                                                                                                                                              
191210906    00028 -IC:04 here-->04Water       10906028  0U                                                            202212230300000000000+00000000000+00000000000+00000000000+00000000000+00000000000+0020221215     30930420220915        686 00000003000+00000000000+00000000000+2022070120220930  1 Y        RESNIHEFELE, JUDITH ANN                 102 BROOKLYN MOUNTAIN RD                                    HOPATCONG, NJ            07843     
191210906    00028 -IC:05 here-->05Water       10906028  020221101     30930420220915        686 00000008500+00000000000+00000000000+20220801     30861820220614       4540 00000008500+00000000000+00000000000+20220501     30407820220316      16180 00000010688+00000000000+00000000000+1000010100000000000+                                                                                                                                           
191210906    00028               04Sewer       10906028  0U                                                            202212230100000028500+00000000101+00000000000+00000000000+00000000000+00000028500+0120230101                               00000028500+00000028500+00000000101+2023010120230331  1 Y        RESNAHEFELE, JUDITH ANN                 102 BROOKLYN MOUNTAIN RD                                    HOPATCONG, NJ            07843     
191210906    00028               05Sewer       10906028  020221001                               00000028500+00000000000+00000000000+20220701                               00000028500+00000000000+00000000000+20220401                               00000028500+00000000000+00000000000+1000010100000000000+                                                                                                                                           

Understanding how BillerFileSplit processes Edmunds Raw File
Invoice Cloud’s Edmunds BillerFileSplit creates an InvoiceNumber using the data in the raw file to determine if the record is either an Invoice Record or an Adjustment Record. Depending on the Invoice Type, we create the InvoiceNumber in various ways.
Below are various ways we create the InvoiceNumber: 
Tax InvoiceNumber Format:
 
DueDate(yyyyMMdd)-AccountNumber
UB InvoiceNumber Format without InvoiceType Prefix: 
AccountNumber-BillingPeriod(StartBillingPeriod(MMyy) & EndBillingPeriodDate(MMyy))
UB InvoiceNumber Format with InvoiceType Prefix: 
InvoiceTypePrefix-AccountNumber-BillingPeriod(StartBillingPeriod(MMyy) & EndBillingPeriodDate(MMyy))
9522ef70-e662-4bc9-a54f-d9af71b9fed3
09337588-8788-4112-bbf0-2be0041dcbef
DECIDED
TAX
:
 
If the DueDate-AccountNumber 
exists
, IC loads this record to an adjustment file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Adjustments\Processed
UB
: Using the newest Billing Period between the Water and Sewer block, if the AccountNumber-BillingPeriod(StartBillingPeriodDate(MMyy) + EndBillingPeriodDate(MMyy)) 
exists
, IC loads this record to a file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Adjustments\Processed
3e89f534-3eac-4d93-a5d6-184e59e1a6a7
DECIDED
TAX
: If the DueDate-AccountNumber 
does not exist
, IC loads this record to an invoice file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Invoices\Processed
UB
: Using the newest Billing Period between the Water and Sewer block, if the AccountNumber-BillingPeriod(StartBillingPeriodDate(MMyy) + EndBillingPeriodDate(MMyy)) 
does not exist
, IC loads this record to a file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Invoices\Processed
TAX
:
 
If the DueDate-AccountNumber 
exists
, IC loads this record to an adjustment file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Adjustments\Processed
UB
: Using the newest Billing Period between the Water and Sewer block, if the AccountNumber-BillingPeriod(StartBillingPeriodDate(MMyy) + EndBillingPeriodDate(MMyy)) 
exists
, IC loads this record to a file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Adjustments\Processed
TAX
: If the DueDate-AccountNumber 
does not exist
, IC loads this record to an invoice file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Invoices\Processed
UB
: Using the newest Billing Period between the Water and Sewer block, if the AccountNumber-BillingPeriod(StartBillingPeriodDate(MMyy) + EndBillingPeriodDate(MMyy)) 
does not exist
, IC loads this record to a file that is put in the following SFTP path: \icftproot\<BillerFTPFolder>\ToInvoiceCloud\Invoices\Processed
Once these records are processed to create the invoice and adjustment file, IC picks up the files from the Biller’s SFTP Paths for pick and has StratusWebService process them using the following file types:
IF_Edmunds Invoices - TaxUB - Multi-Invoicing
IF_Edmunds Invoices - Utility
These daily files match with the Biller’s Edmund WIPP. The WIPP is like the Customer Portal for the Biller in IC. We can search for the customer’s Tax or Utility account number
Raw File to Processed File 
IC uses the raw file from the biller/Edmunds to create a ‘Processed' File that will be used to map to the IC BIF
Raw File to Split File Mapping
TAX
IC Field Name
Processed File Position
Raw file Delimiter/Position
Line Type
Length
Start (Extracted from Raw File)
End (Extracted from Raw File)
Start (To Processed)
End (To Processed)
Identifier (Invoice Type ID)
1
Fixed Length Section of file
NA - Identifier number is the same as the InvoiceTypeID. Refer to InvoiceTypeID
3
33
35
1
3
Account Number
2
Fixed Length Section of file
00
8
36
44
4
12
Customer Name
3
Fixed Length Section of file
00
35
109
144
12
47
Address1 (mailing)
4
Fixed Length Section of file
00
60
144
204
47
107
City_State
5
Fixed Length Section of file
00
25
204
229
107
132
Zip
6
Fixed Length Section of file
00
10
229
239
132
142
Address (Property)
7
Fixed Length Section of file
00
30
44
74
142
172
Tax Year
8
Fixed Length Section of file
01
4
36
40
172
176
Quarter
9
N/A- IC Generated Value - Each tax line has 4 quarters with different positions. IC extracts the values from each quarter. Every extraction done for each quarter has a different position to them. The Quarter is auto generated by either a 1, 2, 3, or 4.
NA
1
NA
NA
176
177
Block Number
10
Fixed Length Section of file
01
4
6
10
177
181
Lot Number
11
Fixed Length Section of file
01
5
14
19
181
186
Quarter Balance Due
12
Fixed Length Section of file
01
12
Q1 - 40
Q2 - 52
Q3 - 64
Q4 - 76
Q1 - 52
Q2 - 64
Q3 - 76
Q4 - 88
186
198
Quarter Adjustment Amount
13
Fixed Length Section of file
01
12
Q1 - 88
Q2 - 100
Q3 - 112
Q4 - 124
Q1 - 100
Q2 - 112
Q3 - 124
Q4 - 136
198
210
Quarter Balance Open
14
Fixed Length Section of file
01
12
Q1 - 136
Q2 - 148
Q3 - 160
Q4 - 172
Q1 - 148
Q2 - 160
Q3 - 172
Q4 - 184
210
222
Quarter Interest Amount
15
Fixed Length Section of file
01
12
Q1 - 184
Q2 - 196
Q3 - 208
Q4 - 220
Q1 - 196
Q2 - 208
Q3 - 220
Q4 - 232
222
234
Quarter Due Date
16
Fixed Length Section of file
01
8
Q1 - 232
Q2 - 240
Q3 - 248
Q4 - 256
Q1 - 240
Q2 - 248
Q3 - 256
Q4 - 264
234
242
Lien Bit
17
Fixed Length Section of file
01
1
NA - IC Generated if Block contains any LineType = 02
NA - IC Generated if Block contains any LineType = 02
242
243
Invoice Date
18
Fixed Length Section of file
00
8
384
392
243
251
IMPORTANT NOTES: 
Each raw tax line (LineType=01) has 4 Quarters and 1 Tax Year that is used to split up into 4 processed lines. Before splitting the processed record into either the Invoice or Adjustment file, Invoice Cloud determines if the record has a valid DueDate. 
A “Not Valid DueDate” means that the processed line created for that quarter in the tax line does not contain any data for that quarter.
A “Valid DueDate” means that the processed line created for that quarter in the tax line does contain data for that quarter to split into either an Invoice or Adjustment record.
IC Fields are generated the same way even if MultiInvoicing is turned ON or OFF.
Sample Tax Line from raw Edmunds TaxUB File:
072001605    00020               01202000000727100+00000727100+00000727100-00000727100-00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+00000000000+20200201202005012020080120201101NNNNNNNNN 1000010100000000000+1000010100000000000+1000010100000000000+1000010100000000000+
Sample Processed Tax Line:
00800004044GRACI, SALVATORE J. JR.            1 CLARIDGE DRIVE #100                                       VERONA, NJ               07044     1 CLARIDGE DRIVE     #100     2022301010000100000098196+00000000000+00000098196+00000000000+20220801020220615
Sample Processed Tax Line (Highlighted):
008
00004044
GRACI, SALVATORE J. JR.            
1 CLARIDGE DRIVE #100                                       
VERONA, NJ               
07044 
 
1 CLARIDGE DRIVE     #100     
2022
3
0101
00001
00000098196+
00000000000+
00000098196+
00000000000+
20220801
0
20220615
UTILITY
IC Field Name
Processed File Position
Raw file Delimiter/Position
Line Type
Length
Start (Extracted from Raw File)
End (Extracted from Raw File)
Start (To Processed) 
End (To Processed) 
Identifier (Invoice Type ID)
1
Fixed Length Section of file
NA - Refer to InvoiceTypeID
3
33
35
1
4
Utility Account Number
2
Fixed Length Section of file
04/05
8
48
56
4
12
Utility Sub Account Number 
3
Fixed Length Section of file
04/05
3
56
59
12
15
Utility Customer Name
4
Fixed Length Section of file
04
35
313
348
15
50
Utility Address1 (Property Location)
5
Fixed Length Section of file
04
60
348
408
115
175
Utility City_State
6
Fixed Length Section of file
04
25
408
433
80
105
Utility Zip
7
Fixed Length Section of file
04
10
433
443
105
115
Utility Address Mailing (Service Address)
8
Fixed Length Section of file
04
30
90
120
50
80
Utility Total Amount Due
9
Fixed Length Section of file
04
12
255
266
175
187
Utility Due Date
10
Fixed Length Section of file
04
8
204
212
187
195
Utility Billing Period
11
Fixed Length Section of file
04
16
279
295
207
223
Utility Balance Due 
12
Fixed Length Section of file
04
12
130
142
223
235
Utility Total Interest Amount
13
Fixed Length Section of file
04
12
142
154
223
234
Utility Past Due Amount
14
Fixed Length Section of file
05
12
110
122
235
247
Utility Lien Bit
15
Fixed Length Section of file
02
1
NA - IC Generated if Customer Block contains any LineType = 02
NA - IC Generated if Customer Block contains any LineType = 02
247
248
Utility InvoiceDate
16
Fixed Length Section of file
00
8
384
392
248
256
IMPORTANT NOTES:
Unlike raw tax lines, 1 Edmunds UB Record is comprised of 2 different Line Types.
A UB record is not a UB record if it does not have a complete pair of one 04 and one 05 LineType. We call this pair/UB record an Edmunds UB Block. 
1 UB Record can either be Water or Sewer. 
1 Edmunds UB Block creates only 1 UB Processed Line. 
1 UB Processed Line can be a combination of the Water and Sewer UB Block if MultiInvoicing is turned OFF. 1 UB Processed Line can be a single UB Record of Water or Sewer.
Depending on the biller’s request, if the biller wants Multi-Invoicing, we will convert a processed line into a single invoice IF AND ONLY IF the biller’s Advanced Settings contains 
MULTI(0)
 in Advanced Setting 35 - Service version. Please refer to the Biller Advanced Setting section for more information. 
812c7259-2658-42da-a2ff-8aa3649ed779
DECIDED
21d94e55-b17f-4f0b-8788-669c57d4504e
IF MUTLI-INVOICING: Process 1 UB Line as a single Invoice or Adjustment record. We skip records if they do not have a Start or End Billing Period. 
DECIDED
2aa0c942-026c-4bf7-a1bc-e33e019697a7
IF NOT MULTI-INVOICING: Process up to 2 Processed UB Lines (Water and Sewer) to make 1 Invoice combining the Water and Sewer Data together. 
Invoices- Stores Water and Sewer data into its InvoiceDetail
Adjustments-Combines AdjustmentAmount from both Water and Sewer UB lines.
IF MUTLI-INVOICING: Process 1 UB Line as a single Invoice or Adjustment record. We skip records if they do not have a Start or End Billing Period. 
IF NOT MULTI-INVOICING: Process up to 2 Processed UB Lines (Water and Sewer) to make 1 Invoice combining the Water and Sewer Data together. 
Invoices- Stores Water and Sewer data into its InvoiceDetail
Adjustments-Combines AdjustmentAmount from both Water and Sewer UB lines.
Sample UB Block from raw Edmunds TaxUB File:
191210712    00048       C206    04Sewer       10712206  0U                                                            202212160100000000000+00000000000+00000000000+00000000000+00000000000+00000142500+0520230101                               00000028500+00000000000+00000000000+2023010120230331  1 N        RESNAANDERSON, JUDITH                   206 MARINER'S POINTE                                        HOPATCONG, NJ            07843     
191210712    00048       C206    05Sewer       10712206  020221001                               00000028500+00000000000+00000000000+20220701                               00000028500+00000000000+00000000000+20220401                               00000028500+00000000000+00000000000+1000010100000000000+                                                                                                                                           
Sample Processed Utility Line: 
00110712206  0ANDERSON, JUDITH                                                 HOPATCONG, NJ            07843     206 MARINER'S POINTE                                        00000000195-2023020100000000195-202210012022123100000000000+00000000000+020221219
Sample Processed Utility Line (Highlighted):
001
10712206
 
0
ANDERSON, JUDITH
 
1 CLARIDGE DR (LOW)
 
HOPATCONG, NJ 
 
07843     
206 MARINER'S POINTE
 
00000000195-
20230201
00000000195-
2022100120221231
00000000000+
00000000000+
0
20221219
Processed File to BIF 
IC uses the processed file (details above) to map to the IC BIF. One BIF is created in this process, but the mapping for Tax and the mapped fields for Utility is different. See mapping below
Processed File to BIF Mapping
TAX
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Field Format (Processed File)
Position (Processed File)
Notes
Record Type
1
RowType
N
TRUE
N/A- Generated by IC
File Header
2
BillerGuid
N
TRUE
N/A- Generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A- Generated by IC
File Header
5
InvoiceCount
N
TRUE
N/A- Generated by IC
File Header
6
TotalInvoiceAmount
N
TRUE
N/A- Generated by IC
File Header
7
RowType
N
TRUE
N/A- Generated by IC
Using N- Only when TotalAmountDue fields are greater than 0. Ex: Position 8= $301.7 -Import record. Position 10=0- Do not import record.
Invoice Header
8
RecordType
N
TRUE
N/A- Generated by IC
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A- Generated by IC
Invoice Header
10
InvoiceNumber
N
TRUE
N/A- Generated by IC
DueDate-AccountNumber
CONCAT(ProcessedFilePosition-14, “-”, ProcessedFilePosition-2)
DueDate(yyyyMMdd)-AccountNumber
Invoice Header
11
InvoiceDate
N
TRUE
N/A- Generated by IC- Based on Quarter Number
Qtr 1- 01/1/Bill Year
Qtr 2- 04/1/Bill Year
Qtr 3-07/1/Bill Year
Qtr 4-10/1/Bill Year
Depending on the Quarter, we set the Invoice Date to be either of the following: 
4f1fb8e9-c8b9-422b-bc1c-153724bd5a7e
DECIDED
033432cc-fd57-4087-87f3-8705ecd702ee
Quarter 1: 01/01/TaxYear
DECIDED
8aa50972-a0bf-4f92-8c06-0ae3718d1e4b
Quarter 2: 04/01/TaxYear
DECIDED
efe7727a-e202-4485-883d-ba93bb326d8f
Quarter 3: 07/01/TaxYear
DECIDED
48d19b9e-c925-420e-913d-7224ab38ebfb
Quarter 4: 10/01/TaxYear
Quarter 1: 01/01/TaxYear
Quarter 2: 04/01/TaxYear
Quarter 3: 07/01/TaxYear
Quarter 4: 10/01/TaxYear
NOTE: Each Tax Line (LineType=1) in the Edmunds Raw file is split into 4 processed lines. 
The Quarter is determined depending on the extraction and split of the block. For example, refer to Sample Processed Tax Line above, 
Invoice Header
12
InvoiceDueDate
Y
TRUE
Quarter Due Date
Quater Due Date
Position 231, Length 8
This is the Quarter Due Date for that Tax Year. 
Invoice Header
13
TotalAmountDue
Y
TRUE
Quarter Balance Due
Position 183, Length 12
This is the Quarter Balance Due for that Tax Year. The extracted value contains either a minus 
 or position 
 sign at the end of the value. If it’s a minus, it’s a credit. If it’s a positive, it’s an amount due. 
Invoice Header
38
Custom1
FALSE
Block Number
Position 174, Length 4
Invoice Header
39
Custom2
FALSE
Lot Number
Position 178, Length 5
Invoice Header
40
Custom3
FALSE
Tax Year
Position 169, Length 4
Invoice Header
41
Custom4
FALSE
Quarter
Position 173, Length 1
Invoice Header
42
Custom5
FALSE
Adjustment Amount
Position 195, Length 12
This is the Quarter Adjustment Amount for that Tax Year. The extracted value contains either a minus 
 or position 
 sign at the end of the value. If it’s a minus, it’s a credit. If it’s a positive, it’s an amount due. 
Invoice Header
43
Custom6
FALSE
InterestAmount
Position 219, Length 12
This is the Quarter Interest Amount for that Tax Year. The extracted value contains either a minus 
 or position 
 sign at the end of the value. If it’s a minus, it’s a credit. If it’s a positive, it’s an amount due. 
Invoice Header
44
Custom7
FALSE
City_State
Position 104, Length 25
Trims spaces in the front and end of the string.
Invoice Header
45
Custom8
FALSE
Lien Bit
Position 239, Length 1
d3095f05-78ea-4f85-87a9-d4455dc2b931
DECIDED
c2fa2e1d-8485-4570-b036-bb6659e0a21e
IF Edmunds Record contains LineType 02, then we set Lien Bit to 1. Meaning the customer is blocked from making payments. 
DECIDED
6ba5495d-352a-4944-834d-9972c7fa73c6
ELSE Edmunds Record does 
not 
contain a LineType 02, then we set Lien Bit to 0. Meaning the customer is not blocked from making payments. 
IF Edmunds Record contains LineType 02, then we set Lien Bit to 1. Meaning the customer is blocked from making payments. 
ELSE Edmunds Record does 
not 
contain a LineType 02, then we set Lien Bit to 0. Meaning the customer is not blocked from making payments. 
The customer can be blocked or unblocked from making payments if the customer’s block contains Line Type 02 or doesn’t. For example: 
On 08/08/2022, an Edmunds file comes in with Customer1 that has no line type of 02 in it’s block. This means the Lien Bit gets set to 0. Two weeks later, another file comes in; however, this time, Customer1 has line type 02 in it’s customer block. This is an indication that the customer has a lien on his account, set the lien bit to 1, and cannot make a payment. We will then create a Customer Update File that blocks the customer from making payments. Once the customer gets this resolved on the biller’s side, Edmunds will send back another file without the line type 02. If that is the case, we set back the lien bit 0 if there is a change from 1 to 0 or 0 to 1 in the lien status (Custom7).
Invoice Header
46
Custom9
FALSE
Display Account Number
Position 1, Length 8
Strips leading zeros from Account Number 
Invoice Header
47
Custom10
FALSE
Service Address
Position 138, Length 30
Invoice Header
93
BalanceDue
Y
FALSE
Quarter Balance Due
Position 207, Length 12
This is the Quarter Balance Due for that tax year. The extracted value contains either a minus 
 or position 
 sign at the end of the value. If it’s a minus, it’s a credit. If it’s a positive, it’s an amount due. 
Invoice Header
252
InvoiceTypeID
N
TRUE
N/A- Determined by IC in BillerFileSplit Edmunds file.
InvoiceTypeID is determined by the 
Identifier 
of the Processed File. The Identifier is a 3 digit number that represents IC InvoiceTypeID standards. Reference the 
https://invoicecloud.atlassian.net/wiki/spaces/IM/pages/2213380097/Edmunds+Tax+and+Utility+Technical+Design#Raw-File-to-Processed-File
  for Processed file mapping layout. 
Example: 
008 = Real Estate
003 = Sewer
001 = Water
042 = Utility
Invoice Header
345
BillerInstallmentNumber
N
FALSE
N/A-Generated by IC
Oldest outstanding bill must be paid first. – Possibly use combination of year and quarter number. Need to load data and test to verify this will work.
Invoice Header
58
RowType
N
TRUE
N/A- Generated by IC
Customer Record
59
AccountNumber
Y
TRUE
Tax Account Number
Numeric
Position 1, Length 8
Remove leading zeros.
Customer Record
60
CustomerName
Y
TRUE
Customer Name
Position 9, Length 35
Customer Record
61
Address1
Y
FALSE
Address1
AlphaNumeric
Position 44, Length 60
Customer Record
62
Address2
Y
FALSE
Customer Record
63
City
Y
FALSE
City_State
Position 104, Length 25
City and State are pulled from the same extracted position. City and State are split into their respective fields. 
Customer Record
64
State
Y
FALSE
City_State
Position 104, Length 25
City and State are pulled from the same extracted position. City and State are split into their respective fields. 
Customer Record
65
Zip
Y
FALSE
Zip
Position 128, Length 10
Customer Record
70
RowType
N
TRUE
N/A- Generated by IC
Invoice Detail
UTILITY
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Field Format (Processed File)
Position (Processed File)
Notes
Record Type
1
RowType
N
TRUE
N/A-IC to Generate
 
 
File Header
2
BillerGuid
N
TRUE
N/A-IC to Generate
 
 
File Header
3
ThirdPartyFileReference
N
FALSE
N/A-IC to Generate
 
 
File Header
4
FileCreationDate
N
TRUE
N/A-IC to Generate
 
 
File Header
5
InvoiceCount
N
TRUE
N/A-IC to Generate
 
 
File Header
6
TotalInvoiceAmount
N
TRUE
N/A-IC to Generate
 
 
File Header
7
RowType
N
TRUE
N/A-IC to Generate- Always IH
 
 
Invoice Header
8
RecordType
N
TRUE
N/A-IC to Generate- Always N
 
 
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A-IC to Generate
 
 
Invoice Header
10
InvoiceNumber
N
TRUE
N/A-IC to Generate
AccountNumber-BillingPeriod
or 
UBPrefix-AccountNumber-BillingPeriod
Position 4, Length 8
5b0428e2-b9ba-492d-bfe2-10eb92713e33
DECIDED
cf947d13-5ebc-435c-97ba-3d0853851fe3
IF ServiceVersion = MULTI(1), then the InvoiceNumber is formatted as either
InvoiceTypeID = 1
WTR-AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
InvoiceTypeID = 3
SW-AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
DECIDED
fcc99119-682f-43fd-8862-7b32b1b6dc06
ELSE IF Service Version contains MULTI(0), is not set, then the InvoiceNumber is formatted as 
AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
IF ServiceVersion = MULTI(1), then the InvoiceNumber is formatted as either
InvoiceTypeID = 1
WTR-AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
InvoiceTypeID = 3
SW-AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
ELSE IF Service Version contains MULTI(0), is not set, then the InvoiceNumber is formatted as 
AccountNumber-BillingPeriod(StartDate and EndDate MMyyMMyy)
InvoiceNumber examples:
1001024-1-10161216
2033003-1-10181218
3049076-0-10211221
3049081-3-10181218
Invoice Header
11
InvoiceDate
N
TRUE
Invoice Date
Date
Position 235, Length 8
 Invoice Date
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due Date
Date
Position 187, Length 8
Due Date of Current Due Amount
Invoice Header
13
TotalAmountDue
Y
TRUE
Total Due
Numeric/2 Decimal
Position 175, 12
Total Amount Due
Invoice Header
38
Custom1
Y
FALSE
Account ID (Without Leading Zeroes)
Numeric
Account ID w/o Leading Zeroes
Invoice Header
39
Custom2
Y
FALSE
Service Location
Alpha Numeric
Service Location
Invoice Header
40
Custom3
N
FALSE
Lien Bit
Numeric
Lien On Customer
Invoice Header
41
Custom4
N
FALSE
Sub Account  ID(Keep Leading Zeroes)
Numeric
Sub Account ID 
Invoice Header
42
Custom5
N
FALSE
Account ID(Keep Leading Zeroes)
Numeric
Account ID w/Leading Zeroes
Invoice Header
43
Custom6
 N
FALSE
City State
Alpha Numeric
 City and State 
Invoice Header
44
Custom7
Y
FALSE
Interest Water 1
Numeric
Invoice Header
45
Custom8
Y
FALSE
Interest Water 2
Numeric
Invoice Header
46
Custom9
Y
FALSE
Interest Water 3
Numeric
Invoice Header
47
Custom10
Y
FALSE
Interest Sewer 1
Numeric
Invoice Header
94
Custom11
Y
FALSE
Interest Sewer 2
Numeric
Invoice Header
95
Custom12
Y
FALSE
Interest Sewer 3
Numeric
Invoice Header
93
BalanceDue
Y
FALSE
Current Due + Total Interest Amount
Numeric with 2 Decimals
Position 195, Length 12
Charges that are due on or after the date that the file was generated. 
Invoice Header
252
InvoiceTypeID
Y
TRUE
Identifier 
 Water (1), Sewer (3), or Utility (42)
Position 1, Length 3
InvoiceTypeID is determined by the 
Identifier 
of the Processed File. The Identifier is a 3 digit number that represents IC InvoiceTypeID standards. Reference the 
https://invoicecloud.atlassian.net/wiki/spaces/IM/pages/2213380097/Edmunds+Tax+and+Utility+Technical+Design#Raw-File-to-Processed-File
  for Processed file mapping layout. 
Example: 
001 = Water
003 = Sewer
042 = Utility
NOTE: Invoice Type 42 is only used IF and ONLY IF the biller is using Multi Invoicing.
Invoice Header
342
InvoiceGroupGUID
N
FALSE
N/A- IC To Generate-Account ID-Sub-DueDate
Generated System.Guid.NewGuid()
NA
This IC Field is only set IF AND ONLY IF Advanced Setting 35 - Service Version contains “MULTI(1)”. If so, this biller is using Multi-Invoicing and requires InvoiceGroupGuid to be set. 
MULTI-INVOICING: Before setting the InvoiceGroupGuid, we check if the current Account Number is different than the LastAccountNumber. If the previous and current Account Number are not the same, we want to create a new guid and set it to the InvoiceGroupGuid for the new invoices for that customer block. In code, we then update the CurrentInvoiceGroupGuid so that we can have the same InvoiceGroupGuid for the next invoice that comes in with the same account number. NOTE: Edmunds sends raw files with sorted customer account numbers by ASCENDING ORDER already.
58
RowType
N
TRUE
N/A- IC To Generate- Always CR
 
NA
 
Customer Record
59
AccountNumber
Y
TRUE
Account ID-Sub Acct Number (Strip Leading Zeroes)
Numeric
Position 4, Length 11
CONCAT(Account ID, -, Sub Acct Number (Strip Leading Zeroes))
Account Number examples: 
2033003-1
2018034-1
3049094-0
3049086-0
Customer Record
60
CustomerName
Y
TRUE
Bill To Name
Alphanumeric
Position 15, Length 35
Customer Name (Trim spaces)
Customer Record
61
Address1
Y
FALSE
Property Location
Alphanumeric
Position 50, Length 30
Property Address (Trim spaces)
Customer Record
63
City
Y
FALSE
 City_State
 Alphanumeric
Position 80, Length 25
 City and State are pulled from the same extracted position. City and State are split into their respective fields. 
Customer Record
64
State
 Y
FALSE
 City_State
 Alphanumeric
Position 80, Length 25
City and State are pulled from the same extracted position. City and State are split into their respective fields. 
Customer Record
65
Zip
 Y
FALSE
 Zip
 Alphanumeric
Position 105, Length 10
 Zip (Trim spaces)
Customer Record
70
RowType
N
TRUE
N/A- IC To Generate- Always IH
 
NA
 Hardcoded “IH”
Invoice Detail
83
Customfield1
Y
FALSE
UB Record Type 
Alphanumeric
NA
b7532258-a9f9-418a-9045-81f3c8e6d1b1
DECIDED
52466454-2057-4cda-9786-6d8662cb7159
IF the first 3 digits is 1, then Customfield1 = “Water”
DECIDED
5679199f-0ee0-4748-b621-b1f0d62b1aa4
ELSE then Customfield1 = “Sewer”
IF the first 3 digits is 1, then Customfield1 = “Water”
ELSE then Customfield1 = “Sewer”
IF Multi-Invoicing, then this value is set to “Utility”
84
Customfield2
Y
FALSE
Past Due
Numeric with 2 Decimal places
85
Customfield3
Y
FALSE
Balance Due
Numeric with 2 Decimal places
373
DisplayAccountNumber
Y
TRUE
Account ID-Sub Account ID (No Dash)
Numeric
Position 4, Length 11
CONCAT(Account ID & Sub account ID (No Dash))
Customer Record
Adjustment/Daily Balance File
File Summary/Purpose: The purpose of this file is transfer bill/invoice updated balance data to IC from the biller
File Extension: txt
File Naming Convention: 
File Delimiter: 
Specification: 
Sample File: 
SFTP File Path: 
File Transfer Frequency: Daily
Notes: Adjustments will need to be split out of the invoice file using the file from biller file split.
Field Mapping
IC FileSpecID
IC Field Name
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Position
Record Type
Notes
305
RowType
N
TRUE
N/A-Generated by IC
File Header
306
BillerGuid
N
TRUE
N/A-Generated by IC
File Header
308
FileCreationDate
N
TRUE
N/A-Generated by IC
File Header
309
AdjustmentCount
N
TRUE
N/A-Generated by IC
File Header
310
TotalAdjustmentAmount
N
TRUE
N/A-Generated by IC
File Header
311
RowType
N
TRUE
N/A-Generated by IC
Adjustment Record
313
AccountNumber
Y
TRUE
Tax Account Number
Numeric
1
Adjustment Record
314
AdjustmentAmount
Y
TRUE
QTR1BalanceOpen	QTR2BalanceOpen	QTR3BalanceOpen	QTR4BalanceOpen
Utility- BalanceOpen+Water interest 1+Water interest 2+Water interest 3+Sewer interest 1+Sewer interest 2+Sewer interest 3
16-19
Adjustment Record
Water Interest 1: Position 122, Length 12
Sewer Interest 1: Position 122, Length 12
Water Interest 2: Position 197, Length 12
Sewer Interest 2: Position 197, Length 12
Water Interest 3: Position 272, Length 12
Sewer Interest 3: Position 272, Length 12
316
AdjustmentTypeID
TRUE
N/A-Generated by IC-Always 2
Adjustment Record
353
BillerInvoiceNumber
FALSE
N/A- Generated by IC-Account Number-Tax Year-
Quarter Number
Adjustment Record
370
InvoiceTypeID
FALSE
N/A-Generated by IC-7 
Adjustment Record
InvoiceTypeID is determined by the 
Identifier 
of the Processed File. The Identifier is a 3 digit number that represents IC InvoiceTypeID standards. Reference the 
https://invoicecloud.atlassian.net/wiki/spaces/IM/pages/2213380097/Edmunds+Tax+and+Utility+Technical+Design#Raw-File-to-Processed-File
  for Processed file mapping layout. 
Example: 
008 = Real Estate
003 = Sewer
001 = Water
042 = Utility
Payment/Lockbox File
File Summary/Purpose: The purpose of this file is transfer payment data from IC to the biller
File Extension: 
File Naming Convention: 
File Delimiter: 
Specification: 
Sample File: 
SFTP File Path:
File Transfer Frequency: Daily
Notes: Can be combined for Tax and Utility
Field Mapping
Field Name
Position
To
Length
 Partner Field Format
Comment
Row Type
Record Id
1
1
1
“1”
Hardcoded “1”
Header
Payment Date
2
9
8
 Year
yyyy
Header
Payment Type
10
10
1
ALPHANUMERIC
Depending on the InvoiceType, we set Payment Type to the following:
Select Case InvoiceType
    Case 1
        Set PaymentType to "W" 'Water
    Case 2
        Set PaymentType to "E" 'Electric
    Case 3
        Set PaymentType to "S" 'Sewer
    Case 7
        Set PaymentType to "P" 'Personal Property
    Case 8
        Set PaymentType to "T" 'Tax (Real Estate)
    Case 42
        Set PaymentType to "U" 'Utility
    Case Else
        Set PaymentType to "O" 'Other 
End Select
Header
FILLER
11
75
65
 
SPACES
Header
Record ID
1
1
1
“6” for payments
“5” for refunds
“4” for returns
Hardcoded value if payment is a ACH Reject(4), Refund(5), or Payment(6). 
Detail
Account ID
NUMERIC
2
11
AccountNumber that is Right Justified/Zero Filled
00041249-94
Detail
Amount
13
23
11
2 Decimal
Implied Decimal/Unsigned
9(9)V99
Right Justified/ Zero Filled
Detail
Check No.
24
35
12
 
Left Justified/Space Filled
Detail
Original Payment Date for Returns/Refunds
36
43
8
 
Field added 3/16/07
YYYYMMDD
Detail
Payment Method
44
45
2
CK=Check
CR=Credit Card
Field added 8/09/07
 
Detail
Payment Type
46
46
1
Blank=Not a Combined File
T=Tax
P=Property (Not-NJ)
U=Utility (any Service Type specified by Payment Code)
W=Water
S=Sewer
E=Electric
O=Other
Field added 8/27/2008. Applies to Combined Files Only.
Detail
FILLER
47
75
29
 
SPACES
Detail
Record Id
1
1
1
“9”
Constant
Trailer
Record Count
2
6
5
NUMERIC
Right Justified/ Zero Filled
Trailer
Total Amount
7
18
12
2 Decimal
Implied Decimal/Unsigned
9(10)V99
Right Justified/ Zero Filled
Net Amount of: Payments minus (Returns and Refunds)
Trailer
Filler
19
75
57
 
SPACES
Trailer
Change Log File
File Summary/Purpose: The purpose of this file is transfer change log data from IC to the biller
File Extension: 
File Naming Convention: 
File Delimiter: 
Specification: 
Sample File:
SFTP File Path:
File Transfer Frequency:  Once a week.  They will manually enter the changes into the Edmunds system.  The biller may ask for it daily.  Whatever their preference is.
Field Mapping
Field
Data Type
Character Limits
Format
Values
Account Number
Varchar 
30 
Account Number from IC database
AP Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in AutoPay
AP Un-Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed un - enrollment in AutoPay
Email
Varchar
100
Customer email address
Email Address change date
Datetime
MMDDYYYYHHMMSS
Date email address was change on IC
Phone Number
Varchar 
15
Phone number of the customer
Phone Number change date
Datetime
MMDDYYYYHHMMSS
Date phone number was changed on IC
Paperless Enrollment
Datetime
MMDDYYYYHHMMSS
Date customer completed enrollment in paperless
Paperless Un-enrollment
Datetime
MMDDYYYYHHMMSS
Date customer un-enrolled in paperless
Advanced Settings
Setting ID
Description
Value
Is value unique per biller? (Y/N)
35
Service Version
MultiInvoicing|ProcessUBData|ProcessTaxData|BlockPayments
MULTI(0)|UB(1)|TAX(1)|BLOCK(0)
We pull and split the value of the Service Version. 
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, on biller questionnaire 
AllowPartialPayments
biller questionnaire 
AutoPayCollectionDate
biller questionnaire 
BalanceForward
Yes
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
biller questionnaire 
InvoiceDate
in BIF
InvoiceDueDate
in BIF
InvoiceFormatGuid
N/A
InvoiceTypeID
in BIF
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
N/A
PaymentExpirationDate
N/A
PaymentExpirationMessage
N/A
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
biller questionnaire 
ThirdNotifyRequestedDate
biller questionnaire 
User Interaction and Design
Data Flow - Invoice
Data Flow - Adjustments
Data Flow - Payment
Data Flow - Void
Data Flow - ACH Reject
Data Flow - Change Log
Data Flow - Bill Presentment
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
User Stories
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case / Solution
 URL:/spaces/IM/pages/2567012353/Edmunds+Technical+Design+draft
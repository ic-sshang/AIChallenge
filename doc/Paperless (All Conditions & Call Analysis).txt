System Availability - 
Biller related service
Need:
 Check is the Customer System is operational
Code line: 
CustomerGroupPaperInvoices.aspx.vb (OnInit)
                        Line 70 – 73
Trigger condition: 
If the Biller has put customer portal under maintenance i.e., CustomerSystemAvailable is False
Trigger result:
 Redirection to Maintenance.aspx
Underlying SP:
 selBillerMaintenanceWindows
Required Param:
 BillerID
 
Load Customer & Invoice Data – 
Customer/Invoices related service
Need: 
Load the Customer & Invoice Data
Code Line: 
CustomerGroupPaperInvoices.aspx.vb (OnInit)
                        
Line: 80 – 93
Trigger condition: 
Load Account Numbers of the customer for the current login & load the invoice types associate with them
Trigger result: 
Should load information regarding the customers and the invoice types associated
Underlying SPs:
 selCustomers, selInvoices
Required Params: 
BillerID & CustomerID
 
Render the Paperless Control Page – 
Customer/ Invoices related service
Need: 
Load the paperless control mechanism (page)
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (OnInit)
                        
Line: 101 – 123
Trigger condition: 
Customer exists and (is registered or biller allowed non-registered customers to see the paperless option/
Option 52
 
in CRM 
required by the biller)
Trigger result: 
Should load information regarding the customers and the invoice types associated
Underlying SPs:
 selCustomers, selInvoices
Required Params: 
BillerID & CustomerID
Visibility level for Paperless Page - 
Customer related service
Need: 
If customer email not present do not load the paperless UI
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (ManagePaperlessElementVisibility)
                        
Line: 187 – 203
Trigger condition: 
SetupPaperless condition is true/false
Trigger result: 
Check for the permission for paperless and then show the UI is the condition passes
Underlying SPs:
 mcl.selCustomerLoginPermissions
Required Params: 
BillerID, CustomerID, PermissionID
 
Valid Customer Check – 
Need to check
Need: 
Show paperless UI for a valid customer
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (ManagePaperlessElementVisibility)
                        
Line: 188 – 198
Trigger condition: 
Customer exists & not registered & Option 52 is false
Trigger result: 
Paperless control not visible
Underlying SPs:
 No SPs
Required Params: 
No params
 
Biller is Multi-Customer - 
Biller related service
Need:
 MCL Information text visibility in the UI
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (ManagePaperlessElementVisibility)
                        
Line: 195 – 197
Trigger condition: 
Customer exists, and isMultiCustomerLogin Option is enabled for the Biller
Trigger result: 
MCL text is shown in the UI
Underlying SPs:
 selBillerOptionValue
Required Params: 
BillerID, OptionID
 
Email Requirements - 
Customer related service
Need: 
If customer email not present do not load the paperless UI
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (Page_Load)
                        
Line: 133 – 138
Trigger condition: 
No customer email present in the SP call result
Trigger result: 
Paperless mechanism UI not visible instead Email Address requirement ask
Underlying SPs:
 selCustomers
Required Params: 
BillerID & CustomerID
 
Guest Login Scenario - 
Customer related service
Need: 
If the user is determined to be a guest then
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb (Page_Load)
                        
Line: 142 – 146
Trigger condition: 
The Customer Login type is Guest Login
Trigger result: 
Paperless mechanism UI not visible instead Permission message shown 
Underlying SPs:
 mcl.selCustomerLoginPermissions
Required Params: 
BillerID, CustomerID, PermissionID
 
Paperless Mechanism – No paperless option (Grid) – 
Customer related service
Need: 
No paperless option of the for the customer & blank for not available
Code Line:
 
ctrlCustomerPaperlessSelectionsRev1.ascx.vb (BindRepeater)
                        
Line: 128 – 198
Trigger condition: 
Paperless is not available to the customer
Trigger result:
 Paperless status of 4 
Underlying SPs:
 selCustomers
Required Params: 
BillerID & CustomerID
 
10 Paperless Mechanism – Multi invoice customer - 
PayerPaperlessService
Need: 
Show all invoice types as just 1 item due to nature of multi invoice
Code Line:
 
ctrlCustomerPaperlessSelectionsRev1.ascx.vb (BindRepeater)
                        
Line: 145  – 164
Trigger condition: 
If the IsMultiInoiceBiller is true
Trigger result: 
Execute Update Paperless (
UpdateDataWithPaperlessStatus
 
Line: 203
)
Underlying SPs:
 selCustomerPaperless, selPendingPaperlessRegistrations, selBillerInvoiceTypeSettings
Required Params: 
BillerID, CustomerID & InvoiceTypeID, InvoiceTypeID_CSV
 
11 Paperless Mechanism – Update Scenarios
Status Values: - 
PayerPaperlessService
 1 = Paperless (currently on paperless)
 2 = Not Paperless (not on paperless)
 3 = Pending Paperless (waiting for email confirmation)
 4 = No Paperless Options (not available)
 5 = Forced Paperless (on paperless and cannot opt out)
 
Need: 
Render different scenarios for different cases
Code Line:
 
ctrlCustomerPaperlessSelectionsRev1.ascx.vb (Repeater1_ItemDataBound)
                        
Line: 360  – 407
Trigger condition: 
Scenarios described in 
UpdateDataWithPaperlessStatus Line: 203
Trigger result: 
Execute Update Paperless (
UpdateDataWithPaperlessStatus
 
Line: 203
)
Underlying SPs:
 selCustomerPaperless, selPendingPaperlessRegistrations, selBillerInvoiceTypeSettings
Required Params: 
BillerID, CustomerID & InvoiceTypeID, InvoiceTypeID_CSV
 
 
Save Changes in Paperless (Success/Failure) - 
PayerPaperlessService
Need: 
Render paperless mechanism UI based on Save changes success or failure
Code Line:
 
ctrlCustomerPaperlessSelectionsRev1.ascx.vb (SaveChanges, SaveChangesForInvoiceType)
                        
Line: 416  – 653
Trigger condition: 
Scenarios described in SaveChanges, 
SaveChangesForInvoiceType
Trigger result: 
Change in the paperless UI based on the success/failure
Underlying SPs:
 selCustomerPaperless, updCustomerPaperless, insCustomerPaperless
Required Params: 
BillerID, CustomerID & InvoiceTypeID, InvoiceTypeID_CSV, CustomerPaperlessID, Paperless
 
Overall paperless page success/failure message – 
UI Will handle
Need: 
Render overall paperless page UI based on Save changes success or failure
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb  (ShowErrorMessage, ShowSuccessMessage)
                        
Line: 210  – 221
Trigger condition: 
Scenarios described in SaveChanges, 
SaveChangesForInvoiceType
Trigger result: 
Change in the paperless UI based on the success/failure
Underlying SPs:
 No direct SP call
Required Params: 
No params
 
Paperless Custom Branding -  
PayerBrandingService
Need: 
Render custom Paperless heading if biller has it
Code Line:
 
CustomerGroupPaperInvoices.aspx.vb  (ShowErrorMessage, ShowSuccessMessage)
                        
Line: 297  – 299
Trigger condition: 
If the biller has custom text available for the Paperless page
Trigger result: 
Override the default text given by IC and render the biller’s custom text
Underlying SPs:
 selUIPageText_Biller
Required Params: 
BillerID
 URL:/spaces/PE/pages/4558159908/Paperless+All+Conditions+Call+Analysis
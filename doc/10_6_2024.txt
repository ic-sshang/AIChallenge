 Note: all times in Eastern Time
Scheduled Changes
Pre work
Saturday Evening at 8 PM run the Reschedule Jobs Stage of the 
Preparation Pipeline
, the Stage Name is 
Pre-Maintenance
 
 
 
 
Saturday Evening at 9:30 PM pull web servers IC-Web1 - 5 out of pool and kick off updates 
 
 
Sunday morning 4:30 AM Move MCC servers into the September WSUS group and kick off updates 
 
 
Sunday Morning at 4:45 AM run the second stage of the Preparation Pipeline, the Stage Name is 
Starting Maintenance
 
 
 
 
Day of:
Notify dailyops and maintenance slack channels of maintenance starting 
 
 
Put pingdom in maintenance mode (only if putting up the maintenance page) 
 
 
Enable the maintenance page on 
www
 and 
my
 by replacing 
pal.invoicecloud.com
 with 
 
icmaintenance.azurewebsites.net
 in Cloudflare under DNS
 
Primary Work
PLAT-848
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 & 
PLAT-523
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
 
 
Apply changes for Kong branches in this order, executed on all Stacks in Prod
update/plat-848/x-real-ip-header
 
Run this Pipeline Instance in PRD
 
 
Change TF Workspace to use 
helm
 instead of 
app
 in the name for PRD 
 
update/plat-848/split-helm-from-kong-config
 
Run this Pipeline Instance in PRD
 
 
Add Secret 
mailgun-smtp-password
 to KeyVault 
kv-glb-vault1
 using value from BitWarden 
Mailgun login
 
 
kong-smtp
 
Run this Pipeline Instance in PRD
 
 
PLAT-1027
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
Run Azure CLI Command
 
 
PLAT-1028
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
Run Azure CLI Command
 
 
PLAT-952
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
Run Azure CLI Command
 
 
Palo Production IP Whitelist
 
 
Route invoicecloud.com to go thru Cloudflare
 
 
Patch IC-Web and MCC servers 
 
 
 
Patching Procedure
 
PLAT-1065
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Install 64-bit Excel drivers on App servers 
 
 
Disable SFP windows scheduled task
https://invoicecloud.atlassian.net/jira/servicedesk/projects/INFRA/queues/custom/110/INFRA-527
 
Integrations Team needs to deploy their app change after the 64bit Excel Driver is installed on all Prod App Servers 
 
 
Run script on App servers to disable cipher
 
 
 
 
https://invoicecloud.atlassian.net/jira/servicedesk/projects/INFRA/queues/custom/110/INFRA-505
PLAT-1082
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Add Scott, Rama, and Mohammad as readers in NonProd and Prod Palo Firewalls 
 
 
https://invoicecloud.atlassian.net/jira/servicedesk/projects/INFRA/queues/custom/110/INFRA-488
 
Delete old classic resources 
 
 
PLAT-1096
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Remove obsolete servers that have been turned off for at least 30 days 
 
 
PLAT-1097
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
Run script and remove ciphers on web servers in maintenance
 
 
 
INFRA-453
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
PLAT-1086
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 & 
PLAT-1092
2278e126-27dc-36c8-aef9-a32d91bc7ad7
System Jira
 
 
 
Run the PRD stages of this Pipeline
 
 
Test Plan
Run the Smoke Tests on 
www.invoicecloud.com
 
 
 
Run full regression tests on 
www.invoicecloud.com
 
Post-Steps
Remove maintenance page and purge the cache on Cloudflare 
 
Start the Jobs - 
Refer to Post-maintenance steps related to Jobs here
 
 
Notify dailyops and maintenance channels of maintenance finished and results 
 
 URL:/spaces/icinfradoc/pages/3543040022/10+6+2024
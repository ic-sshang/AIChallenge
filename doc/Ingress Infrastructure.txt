2
4
Ingress Design
1
0
2581299203
2672951319
1
network-ingress-architecture-mvp1-single-lane-single-waf.v4.drawio
0
1
1
https://invoicecloud.atlassian.net/wiki
network-ingress-architecture-mvp1-single-lane-single-waf.v4.drawio
0
OdfxCIr4g2WYhS_aBDC4 1
1980
auto
top
1
2215
Top level FQDN per Environment
Environment
Instance
Prod
0
UI:   
payer.invoicecloud.com
API: 
api.invoicecloud.com
/{service_abbreviation}/
DevTest
0
UI:   
payer.dev.invoicecloud.com
/0/
API: 
api.dev.invoicecloud.com
/{service_abbreviation}0/
1
UI:   
payer.dev.invoicecloud.com
/1/
API: 
api.dev.invoicecloud.com
/{service_abbreviation}1/
Sandbox
0
UI:   
payer.sbx.invoicecloud.com
/0/
API: 
api.sbx.invoicecloud.com
/{service_abbreviation}0/
Digital Certificates
GoDaddy Certificates exported and stored in the Environment Wide KeyVault per environment:
kv-glb-vault1-sbx
kv-glb-vault1-dev
kv-glb-vault1
Certificates needed:
*.invoicecloud.com
*.pri.invoicecloud.com
*.sec.invoicecloud.com
*.dev.invoicecloud.com
*.sbx.invoicecloud.com
NGINX or Kong for Ingress Controller and Ingress?
NGINX Ingress Controller due to better deployment model for Private AKS Clusters via Helm chart versus the Kong deployment model that does not natively support the configuration of a Private AKS Cluster via the Helm chart deployment.
References
https://blog.baeke.info/2020/12/07/certificates-with-azure-key-vault-and-nginx-ingress-controller/
 
https://learn.microsoft.com/en-us/azure/key-vault/certificates/tutorial-import-certificate?tabs=azure-portal
 
 URL:/spaces/icinfradoc/pages/2581299203/Ingress+Infrastructure
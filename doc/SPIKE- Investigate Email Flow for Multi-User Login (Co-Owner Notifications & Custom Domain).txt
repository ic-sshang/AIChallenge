Current multi-user login
 
Email Feature:
 
For Multi-User Login invite we are using 
ICUserInviteQueueProcessor 
Azure Function
.
 
This Azure Function listens to a queue of user invitation requests, looks up biller + invoicing + invitee details, generates a secure invitation URL, and emails the invite to the customer. If something fails, it alerts IT with the failure details. 
It is triggered whenever a message is placed in the 
userinvitequeue
. 
The message format is expected to be: 
{BillerID}|{LoginInviteID}|{OptionalDomain} 
Biller Info:
 retrieves biller details from clsBillers.GetBillerData. 
Gets VirtualApplicationDesc for URL building. 
Invoicing Info:
 retrieves email settings (like BillerNoReplyEmailAddress) from clsBillers.GetInvoicingData. 
Invite Info:
 retrieves invitation details from clsCustomerInvites.GetInviteData. 
If the invite already has a 
LoginID
, it also fetches login details from clsLogins.selCustomerLogin. 
If no existing LoginID: 
Message: 
“You have been invited by {BillerDBA} to view and access select account(s)...”
 
If LoginID exists: 
Message: 
“You have been invited to view and access the account(s) for {username/email}...”
 
Uses clsUtilities.EMAIL to send the invitation: 
From: biller’s 
NoReply email
 
To: invitee’s email (InviteRow["EmailAddress"]) 
Subject: {BillerDBA} Login Invitation 
Body: constructed invitation message with secure link. 
 
Conclusion:
 Currently this function doesn’t have logic to pull custom domain details like Alias name, Display name, Domain Name etc.. 
Implementation Plan:
 We have to add Logic to check if Custom Email Domain is Enabled then pull the required details like Alias name, Display name, Domain Name etc. and prepare the proper From/Sender email address and send email using latest ICFramework.Utilities.Email library. 
 
Co-owner Notification
 
As per the code investigation, the co-owner invitation/notifications attached below are already in place and we are fetching them using IC.Logins package of LoginNotify method. 
 
Email Queue Type Id
 
Email Queue Type Desc
 
61 
AutoPay Off Confirmation 
75 
AutoPay Registration Completed Notification 
21 
AutoPay Registration Notification 
33 
AutoPay Reminder Notification 
3 
Declined Auto Pay Transaction 
4 
Declined Scheduled Payment Notification 
42 
FlexPay Confirmation Notification 
23 
Paperless Registration Notification 
47 
Paperless Off Confirmation 
67 
Recurring Scheduled Payment Confirmation 
69 
Recurring Scheduled Payment Cancelled 
32 
Scheduled Payment Confirmation 
44 
Scheduled Payment Reminder 
 
 
 URL:/spaces/PE/pages/4597022721/SPIKE-+Investigate+Email+Flow+for+Multi-User+Login+Co-Owner+Notifications+Custom+Domain
Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira ticket 
ITR
Document status
Completed
Green
Document owner
 
Solution engineer
Stephanie Ivie, Gregory Adler
Salesforce SOW
Knowledge Transfer
The original implementation was going to use STW/OpenGov APIs but during implementation it had to be switched to use Harlingen specific APIs
API Documentation 
Harlingen does not have an environment for testing. Use account 0820011445004 but update paperless / email back to original when done + we need to communicate to Harlingen before posting any payments.
Allowed list required
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR
GetAccountInfo
Returns Account info (including balance, blocked, and disconnected)
GET 
https://pay.hwws.com/payment/default.aspx?funct=GetAccountInfo&acctNum=
ACCOUNTNUMBER
Account Number should be sent without hyphens.
String with pipe delimited values:
AcctNum|Value|2|TotalDue|Value|PastDueAmt|Value|CurrentDueDate|DD/YY/ZZZZ|FinalDay|DD/YY/ZZZZ|LastPayAmt|Value|LastPayDate|DD/YY/ZZZZ|ServiceAddress|Value|DisconnectFee|Value|OnCutoffList|(Y or N)|DisablePayment|(Y OR N)
We want to update balance due with TotalDue, PastDue with PastDueAmt
If 
OnCutoffList 
= Y, the disconnect fee is already added to Total Due from API. Re
place
 message in Custom1
“Your account is scheduled for disconnection and a fee of <DisconnectFeeValue> has been added to your balance”
If 
OnCutoffList 
= 'P' that means they have paid, remove the custom message
If 
DisablePayment
= Y Block ACH and Credit Card
if 
DisablePayment 
= N unblock or leave unblocked
Data Pump: Payments
PostPayment
Posts Payment to an Account
GET  
https://pay.hwws.com/payment/default.aspx?funct=
PostPayment&acctNum=ACCOUNTNUMBER&x_auth_code=AuthorizationCode&x_amount=AMOUNT
Code: 200
Response:  Something along the lines of payment has been made for ‘Account Number’
 
Amount 
should not include service fee
Account Number
 should be sent without hyphens.
AuthCode 
should be AuthCode received from Chase + ‘A' if Autopay + ‘B’ OR ‘M' OR ‘D’ OR ‘V’ OR 'X' (for payment type)
(Bank (ACH), MasterCard, Discovery, Visa, American Express). 
If card type is not possible just ‘CC’
 
Data Pump: Paperless
UpdateEbillOptions
Updates paperless status
GET 
https://pay.hwws.com/payment/default.aspx?funct=UpdateEbillOptions&acctNum=
ACCOUNTNUMBER&eBillOption=EBILLValue
Account Number should be sent without hyphens.
Code: 200
Response: EBill option of “value” changed for account “AccountNumber”
EBillValue 
of E for paperless and 
P for print
Data Pump: Autopay
Not Needed
Data Pump: Email
UpdateEmail
Updates email on account
GET 
https://pay.hwws.com/payment/default.aspx?funct=UpdateEmail
&acctNum=ACCOUNTNUMBER&email=EMAILVALUE
Account Number should be sent without hyphens.
Code: 200
Response: Email of “value” changed for account “AccountNumber”
Update with new value
File Mapping
Invoice File
File Extension: dat
File Naming Convention: 
File Delimiter: 
Specification: 
Sample File: 
File Transfer Frequency:
IC FileSpecID
IC Field
In File (Y/N)
Required (T/F)
Partner Field Name
Partner Field Format
Partner Field Description
Partner Field Character Limit
Record Type
1
RowType
N
TRUE
N/A-Generated by IC - Always N
File Header
2
BillerGuid
N
TRUE
N/A- Generated by IC
File Header
4
FileCreationDate
N
TRUE
N/A- Generated by IC
File Header
5
InvoiceCount
N
TRUE
N/A- Generated by IC
File Header
6
TotalInvoiceAmount
N
TRUE
N/A- Generated by IC
File Header
7
RowType
N
TRUE
N/A- Generated by IC
Invoice Header
8
RecordType
N
TRUE
N/A- Generated by IC
Invoice Header
9
InvoiceFormatGuid
N
TRUE
N/A- Generated by IC
Invoice Header
10
InvoiceNumber
N
TRUE
N/A- Generated by IC- Use Account Number + Invoice Date
Invoice Header
11
InvoiceDate
Y
TRUE
date of bill yyyymmdd
yyyymmdd
Position 145-152
8
Invoice Header
12
InvoiceDueDate
Y
TRUE
Due Date yyyymmdd
yyyymmdd
Position 153-160
8
Invoice Header
13
TotalAmountDue
Y
TRUE
t-total current w contribs
Last two digits are decimal
Detail Record Position 622-634
13
Invoice Header
38
Custom1
Y
FALSE
Please set the following message to Custom 1:
“Current Period: ‘current-period-consumption’ Gallons
Numeric (left padded with 0s)
Detail Record Position 726-734 
9
Invoice Header
39
Custom2
Y
FALSE
t-prev-read-1
Numeric, Last two digits are decimal
Detail Record Position 701-709
Invoice Header
40
Custom3
Y
FALSE
t-curr-read-1
Numeric, Last two digits are decimal
Detail Record Position 710-718
Invoice Header
41
Custom4
Y
FALSE
cur-charge-1
Numeric, Last two digits are decimal
Detail Record Position 494-504
Invoice Header
42
Custom5
Y
FALSE
cur-charge-2
Numeric, Last two digits are decimal
Detail Record Position 505-515
Invoice Header
43
Custom6
Y
FALSE
cur-charge-3
Numeric, Last two digits are decimal
Detail Record Position 516-526
Invoice Header
44
Custom7
Y
FALSE
cur-charge-4
Numeric, Last two digits are decimal
Detail Record Position 527-537
Invoice Header
45
Custom8
Y
FALSE
cur-charge-5
Numeric, Last two digits are decimal
Detail Record Position 538-548
Invoice Header
46
Custom9
Y
FALSE
total-due-with-penalty
Numeric, Last two digits are decimal
Detail Record Position 685-697
Invoice Header
47
Custom10
Y
FALSE
service-from-date
Date, yyyymmdd
Detail Record Position 63-70
Invoice Header
94
Custom11
Y
FALSE
service-to-date
Date, yyyymmdd
Detail Record Position 71-78
Invoice Header
95
Custom12
Y
FALSE
service-address-description
VarChar
Detail Record Position 33-62
Invoice Header
96
Custom13
Y
FALSE
current-period-consumption
Numeric (left padded with 0s)
Detail Record Position 726-734 
Invoice Header
97
Custom14
Y
FALSE
ser-code-label-6
Varchar
Position  394-413
Invoice Header
98
Custom15
Y
FALSE
cur-charge-6
Numeric, Last two digits are decimal
Position  549-559
Invoice Header
99
Custom16
Y
FALSE
ser-code-label-7
Varchar
Position  414-433
Invoice Header
100
Custom17
Y
FALSE
cur-charge-7
Numeric, Last two digits are decimal
Position  560-570
Invoice Header
101
Custom 18
Y
FALSE
cur-charge-8
Numeric, Last two digits are decimal
Position 571-581
Invoice Header
102
Custom 19
Y
FALSE
cur-charge-9
Numeric, Last two digits are decimal
Position 582-592
Invoice Header
103
Custom 20
Y
FALSE
cur-charge-10
Numeric, Last two digits are decimal
Position 593-603
Invoice Header
104
Custom 21
Y
FALSE
ser-code-label-1
Varchar
Position 294-313
Invoice Header
105
Custom 22
Y
FALSE
ser-code-label-2
Varchar
Position 314-333
Invoice Header
106
Custom 23
Y
FALSE
ser-code-label-3
Varchar
Position 334-353
Invoice Header
107
Custom 24
Y
FALSE
ser-code-label-4
Varchar
Position 354-373
Invoice Header
108
Custom 25
Y
FALSE
ser-code-label-5
Varchar
Position 374-393
Invoice Header
109
Custom 26
Y
FALSE
ser-code-label-6
Varchar
Position 394-413
Invoice Header
110
Custom 27
Y
FALSE
ser-code-label-7
Varchar
Position 414-433
Invoice Header
111
Custom 28
Y
FALSE
ser-code-label-8
Varchar
Position 434-453
Invoice Header
112
Custom 29
Y
FALSE
ser-code-label-9
Varchar
Position 454-473
Invoice Header
113
Custom 30
Y
FALSE
ser-code-label-10
Varchar
Position 474-493
Invoice Header
93
BalanceDue
Y
FALSE
T-total-due-with-contribs
.
Numeric, Last two digits are decimal
Detail Record Position 659-671
13
Invoice Header
252
InvoiceTypeID
N
TRUE
Always 42
Invoice Header
407
PastDue
Y
FALSE
T-arrears-for-account
Numeric, Last two digits are decimal
Detail Record Position 635-647
13
Invoice Header
58
RowType
N
TRUE
N/A- Generated by IC
Customer Record
59
AccountNumber
Y
TRUE
Account Number To Print
Numeric
Detail Record Position 2-19
18
Customer Record
60
CustomerName
Y
TRUE
Bill-To-Name
Varchar
Detail Record Position 79-108
30
Customer Record
61
Address1
Y
FALSE
Bill-to-address-1
VarChar
Detail Record Position 109-138
30
Customer Record
62
Address2
Y
FALSE
Bill-to-address-2
Varchar
Detail Record Position 139-168
30
Customer Record
63
City
Y
FALSE
Bill-to-city-state-zip
Varchar
Detail Record Position 169-216
48
Customer Record
64
State
Y
FALSE
Bill-to-city-state-zip
Varchar
Detail Record Position 169-216
48
Customer Record
65
Zip
Y
FALSE
Bill-to-city-state-zip
Varchar
Detail Record Position 169-216
48
Customer Record
70
RowType
N
TRUE
N/A- Generated by IC
Invoice Detail
BIF Customization's
Feature
BIF CUSTOMIZATIONS
AchServiceFee
N/A, in BIF, on biller questionnaire 
AllowPartialPayments
biller questionnaire 
AutoPayCollectionDate
biller questionnaire 
BalanceForward
Always Yes
CreditCardServiceFee
N/A
FirstNotifyRequestedDate
biller questionnaire 
InvoiceDate
N/A
InvoiceDueDate
N/A
InvoiceFormatGuid
N/A
InvoiceTypeID
N/A
LateFeeDate
N/A
LocationReference
N/A
MinimumAmountDue
biller questionnaire 
PaymentExpirationDate
biller questionnaire 
PaymentExpirationMessage
biller questionnaire 
PromptPayExpirationDate
N/A
RegistrationValue
N/A
SecondNotifyRequestedDate
biller questionnaire 
ThirdNotifyRequestedDate
biller questionnaire 
User Interaction and Design
Data Flow - Invoice
Invoices are uploaded to SFTP in Harlingen (Open Gov) format and imported as a BIF
Data Flow - Adjustments
Adjustments are made in real time through RTDR
Data Flow - Payment
Payments are posted in real time through Data Pump
Data Flow - Void
CSR will manually void payment in Biller Portal and void payment in OpenGov
Data Flow - ACH Reject
When an ACH Reject occurs an email will be sent to the biller and they will manually remove the payment in OpenGov
Data Flow - Change Log
Paperless, and Email changes are handled by data pump in real time
Data Flow - Bill Presentment
Not sure (potentially through a web service)
Payer Experience
Payers will access Invoice Cloud from the Biller website (URL redirect). Payers will use the IC Virtual Site and Customer Portal.
Biller Experience
CSRs will use Biller Portal to help with any issues
User Stories
Invoice Cloud Web Services
API Name
API Use/Purpose
NOT USED -  API Documentation  STW/OpenGov
** Will not be used ** - not working with STW OpenGov API
IC Use
Partner API Name
Description
Request
Response
Specifications
RTDR: Balance Update
VerifyAccountWithExtra
Basic Account Information
String Account Number- Account Number
String Pin- PIN
Amount Due= Current Amount Due
Postion 43 if N= Block ACH
Past Due= Past_due_amount
Total Amount Due Should be used.
Data Pump: Payment
makePayment
Payment API
Account Number= Account Number
PIN= PIN
Transaction Amount= Transaction amount
Credit Card Approval Code= Approval Code
 
Data Pump: Void
Data Pump: ACH Reject
Data Pump: Paperless Enrollment
Data Pump: AutoPay Enrollment
Data Transmission: Invoice
 URL:/spaces/IM/pages/707756041/BID+2227+Harlingen+Waterworks+System+Technical+Design+STW+OpenGov
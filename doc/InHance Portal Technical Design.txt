PROVIDE API KEY, BILLER GUID, WEBSERIVCE KEY TO inHANCE RESOURCE FOR HARRIS TO SETUP THE PORTAL
Fill in project details in the table below. Type /date to quickly add the target release date, /jira to link to Jira epics or issues, and @mention functional owners to keep everyone on the same page.
Page Navigation:
Jira tickets
Document status
draft
 
Document owner
 
 
 
Solution engineer
 
 
Invoice Cloud Web Services
The information in the Invoice Cloud Web Services section reflects the information provided to Invoice Cloud at the time of Discovery and Design. It is possible for this information to be updated at any time by a biller or CIS Vendor without notifying Invoice Cloud.
Single Sign On
Purpose/Summary: Cloud SSO Connect is Invoice Cloud’s Implementation of a Single Sign-On into the Invoice Cloud portal. This feature allows Billers and/or Partners to create a seamless experience for the Customer between Partner/Biller and Invoice Cloud systems while keeping the scope of PCI compliance at a minimum for Partners and Billers.
InHance Login Flow:
Configuration
SSOConnect Details
Field
Required
Comments
Partner Specification
RemoteAuthenticationToken
Yes
Token is provided from Remote Authentication Web Service.
Token is provided from Remote Authentication Web Service.
ViewMode
Yes
Value is required to identify how the Customer is accessing the Invoice Cloud pages.
Always 
1
 = iFrame
RedirectID
Yes
Value is required to be able to redirect the Customer to the requested page. 
1
 = Customer Portal Recent Bill Listing
2
 = Customer Portal Paperless Settings
3
 = Customer Portal AutoPay Settings
5
 = Customer Portal Payment Options
9
 = Customer Portal Scheduled Payments Listing
11
 = Customer Portal Pay By Text Enrollment
CSSUrl
No
InHance displays Invoice Cloud in an iFrame and has created a custom CSS URL.
https://www.invoicecloud.com/ssotest/sso-gmp.css
ReturnUrl
No
When this value is provided, the customer will be redirected to the provided URL after clicking the sign out button.
N/A
CustomReturnSiteName
No
When a 
ReturnUrl
 is provided, the tooltip text of the sign out button will change to “Sign out and Return to 
<SiteName>
”. 
<SiteName>
 defaults to the Biller DBA but can be customized by providing a value for 
CustomReturnSiteName
.
N/A
User Stories:
InHance Portal + InvoiceCloud Single Sign-On (SSO)
Workflow
Story
Assumptions & Requirements
Steps
Web Services 
Sample
User Access
User navigates to InHance portal and try to log in the account. 
Assumptions:
The user knows their login credentials
Check to see if login successful:
If login successfully:
Authenticate Account(s)
Acquire Remote Authentication Token
Retrieve CustomerGUID
Retrieve User Accounts
Sync all accounts of Invoice Cloud
If login failed:
Register Account(s)
Authenticate Account(s)
Acquire Remote Authentication Token
REST- Remote Authentication- Retrieve Users
If login successfully: 
REST- Remote Authentication- Remote Authentication
REST - Customer Portal-Retrieve CustomerGUID
REST- Remote Authentication- Retrieve User Accounts
If login failed:
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
Login Page
User Registration
User navigates to InHance portal and registers through the member portal. After registration 
Assumptions:
InHance does not know if a Payer is registered with InvoiceCloud.
InHance stores Remote Authentication Token (per session) for use in 
CloudSSO Redirect User using the pre-defined URL.
Requirement:
LoginTypeID (REST- Remote Authentication- Register Accounts) is always = 1
Check to see if account exists in invoice cloud and if it is registered.
If account does not exist:
Create Customer Record
Register Account(s)
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is not registered:
Register Accounts
Authenticate Account(s)
Registered User Payments workflows
If account does exist and is registered:
Authenticate Account(s)
Registered User Payments workflows
REST- Remote Authentication- Retrieve Users
If account does not exist:
REST- Customers- Create Customer Record
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
If account does exist and is not registered:
REST- Remote Authentication- Register Accounts
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
If account does exist and is registered:
REST- Remote Authentication- Remote Authentication
CloudSSO iFrame
Create an Account
Forgot Password
Dashboard
Unregistered User Payment 
An unregistered user tries to make a one-time payment
Requirement: 
Set ‘CreateCustomerRecord’ to TRUE
InHance launches CloudPayV2
Cloud Payments V2
Guest Payment
Registered User Payment 
A registered user is logged in and makes payments on a account.
Assumption:
User is already registered and authenticated
InHance stores Remote Authentication Token from Remote Authentication web service
InHance redirects (iFrame) to Customer Portal Recent Bill Listing
CloudSSOConnect (redirect 1 = Customer Portal Recent Bill Listing)
View and Pay Bill
Open Invoices
Payment Receipt
Managed Scheduled Payments
A registered user is logged in to InHance portal and navigates to IC screen to  update or cancel a scheduled payment.
Assumption:
User is already registered and authenticated
InHance redirects (iFrame) to Scheduled Payments screen
CloudSSOConnect (redirect 9 = Customer Portal Scheduled Payments Listing)
Scheduled Payment
Paperless Enrollment
A registered user is logged in to InHance portal and navigates to IC screen to enroll or unenroll paperless option
Assumption:
User is already registered and authenticated
InHance redirects (iFrame) to Customer Portal Paperless Settings screen
CloudSSOConnect (redirect 2 = Customer Portal Paperless Settings)
Paperless
AutoPay Enrollment
A registered user is logged in to InHance portal and navigates to IC screen to enroll or unenroll autopay option
Assumption:
User is already registered and authenticated
InHance redirects (iFrame) to Customer Portal AutoPay Settings screen
CloudSSOConnect (redirect 3 = Customer Portal AutoPay Settings)
AutoPay
Pay By Text Enrollment
A registered user is logged in to InHance portal and navigates to IC screen to enroll or unenroll Pay By Text 
Assumption:
User is already registered and authenticated
InHance redirects (iFrame) to Customer Portal Pay By Text Enrollment screen
CloudSSOConnect (redirect 11 = Customer Portal Pay By Text Settings)
Pay By Text
Update Email and Password
Registered user logs into the InHance portal and updates their password.
Assumptions: 
Neptune has the current email address and password of the user.
Requirement: 
IC should not allow user to update password to maintain password information in sync.
Neptune verify if Email and Password are the same as IC.
Yes: call IC update password and email API
No: Send verification email to stored account user email address. Once it’s approved, then call IC updated password and email API.
REST- Remote Authentication- Update Password
Update Email Address
Update Email
Update Password
Manage Payment Methods
A registered user is logged in to InHance portal and navigates to IC screen to store, update or remove payment methods.
Assumption:
User is already registered and authenticated
InHance redirects (iFrame) to Payment Methods screen
CloudSSOConnect (redirect 5 = Customer Portal Payment Options)
Saved Payment Methods
Cloud Payments V2
Purpose/Summary: CloudPayments V2 is currently being used exclusively for guest payments.
Sample Request:
CloudPaymentsV2
{
  "CSSUrl": "https://www.invoicecloud.com",
  "AllowSwipe": true,
  "AllowCCPayment": true,
  "AllowACHPayment": true,
  "RemoteAuthenticationToken": "",
  "ReturnURL": "https://localhost/WebShare/Anonymous/Receipt.aspx?clientKey=001&viewID=3&noSpace=1&transid=a53cf8331ca44b1698ea758ec5bd1950&status=2&acctnum=10000101",
  "PostBackURL": "https://localhost/WebShare/Anonymous/SilentPost.aspx?clientKey=001&viewID=3&noSpace=1&transid=a53cf8331ca44b1698ea758ec5bd1950&status=2&acctnum=10000101",
  "BillerReference": "",
  "ViewMode": 1,
  "CreateCustomerRecord": true,
  "Customers": [
    {
      "AccountNumber": "10000101",
      "Name": "Willows Laundry",
      "Address": null,
      "City": null,
      "State": null,
      "Zip": null,
      "EmailAddress": null,
      "Invoices": null
    }
  ],
  "PageResultOptions": {
    "AllowRegisterAccount": false,
    "InvoiceOptions": {
      "AllowViewStatement": false,
      "AllowRemove": true,
      "AllowViewRelated": false,
      "AllowRemindMe": false
    }
  }
}
Additional Details
Biller Request Parameters:
Parameter
Required
True/False
In Request
Y/N
Partner Field Name
Partner Field Description
ReturnURL
False
Y
ReturnURL
PostBackURL
False
Y
PostBackURL
Post back URL (Per a Prod request, AccountNumber is available now)
BillerReference
False
Y
BillerReference
A unique reference number generated from AI
ViewMode
True
Y
ViewMode
1
CssUrl
False
Y
CssUrl
Customers
True
Y
Customers
Customer Data Object:
Parameter
Required
True/False
In Request
Y/N
Partner Field Name
Partner Field Description
AccountNumber
True
Y
AccountNumber
Only AccountNumber
DisplayAccountNumber
False
N
Name
False
Y
Name
Address
False
Y
Address
City
False
Y
City
State
False
Y
State
Zip
False
Y
Zip
EmailAddress
False
Y
EmailAddress
Invoices
False
Y
Invoices
Optional Invoice Data Object
Parameter
Required
True/False
In Request
Y/N
Partner Field Name
Partner Field Description
InvoiceNumber
True
Y
TypeID
False
N
InvoiceDate
False
N
DueDate
False
N
BalanceDue
False
N
CCServiceFee
False
N
ACHServiceFee
False
N
MinimumAmountDue
False
N
AllowPartialPayments
False
N
Cloud Payment Settings
Parameter
Required
True/False
In Request
Y/N
Partner Field Name
Partner Field Description
AllowSwipe
False
Y
AllowSwipe
AllowEMV
False
EMVDeviceID
False
EMVLocationID
False
CashierName
False
AllowCCPayment
False
Y
AllowCCPayment
AllowACHPayment
False
Y
AllowACHPayment
CreateCustomerRecord
False
RemoteAuthenticationToken
False
PageLoadOverride
False
Optional Page User Result UI Options
Parameter
Required
In Request
Partner Field Name
Partner Field Description
InvoiceOptions
Optional
AllowRegisterAccount
Optional
Y
AllowRegisterAccount
Optional Invoice User Experience Options
Parameter
Required
In Request
Partner Field Name
Partner Field Description
AllowViewStatement
Optional
Y
AllowRemove
Optional
Y
AllowViewRelated
Optional
Y
AllowRemindMe
Optional
Y
User Stories:
InHance Portal + InvoiceCloud CloudPayments V2 (CPV2)
Workflow
Story
Assumptions/Requirements
Steps
Webservices
Sample
Registered User Quick Payment
An registered user tries to make a quick payment
Assumption:
User is already registered and authenticated
InHance launches CloudPayV2
Cloud Payments V2
Payment Page
Unregistered User Payment
An unregistered user tries to make a one-time payment
InHance launches CloudPayV2
Cloud Payments V2
Guest Payment
Bill Pay
Required Options
Setting ID
Description
Value
Is value unique per biller? (Y/N)
129
Display latest $0 or negative balances in Open Invoices and CPV2
TURN THIS ON
Integration Modifications
Jira INT
Date Released
Previous Behavior
Desired Behavior
Business Case/Solution
 URL:/spaces/IM/pages/4184376351/InHance+Portal+Technical+Design
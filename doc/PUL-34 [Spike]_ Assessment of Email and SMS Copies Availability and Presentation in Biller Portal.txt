Objective
To investigate the feasibility of retrieving and displaying exact copies of email and SMS communications sent to payers within the Biller Portal. This includes understanding current data availability, identifying gaps (especially for reminder emails), and exploring how to render these messages in a user-friendly format.
Data Availability & Retrieval
Email Data Confirmation
All Email bodies are stored in “dbo.EmailQueue” except reminder emials (EmailQueueTypeID -(33,44,98) in tblEmailQueueType)
Metadata includes: EmailSubject, EmailRecipient, EmailSentDate, BillerID, EmailSender.
Retention policy: 7/30/60 days. 
Reminder emails - 7 days
AutoPay & Paperless registration completion emails - 60 days
Rest all emails - 30 days
To get the Retention days & Default body of emails: 
SELECT TOP (100) [EmailQueueTypeID]
      ,[EmailQueueTypeDesc]
      ,[EmailRetentionDays]
  FROM [dbo].[tblEmailQueueType] 
Emails stored in:
  Select * FROM [dbo].[EmailQueue]
To update retention days: Modify EmailRetentionDays column in “tblEmailQueueType“.
Reminder Email Retrieval
Reminder emails are not getting stored.
ExternalReferenceGUID exists in EmailTracking table but doesn't directly link to EmailQueue table to fetch the Reminder emails.
Recommendation
: Store reminders in 
EmailQueue 
or new 
EmailRemindersArchive 
table.
Need to understand email purging mechanism from DB team.
SMS Data Confirmation
All SMS messages are stored in SMS.SMSOut table.
SELECT
    BillerID,
    SMSOutID,
    SMSPhoneNumber,
    SMSTypeID,
    DeliveredDateTimeUtc,
    CONCAT(
        'To: ', SMSPhoneNumber, CHAR(13),
        'Sent: ', CONVERT(varchar, SMSSentDate, 120), CHAR(13),
        'Message: ', SMSMessage
    ) AS FormattedSMS
FROM SMS.SMSOut
ORDER BY SMSSentDate DESC;
Metadata include SMSMessage, SMSPhoneNumber, SMSSentDate, SMSReference.
No retention policy applies; messages are retained indefinitely. (data available from 2020 to 2025)
Rendering Approach
Rendering Feasibility
Email bodies can be rendered using HTML iframe or equivalent components.
Email Rendering:
<iframe
    srcdoc='<%= EmailBody %>'
    width="100%"
    height="600px"
    frameborder="0">
</iframe>
The property EmailBody should be available in the 
code-behind 
(e.g., Page_Load), either as a public property or through ViewState, Session, etc.
Code behind in 
vb.net
vbnet
'Assume encodedEmailBody is fetched from EmailQueue table from database
'------------------------------------------------------------------------
If Not String.IsNullOrEmpty(encodedEmailBody) Then 
   Dim decodedEmailBody As String = DecodeBase64ToString(encodedEmailBody)
   Console.WriteLine("Decoded Email Body:")
   Console.WriteLine(decodedEmailBody)

   ' Optionally, save to file
   ' System.IO.File.WriteAllText("decoded_email.html", decodedBody)
 Else
     Console.WriteLine("No email body found.")
 End If
'-----------------------------------------------------------------------
 Function DecodeBase64ToString(encodedEmail As String) As String
        Try
            Dim bytes As Byte() = Convert.FromBase64String(encodedEmail)
            Return Encoding.UTF8.GetString(bytes)
        Catch ex As FormatException
            Return "[Invalid Base64 format]"
        End Try
    End Function
Base64-encoded HTML as input :
Email body in EmailQueue table
PGh0bWw+DQo8aGVhZD4NCiAgIDxtZXRhIGh0dHAtZXF1aXY9IkNvbnRlbnQtVHlwZSIgY29udGVudD0idGV4dC9odG1sOyBjaGFyc2V0PXV0Zi04Ij4NCiAgIDx0aXRsZT5JbnZvaWNlIENsb3VkIC0gUmVncmVzc2lvbiBRQTEgSW52b2ljaW5nPC90aXRsZT4NCiAgIDxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyIgbWVkaWE9InNjcmVlbiI+DQogICAgICBib2R5IHsNCiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7DQogICAgICB9DQoJICANCgkgIGhyIHsgbWFyZ2luOjA7IHBhZGRpbmc6MDsgaGVpZ2h0OjFweDt9DQoNCiAgICAgIGEgaW1nIHsNCiAgICAgICAgIGJvcmRlcjogbm9uZTsNCiAgICAgIH0NCgkgIA0KCSAgQTpsaW5rIHtjb2xvcjojMzZGO30NCgkgIEE6dmlzaXRlZCB7Y29sb3I6IzM2Rjt9DQoJICBBOmFjdGl2ZSB7Y29sb3I6IzM2Rjt9DQoJICBBOmhvdmVyIHtjb2xvcjojMzZGO30NCg0KICAgICAgdGFibGUuYmcxIHsNCiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7DQogICAgICB9DQoNCiAgICAgIHRhYmxlLmJnMiB7DQogICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOw0KCQkgYm9yZGVyOjJweDsNCgkJIGJvcmRlci1zdHlsZTpzb2xpZDsNCgkJIGJvcmRlci1jb2xvcjojZWVlZWVlOw0KCQkgYm9yZGVyLWNvbGxhcHNlOmNvbGxhcHNlOw0KICAgICAgfQ0KDQogICAgICB0ZC5wZXJtaXNzaW9uIHsNCiAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlZWVlZWU7DQogICAgICAgICBwYWRkaW5nOiAxMHB4IDIwcHggMTBweCAyMHB4Ow0KICAgICAgfQ0KDQogICAgICB0ZC5wZXJtaXNzaW9uIHAgew0KICAgICAgICAgZm9udC1mYW1pbHk6IFZlcmRhbmE7DQogICAgICAgICBmb250LXNpemU6IDExcHg7DQogICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgY29sb3I6ICMzMzMzMzM7DQogICAgICAgICBtYXJnaW46IDA7DQogICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgfQ0KDQogICAgICB0ZC5ib2R5IHsNCiAgICAgICAgIHBhZGRpbmc6IDAgMjBweCAyMHB4IDIwcHg7DQogICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmZmZmZmOw0KICAgICAgfQ0KDQogICAgICB0ZC5zaWRlYmFyIGgzIHsNCiAgICAgICAgIGZvbnQtZmFtaWx5OiBWZXJkYW5hOw0KICAgICAgICAgZm9udC1zaXplOiAxM3B4Ow0KICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICBjb2xvcjogIzMzMzMzMzsNCiAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICB9DQoNCiAgICAgIHRkLnNpZGViYXIgdWwgew0KICAgICAgICAgZm9udC1mYW1pbHk6IFZlcmRhbmE7DQogICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgY29sb3I6ICMzMzMzMzM7DQogICAgICAgICBtYXJnaW46IDZweCAwIDE0cHggMjRweDsNCiAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICB9DQoNCiAgICAgIHRkLnNpZGViYXIgc3BhbiB7DQogICAgICAgICBmb250LWZhbWlseTogVmVyZGFuYTsNCiAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICAgICAgICAgY29sb3I6ICM2NjY2NjY7DQogICAgICAgICBtYXJnaW46IDZweCAwIDAgMDsNCiAgICAgICAgIHBhZGRpbmc6IDM7DQogICAgICB9DQoNCiAgICAgIHRkLnNpZGViYXIgcCB7DQogICAgICAgICBmb250LWZhbWlseTogVmVyZGFuYTsNCiAgICAgICAgIGZvbnQtc2l6ZTogMTFweDsNCiAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgICBjb2xvcjogIzMzMzMzMzsNCiAgICAgICAgIG1hcmdpbjogMCAwIDEwcHggMDsNCiAgICAgIH0NCg0KICAgICAgdGQuYnV0dG9ucyB7DQogICAgICAgIHBhZGRpbmc6IDIwcHggMCAwIDA7IA0KICAgICAgfQ0KDQogICAgICB0ZC5tYWluYmFyIGgyIHsNCiAgICAgICAgIGZvbnQtZmFtaWx5OiBWZXJkYW5hOw0KICAgICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgICAgICBjb2xvcjogIzY2NjY2NjsNCiAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICB9DQoNCiAgICAgIHRkLm1haW5iYXIgaW1nLmhyIHsNCiAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgIHBhZGRpbmc6IDAgMCAxMHB4IDA7DQogICAgICB9DQoNCiAgICAgIHRkLm1haW5iYXIgcCB7DQogICAgICAgICBmb250LWZhbWlseTogVmVyZGFuYTsNCiAgICAgICAgIGZvbnQtc2l6ZTogMTNweDsNCiAgICAgICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7DQogICAgICAgICBjb2xvcjogIzMzMzMzMzsNCiAgICAgICAgIG1hcmdpbjogMCAwIDE0cHggMDsNCiAgICAgICAgIHBhZGRpbmc6IDA7DQoJCSB0ZXh0LWFsaWduOmp1c3RpZnk7DQogICAgICB9DQoNCiAgICAgIHRkLm1haW5iYXIgdWwgew0KICAgICAgICAgZm9udC1mYW1pbHk6IFZlcmRhbmE7DQogICAgICAgICBmb250LXNpemU6IDEzcHg7DQogICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgY29sb3I6ICMzMzMzMzM7DQogICAgICAgICBtYXJnaW46IDAgMCAxNHB4IDI0cHg7DQogICAgICAgICBwYWRkaW5nOiAwOw0KICAgICAgfQ0KDQogICAgICB0ZC5mb290ZXIgew0KICAgICAgICAgcGFkZGluZy10b3A6MTBweDsNCgkJIGJhY2tncm91bmQtY29sb3I6I2UzZTFlMTsNCiAgICAgICAgIGhlaWdodDogNjFweDsNCiAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7DQoJCSBmb250LXNpemU6MTBweDsNCiAgICAgIH0NCg0KICAgICAgdGQuZm9vdGVyIHAgew0KICAgICAgICAgZm9udC1mYW1pbHk6IFZlcmRhbmE7DQogICAgICAgICBmb250LXNpemU6IDEwcHg7DQogICAgICAgICBmb250LXdlaWdodDogbm9ybWFsOw0KICAgICAgICAgY29sb3I6ICMzMzMzMzM7DQogICAgICAgICBsaW5lLWhlaWdodDogMTZweDsNCiAgICAgICAgIG1hcmdpbjogMDsNCiAgICAgICAgIHBhZGRpbmc6IDA7DQogICAgICB9DQogICA8L3N0eWxlPg0KPC9oZWFkPg0KPGJvZHk+DQoNCjx0YWJsZSB3aWR0aD0iMTAwJSIgYm9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIGNsYXNzPSJiZzEiPg0KICAgPHRyPg0KICAgICAgPHRkIGFsaWduPSJjZW50ZXIiPg0KICAgICAgICAgDQogICAgICAgICA8dGFibGUgd2lkdGg9IjY2NyIgYm9yZGVyPSIwIiBjZWxsc3BhY2luZz0iMCIgY2VsbHBhZGRpbmc9IjAiIGNsYXNzPSJiZzIiPg0KICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJoZWFkZXIiIGFsaWduPSJsZWZ0Ij4NCgkJCQkJPGltZyBhbHQ9Ikludm9pY2UgQ2xvdWQgLSBSZWdyZXNzaW9uIFFBMSIgYm9yZGVyPSIwIiB3aWR0aD0iNjY3IiBzcmM9Imh0dHBzOi8vaWNibG9ic3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvaWMtcmVzb3VyY2VzLzE5ZjM3NjI2LWFmNWQtNDlmZS1iZDZiLTNkMTQ4ZGNjMmJkZS5wbmciPg0KICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICA8dGQgdmFsaWduPSJ0b3AiIGNsYXNzPSJib2R5Ij48YnI+PGJyPg0KICAgICAgICAgICAgICAgICAgPHRhYmxlIHdpZHRoPSIxMDAlIiBib3JkZXI9IjAiIGNlbGxzcGFjaW5nPSIwIiBjZWxscGFkZGluZz0iMCI+DQogICAgICAgICAgICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICAgICAgICAgICA8dGQgd2lkdGg9IjQzNyIgdmFsaWduPSJ0b3AiIGNsYXNzPSJtYWluYmFyIiBhbGlnbj0ibGVmdCI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICA8aDI+RGVhciBHYXJsYW5kIENocmlzdGlhbnNlbjwvaDI+DQoJCQkJCQkgICA8aHIgLz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxicj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxwPjxiPllvdXIgU2NoZWR1bGVkIFBheW1lbnQgRGF0ZSBpcyBhbG1vc3QgaGVyZTwvYj4NCjxwPg0KVGhpcyBpcyBhIHJlbWluZGVyIG9mIGFuIHVwY29taW5nIHBheW1lbnQgdHJhbnNhY3Rpb24uIE5vIGFjdGlvbiBpcyByZXF1aXJlZCBvbiB5b3VyIHBhcnQuDQo8L3A+DQo8cD4NCllvdSBoYXZlIGF1dGhvcml6ZWQgYSBwYXltZW50IChhbW91bnQgc2hvd24gYXQgcmlnaHQpIHRvIGJlIHByb2Nlc3NlZCBvbiA2LzMwLzIwMjUgMTA6MjY6MTMgQU0gYW5kIGFwcGxpZWQgdG8geW91ciBhY2NvdW50IFJFLTEwNTg0NTMyMDguDQo8L3A+DQo8cD4NClRvIHJldmlldyB0aGlzIGludm9pY2Ugb3IgdG8gY2FuY2VsIHRoaXMgcGF5bWVudCwgcGxlYXNlIGdvIHRvIGh0dHBzOi8vd3d3Lmludm9pY2VjbG91ZC5jb20vcWEtcmVncmVzc2lvbjEgYW5kIGxvZyBpbiB0byB5b3VyIGFjY291bnQuIENoYW5nZXMgbXVzdCBiZSBtYWRlIHByaW9yIHRvIHRoZSBwYXltZW50IGRhdGUgYWJvdmUuIElmIHlvdSBjaGFuZ2UgeW91ciBwYXltZW50IG1ldGhvZCAoZS1jaGVjay9DcmVkaXQvRGViaXQgQ2FyZHMpIHRoZSBjb252ZW5pZW5jZSBmZWUgYW1vdW50IG1heSBjaGFuZ2UuIFBsZWFzZSBjb25maXJtIHRoZSBmZWUgYW1vdW50IHZpYSBlbWFpbCBiZWxvdyBpZiB5b3UgYXJlIHVuc3VyZS4NCjwvcD4NCjxwPg0KSWYgeW91IGhhdmUgYW55IHF1ZXN0aW9ucyByZWdhcmRpbmcgeW91ciBhY2NvdW50LCBwbGVhc2UgZW1haWwgdXMgYXQgYmlsbGVyY3VzdG9tZXJzZXJ2aWNlQGljdGVzdC5jb20gYW5kIGluY2x1ZGUgeW91ciBhY2NvdW50IG51bWJlciwgZmlyc3QgbmFtZSBhbmQgbGFzdCBuYW1lIG9uIHRoZSBhY2NvdW50Lg0KPC9wPg0KPHA+DQpUaGFuayB5b3UgZm9yIHlvdXIgcGF5bWVudCwNCjxicj4NCkludm9pY2UgQ2xvdWQgLSBSZWdyZXNzaW9uIFFBMQ0KPC9wPg0KPHA+DQpQLlMuIFBsZWFzZSBiZSBzdXJlIHRvIHVwZGF0ZSB5b3VyIGNoZWNrYm9vayBpZiB5b3UgYXJlIHBheWluZyBieSBlLWNoZWNrLg0KPC9wPjwvcD4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICA8YnIgLz4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgIDwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCB3aWR0aD0iMjAiPjwvdGQ+DQogICAgICAgICAgICAgICAgICAgICAgICANCiAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCB2YWxpZ249InRvcCIgd2lkdGg9IjE3MCIgY2xhc3M9InNpZGViYXIiIGFsaWduPSJsZWZ0Ij4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgIDxoMz5TY2hlZHVsZWQgUGF5bWVudCBEZXRhaWxzPC9oMz48YnI+DQoNCjx0YWJsZSBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGJvcmRlcj0iMCI+DQoJPHRyPg0KICAgIAk8dGQ+PGltZyBzcmM9Imh0dHBzOi8vaWNibG9ic3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW1haWwtaW1hZ2VzL3NpZGViYXJTdWJoZWFkZXJMZWZ0LmdpZiIgYm9yZGVyPSIwIiBhbGlnbj0idGV4dHRvcCIgLz48L3RkPg0KICAgIAk8dGQgc3R5bGU9ImhlaWdodDoyMHB4O2JhY2tncm91bmQtY29sb3I6I2ViZTllOTt3aWR0aDoxMDAlOyI+PHNwYW4+QWNjb3VudCBOdW1iZXI6PC9zcGFuPjwvdGQ+DQogICAgCTx0ZD48aW1nIHNyYz0iaHR0cHM6Ly9pY2Jsb2JzdG9yYWdlLmJsb2IuY29yZS53aW5kb3dzLm5ldC9lbWFpbC1pbWFnZXMvc2lkZWJhclN1YmhlYWRlclJpZ2h0LmdpZiIgYm9yZGVyPSIwIiBhbGlnbj0iYWJzbWlkZGxlIiAvPjwvdGQ+DQogICAgPC90cj4NCiAgICA8dHI+DQogICAgCTx0ZD48L3RkPg0KICAgICAgICA8dGQgY29sc3Bhbj0iMiIgc3R5bGU9InBhZGRpbmctdG9wOjVweDtwYWRkaW5nLWJvdHRvbToxMHB4OyI+DQogICAgICAgIDxwPlJFLTEwNTg0NTMyMDg8L3A+DQogICAgICAgIDwvdGQ+DQogICAgPC90cj4NCjwvdGFibGU+DQogICAgICAgICAgICAgICAgICAgICAgICAgICANCjx0YWJsZSBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGJvcmRlcj0iMCI+DQoJPHRyPg0KICAgIAk8dGQ+PGltZyBzcmM9Imh0dHBzOi8vaWNibG9ic3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW1haWwtaW1hZ2VzL3NpZGViYXJTdWJoZWFkZXJMZWZ0LmdpZiIgYm9yZGVyPSIwIiBhbGlnbj0idGV4dHRvcCIgLz48L3RkPg0KICAgIAk8dGQgc3R5bGU9ImhlaWdodDoyMHB4O2JhY2tncm91bmQtY29sb3I6I2ViZTllOTt3aWR0aDoxMDAlOyI+PHNwYW4+SW52b2ljZSBOdW1iZXI6PC9zcGFuPjwvdGQ+DQogICAgCTx0ZD48aW1nIHNyYz0iaHR0cHM6Ly9pY2Jsb2JzdG9yYWdlLmJsb2IuY29yZS53aW5kb3dzLm5ldC9lbWFpbC1pbWFnZXMvc2lkZWJhclN1YmhlYWRlclJpZ2h0LmdpZiIgYm9yZGVyPSIwIiBhbGlnbj0iYWJzbWlkZGxlIiAvPjwvdGQ+DQogICAgPC90cj4NCiAgICA8dHI+DQogICAgCTx0ZD48L3RkPg0KICAgICAgICA8dGQgY29sc3Bhbj0iMiIgc3R5bGU9InBhZGRpbmctdG9wOjVweDtwYWRkaW5nLWJvdHRvbToxMHB4OyI+DQogICAgICAgIDxwPjEwNTg0NTMyMDgtMTwvcD4NCiAgICAgICAgPC90ZD4NCiAgICA8L3RyPg0KPC90YWJsZT4NCiAgICAgICAgICAgICAgDQo8dGFibGUgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBib3JkZXI9IjAiPg0KCTx0cj4NCiAgICAJPHRkPjxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9zaWRlYmFyU3ViaGVhZGVyTGVmdC5naWYiIGJvcmRlcj0iMCIgYWxpZ249InRleHR0b3AiIC8+PC90ZD4NCiAgICAJPHRkIHN0eWxlPSJoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNlYmU5ZTk7d2lkdGg6MTAwJTsiPjxzcGFuPlBheW1lbnQgRGF0ZTo8L3NwYW4+PC90ZD4NCiAgICAJPHRkPjxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9zaWRlYmFyU3ViaGVhZGVyUmlnaHQuZ2lmIiBib3JkZXI9IjAiIGFsaWduPSJhYnNtaWRkbGUiIC8+PC90ZD4NCiAgICA8L3RyPg0KICAgIDx0cj4NCiAgICAJPHRkPjwvdGQ+DQogICAgICAgIDx0ZCBjb2xzcGFuPSIyIiBzdHlsZT0icGFkZGluZy10b3A6NXB4O3BhZGRpbmctYm90dG9tOjEwcHg7Ij4NCiAgICAgICAgPHA+Ni8zMC8yMDI1IDEwOjI2OjEzIEFNPC9wPg0KICAgICAgICA8L3RkPg0KICAgIDwvdHI+DQo8L3RhYmxlPg0KICAgICAgICAgICAgIA0KPHRhYmxlIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgYm9yZGVyPSIwIj4NCgk8dHI+DQogICAgCTx0ZD48aW1nIHNyYz0iaHR0cHM6Ly9pY2Jsb2JzdG9yYWdlLmJsb2IuY29yZS53aW5kb3dzLm5ldC9lbWFpbC1pbWFnZXMvc2lkZWJhclN1YmhlYWRlckxlZnQuZ2lmIiBib3JkZXI9IjAiIGFsaWduPSJ0ZXh0dG9wIiAvPjwvdGQ+DQogICAgCTx0ZCBzdHlsZT0iaGVpZ2h0OjIwcHg7YmFja2dyb3VuZC1jb2xvcjojZWJlOWU5O3dpZHRoOjEwMCU7Ij48c3Bhbj5QYXltZW50IEFtb3VudDo8L3NwYW4+PC90ZD4NCiAgICAJPHRkPjxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9zaWRlYmFyU3ViaGVhZGVyUmlnaHQuZ2lmIiBib3JkZXI9IjAiIGFsaWduPSJhYnNtaWRkbGUiIC8+PC90ZD4NCiAgICA8L3RyPg0KICAgIDx0cj4NCiAgICAJPHRkPjwvdGQ+DQogICAgICAgIDx0ZCBjb2xzcGFuPSIyIiBzdHlsZT0icGFkZGluZy10b3A6NXB4O3BhZGRpbmctYm90dG9tOjEwcHg7Ij4NCiAgICAgICAgPHA+JDEwLjAwPC9wPg0KICAgICAgICA8L3RkPg0KICAgIDwvdHI+DQo8L3RhYmxlPg0KDQo8dGFibGUgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBib3JkZXI9IjAiPg0KCTx0cj4NCiAgICAJPHRkPjxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9zaWRlYmFyU3ViaGVhZGVyTGVmdC5naWYiIGJvcmRlcj0iMCIgYWxpZ249InRleHR0b3AiIC8+PC90ZD4NCiAgICAJPHRkIHN0eWxlPSJoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNlYmU5ZTk7d2lkdGg6MTAwJTsiPjxzcGFuPlNlcnZpY2UgRmVlPC9zcGFuPjwvdGQ+DQogICAgCTx0ZD48aW1nIHNyYz0iaHR0cHM6Ly9pY2Jsb2JzdG9yYWdlLmJsb2IuY29yZS53aW5kb3dzLm5ldC9lbWFpbC1pbWFnZXMvc2lkZWJhclN1YmhlYWRlclJpZ2h0LmdpZiIgYm9yZGVyPSIwIiBhbGlnbj0iYWJzbWlkZGxlIiAvPjwvdGQ+DQogICAgPC90cj4NCiAgICA8dHI+DQogICAgCTx0ZD48L3RkPg0KICAgICAgICA8dGQgY29sc3Bhbj0iMiIgc3R5bGU9InBhZGRpbmctdG9wOjVweDtwYWRkaW5nLWJvdHRvbToxMHB4OyI+DQogICAgICAgIDxwPiQwLjAwPC9wPg0KICAgICAgICA8L3RkPg0KICAgIDwvdHI+DQo8L3RhYmxlPg0KDQo8dGFibGUgY2VsbHBhZGRpbmc9IjAiIGNlbGxzcGFjaW5nPSIwIiBib3JkZXI9IjAiPg0KCTx0cj4NCiAgICAJPHRkPjxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9zaWRlYmFyU3ViaGVhZGVyTGVmdC5naWYiIGJvcmRlcj0iMCIgYWxpZ249InRleHR0b3AiIC8+PC90ZD4NCiAgICAJPHRkIHN0eWxlPSJoZWlnaHQ6MjBweDtiYWNrZ3JvdW5kLWNvbG9yOiNlYmU5ZTk7d2lkdGg6MTAwJTsiPjxzcGFuPlRvdGFsIEFtb3VudDwvc3Bhbj48L3RkPg0KICAgIAk8dGQ+PGltZyBzcmM9Imh0dHBzOi8vaWNibG9ic3RvcmFnZS5ibG9iLmNvcmUud2luZG93cy5uZXQvZW1haWwtaW1hZ2VzL3NpZGViYXJTdWJoZWFkZXJSaWdodC5naWYiIGJvcmRlcj0iMCIgYWxpZ249ImFic21pZGRsZSIgLz48L3RkPg0KICAgIDwvdHI+DQogICAgPHRyPg0KICAgIAk8dGQ+PC90ZD4NCiAgICAgICAgPHRkIGNvbHNwYW49IjIiIHN0eWxlPSJwYWRkaW5nLXRvcDo1cHg7cGFkZGluZy1ib3R0b206MTBweDsiPg0KICAgICAgICA8cD4kMTAuMDA8L3A+DQogICAgICAgIDwvdGQ+DQogICAgPC90cj4NCjwvdGFibGU+DQoNCg0KICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgICAgICAgPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICA8dHI+DQogICAgICAgICAgICAgICA8dGQgY2xhc3M9ImZvb3RlciIgc3R5bGU9ImJhY2tncm91bmQtY29sb3I6I2ZmZjsiPg0KCQkJCQk8dGFibGUgd2lkdGg9IjEwMCUiIGNlbGxwYWRkaW5nPSIwIiBjZWxsc3BhY2luZz0iMCIgYm9yZGVyPSIwIj4NCgkJCQkJCTx0cj4NCgkJCQkJCQk8dGQgc3R5bGU9IndpZHRoOjEwMCU7cGFkZGluZzowOyI+PC90ZD4NCgkJCQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx0ZCBzdHlsZT0icGFkZGluZzowOyI+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbWcgc3JjPSJodHRwczovL2ljYmxvYnN0b3JhZ2UuYmxvYi5jb3JlLndpbmRvd3MubmV0L2VtYWlsLWltYWdlcy9pY19icmFuZGluZzMuZ2lmIiBib3JkZXI9IjAiIC8+DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgPC90ZD4NCgkJCQkJCTwvdHI+DQoJCQkJCTwvdGFibGU+DQoJCQkJCQk8ZGl2IHN0eWxlPSJiYWNrZ3JvdW5kLWNvbG9yOiNhNWJmYTM7Zm9udC1mYW1pbHk6QXJpYWwsIEhlbHZldGljYSwgc2Fucy1zZXJpZjtwYWRkaW5nOjVweDtmb250LXNpemU6MTJweDt0ZXh0LWFsaWduOnJpZ2h0O2NvbG9yOiM1Mjc0NGY7Ij5QbGVhc2UgY29uc2lkZXIgdGhlIGVudmlyb25tZW50IGJlZm9yZSBwcmludGluZyB0aGlzIGVtYWlsPC9kaXY+DQoJCQkJPC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICA8L3RhYmxlPg0KICAgICAgICAgDQogICAgICA8L3RkPg0KICAgPC90cj4NCiAgIDx0cj4NCiAgIAkJPHRkIGFsaWduPSJjZW50ZXIiPg0KICAgICAgICANCiAgICAgICAgCTx0YWJsZSBjZWxscGFkZGluZz0iMCIgY2VsbHNwYWNpbmc9IjAiIGJvcmRlcj0iMCIgd2lkdGg9IjY2NyI+DQogICAgICAgICAgICAgPHRyPg0KICAgICAgICAgICAgCTx0ZD48ZGl2IHN0eWxlPSJ0ZXh0LWFsaWduOmNlbnRlcjtmb250LXNpemU6MTFweDtmb250LWZhbWlseTpBcmlhbCwgSGVsdmV0aWNhLCBzYW5zLXNlcmlmO2NvbG9yOiMzMzMzMzM7cGFkZGluZy10b3A6NXB4OyI+DQogICAgICAgICAgICAgICAgQ2VydGFpbiBlbWFpbCBhY2NvdW50cyBibG9jayBtZXNzYWdlcyB0aGF0IHlvdSBpbnRlbmQgdG8gcmVjZWl2ZS4gVG8gbWFrZSBzdXJlIHRoYXQgeW91IGNvbnRpbnVlIHRvIHJlY2VpdmUgdXBkYXRlcyBmcm9tIEludm9pY2UgQ2xvdWQgYWRkIA0KICAgICAgICAgICAgICAgIG5vLXJlcGx5IEAgaW52b2ljZWNsb3VkLm5ldCB0byB5b3VyIGFkZHJlc3MgYm9vay4gPyAyMDEwLTIwMjAsIEludm9pY2UgQ2xvdWQuIEFsbCByaWdodHMgcmVzZXJ2ZWQuPC9kaXY+PC90ZD4NCiAgICAgICAgICAgIDwvdHI+DQogICAgICAgICAgICA8L3RhYmxlPg0KICAgICAgICANCiAgICAgICAgPC90ZD4NCiAgIDwvdHI+DQo8L3RhYmxlPg0KDQo8L2JvZHk+DQo8L2h0bWw+
Decoded Email in output
Decoded email
Ensure fidelity by 
testing against actual sent emails.
SMS messages can be displayed as plain text with metadata.
SMS Rendering:
<p><strong>To:</strong> <%= SMSPhoneNumber %></p>
<p><strong>Date Sent:</strong> <%= SMSSentDate %></p>
<p><%= SMSMessage %></p>
Example: Code-Behind in Page.aspx.vb:
Public SMSPhoneNumber As String
Public SMSSentDate As String
Public SMSMessage As String
Protected Sub Page_Load(ByVal sender As Object, ByVal e As EventArgs) Handles Me.Load
    If Not IsPostBack Then
        ' Example data (typically this comes from your database or business layer)
        SMSPhoneNumber = "+1234567890"
        SMSSentDate = DateTime.Now.ToString("yyyy-MM-dd HH:mm")
        SMSMessage = "Your OTP is 123456. Do not share it with anyone."
    End If
End Sub
Gaps & Recommendations
Reminder emails require improved tracking and storage mechanisms, no reference to ExternalReferenceGUID in EmailQueue table found.
In complete DB/Shard only 3 tables (EmailTracking, EmailTrackingDeliveryStatus, SMSOut) has column ExternalReferenceGUID, not enough data to retrieve reminder email bodies.
Store reminder emails in EmailQueue or new EmailRemindersArchive table.
Limited retention: Increase storage duration for auditing.
Review and extend retention policies.
Metadata for rendering: Ensure full content structure is captured.
UI components should be implemented to display exact copies.
Analysis on below Questions: 
What are the retention time lines in MailGun?
760
According to the Mailgun dashboard, the 
maximum retention period
 for data is 
up to 7 days
.
How can we retrieve the Reminder email bodies from MailGun?
760
Email Retention and Cleanup Process – Current State and Recommendations
Mailgun Retention Policy
:
Mailgun retains all emails based on the 
retention policy or plan configured for our domain
.
The maximum retention period is determined by the selected plan.
Internal Email Storage
:
On our side, 
email bodies are stored in the 
EmailQueue
 table
.
The duration for which these emails are retained is controlled by the 
EmailRetentionDays
 value defined in the 
tblEmailQueueType
 table.
By 
increasing the 
EmailRetentionDays
 value
, we can retain email bodies for a longer period.
Email Deletion Mechanisms
:
The stored procedure 
[dbo].[delEmailQueue]
 is currently used to delete email bodies from the 
EmailQueue
 table based on the configured 
EmailRetentionDays
.
Additionally, the stored procedure 
[dbo].[PurgeData_730]
 removes emails older than 
730 days (2 Years)
, processing them in 
batches of 10,000 records
.
Preliminary analysis suggests that this purge process is 
triggered via an Azure
, but further investigation is needed to determine the 
job’s execution frequency and configuration
.
Retrieving Emails from Mailgun
:
If there is a need to retrieve emails directly from Mailgun, 
further analysis is required
 in the following projects:
ICFramework.Email
ICFramework.Utilities.Email
Are we storing the Remind Me emails in the EmailQueue table?
760
The 
RemindMe email template used in the CRM Portal
 is as follows:
The 
RemindMe email template
 is stored in the table 
tblRemindMeTemplateDefaults
, which currently contains 
only a single template
. However, this table is 
not linked or associated
 with the 
EmailQueue
 table in any way.
Are we storing the 1st, 2nd and 3rd notification emails in the EmailQueue table?
760
Table dbo.tblEmailNotificationType has following data defining Notification Types we are sending to user.
EmailNotificationTypeID	
EmailNotificationTypeDesc
0
N/A
1
First Notice
2
Second Notice
3
Third Notice
4
Manual Notice
5
Late Fee Notice
EmailTracking Table
:
Contains data related to 
EmailNotificationTypeID
 values (1, 2, 3), which represent the 
first, second, and third reminder notices
 sent to users.
However, this table 
does not store the actual email bodies
.
EmailQueue Table
:
Stores email content including bodies, but 
does not include the 
EmailNotificationTypeID
 column
.
As a result, it is 
not possible to identify which emails are reminder notices
 from this table alone.
Recommendation
:
Add the 
EmailNotificationTypeID
 column to the 
EmailQueue
 table.
This will allow:
Identification of reminder notices directly from the EmailQueue.
Retrieval of corresponding email bodies for each type of reminder.
 URL:/spaces/PE/pages/4444979243/PUL-34+Spike+Assessment+of+Email+and+SMS+Copies+Availability+and+Presentation+in+Biller+Portal